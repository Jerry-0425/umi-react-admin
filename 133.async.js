(self.webpackChunk=self.webpackChunk||[]).push([[133],{31789:function(){"use strict"},82769:function(se,Q,H){"use strict";H.d(Q,{Z:function(){return f}});var a=H(93236),j=function(u){return u!==null&&typeof u=="object"},X=function(u){return typeof u=="function"},h=function(u){return typeof u=="string"},W=function(u){return typeof u=="boolean"},U=function(u){return typeof u=="number"},S=function(u){return typeof u=="undefined"},L=!1,C=L,w=function(u){C&&(X(u)||console.error('useMount: parameter `fn` expected to be a function, but got "'.concat(typeof u,'".'))),(0,a.useEffect)(function(){u==null||u()},[])},f=w},29564:function(se){var Q=9;if(typeof Element!="undefined"&&!Element.prototype.matches){var H=Element.prototype;H.matches=H.matchesSelector||H.mozMatchesSelector||H.msMatchesSelector||H.oMatchesSelector||H.webkitMatchesSelector}function a(j,X){for(;j&&j.nodeType!==Q;){if(typeof j.matches=="function"&&j.matches(X))return j;j=j.parentNode}}se.exports=a},24490:function(se,Q,H){var a=H(29564);function j(W,U,S,L,C){var w=h.apply(this,arguments);return W.addEventListener(S,w,C),{destroy:function(){W.removeEventListener(S,w,C)}}}function X(W,U,S,L,C){return typeof W.addEventListener=="function"?j.apply(null,arguments):typeof S=="function"?j.bind(null,document).apply(null,arguments):(typeof W=="string"&&(W=document.querySelectorAll(W)),Array.prototype.map.call(W,function(w){return j(w,U,S,L,C)}))}function h(W,U,S,L){return function(C){C.delegateTarget=a(C.target,U),C.delegateTarget&&L.call(W,C)}}se.exports=X},44785:function(se,Q){var H,a,j;(function(X,h){a=[],H=h,j=typeof H=="function"?H.apply(Q,a):H,j!==void 0&&(se.exports=j)})(this,function(){return function X(h,W,U){var S=window,L="application/octet-stream",C=U||L,w=h,f=!W&&!U&&w,u=document.createElement("a"),p=function(B){return String(B)},m=S.Blob||S.MozBlob||S.WebKitBlob||p,x=W||"download",k,N;if(m=m.call?m.bind(S):Blob,String(this)==="true"&&(w=[w,C],C=w[0],w=w[1]),f&&f.length<2048&&(x=f.split("/").pop().split("?")[0],u.href=f,u.href.indexOf(f)!==-1)){var R=new XMLHttpRequest;return R.open("GET",f,!0),R.responseType="blob",R.onload=function(B){X(B.target.response,x,L)},setTimeout(function(){R.send()},0),R}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(w))if(w.length>1024*1024*1.999&&m!==p)w=F(w),C=w.type||L;else return navigator.msSaveBlob?navigator.msSaveBlob(F(w),x):V(w);else if(/([\x80-\xff])/.test(w)){var I=0,P=new Uint8Array(w.length),y=P.length;for(I;I<y;++I)P[I]=w.charCodeAt(I);w=new m([P],{type:C})}k=w instanceof m?w:new m([w],{type:C});function F(B){var T=B.split(/[:;,]/),A=T[1],O=T[2]=="base64"?atob:decodeURIComponent,E=O(T.pop()),ee=E.length,te=0,$=new Uint8Array(ee);for(te;te<ee;++te)$[te]=E.charCodeAt(te);return new m([$],{type:A})}function V(B,T){if("download"in u)return u.href=B,u.setAttribute("download",x),u.className="download-js-link",u.innerHTML="downloading...",u.style.display="none",document.body.appendChild(u),setTimeout(function(){u.click(),document.body.removeChild(u),T===!0&&setTimeout(function(){S.URL.revokeObjectURL(u.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(B)&&(B="data:"+B.replace(/^data:([\w\/\-\+]+)/,L)),window.open(B)||confirm(`Displaying New Document

Use Save As... to download, then click back to return to this page.`)&&(location.href=B),!0;var A=document.createElement("iframe");document.body.appendChild(A),!T&&/^data:/.test(B)&&(B="data:"+B.replace(/^data:([\w\/\-\+]+)/,L)),A.src=B,setTimeout(function(){document.body.removeChild(A)},333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(k,x);if(S.URL)V(S.URL.createObjectURL(k),!0);else{if(typeof k=="string"||k.constructor===p)try{return V("data:"+C+";base64,"+S.btoa(k))}catch(B){return V("data:"+C+","+encodeURIComponent(k))}N=new FileReader,N.onload=function(B){V(this.result)},N.readAsDataURL(k)}return!0}})},11312:function(se){"use strict";var Q=Object.prototype.hasOwnProperty,H="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(H=!1));function j(U,S,L){this.fn=U,this.context=S,this.once=L||!1}function X(U,S,L,C,w){if(typeof L!="function")throw new TypeError("The listener must be a function");var f=new j(L,C||U,w),u=H?H+S:S;return U._events[u]?U._events[u].fn?U._events[u]=[U._events[u],f]:U._events[u].push(f):(U._events[u]=f,U._eventsCount++),U}function h(U,S){--U._eventsCount===0?U._events=new a:delete U._events[S]}function W(){this._events=new a,this._eventsCount=0}W.prototype.eventNames=function(){var S=[],L,C;if(this._eventsCount===0)return S;for(C in L=this._events)Q.call(L,C)&&S.push(H?C.slice(1):C);return Object.getOwnPropertySymbols?S.concat(Object.getOwnPropertySymbols(L)):S},W.prototype.listeners=function(S){var L=H?H+S:S,C=this._events[L];if(!C)return[];if(C.fn)return[C.fn];for(var w=0,f=C.length,u=new Array(f);w<f;w++)u[w]=C[w].fn;return u},W.prototype.listenerCount=function(S){var L=H?H+S:S,C=this._events[L];return C?C.fn?1:C.length:0},W.prototype.emit=function(S,L,C,w,f,u){var p=H?H+S:S;if(!this._events[p])return!1;var m=this._events[p],x=arguments.length,k,N;if(m.fn){switch(m.once&&this.removeListener(S,m.fn,void 0,!0),x){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,L),!0;case 3:return m.fn.call(m.context,L,C),!0;case 4:return m.fn.call(m.context,L,C,w),!0;case 5:return m.fn.call(m.context,L,C,w,f),!0;case 6:return m.fn.call(m.context,L,C,w,f,u),!0}for(N=1,k=new Array(x-1);N<x;N++)k[N-1]=arguments[N];m.fn.apply(m.context,k)}else{var R=m.length,I;for(N=0;N<R;N++)switch(m[N].once&&this.removeListener(S,m[N].fn,void 0,!0),x){case 1:m[N].fn.call(m[N].context);break;case 2:m[N].fn.call(m[N].context,L);break;case 3:m[N].fn.call(m[N].context,L,C);break;case 4:m[N].fn.call(m[N].context,L,C,w);break;default:if(!k)for(I=1,k=new Array(x-1);I<x;I++)k[I-1]=arguments[I];m[N].fn.apply(m[N].context,k)}}return!0},W.prototype.on=function(S,L,C){return X(this,S,L,C,!1)},W.prototype.once=function(S,L,C){return X(this,S,L,C,!0)},W.prototype.removeListener=function(S,L,C,w){var f=H?H+S:S;if(!this._events[f])return this;if(!L)return h(this,f),this;var u=this._events[f];if(u.fn)u.fn===L&&(!w||u.once)&&(!C||u.context===C)&&h(this,f);else{for(var p=0,m=[],x=u.length;p<x;p++)(u[p].fn!==L||w&&!u[p].once||C&&u[p].context!==C)&&m.push(u[p]);m.length?this._events[f]=m.length===1?m[0]:m:h(this,f)}return this},W.prototype.removeAllListeners=function(S){var L;return S?(L=H?H+S:S,this._events[L]&&h(this,L)):(this._events=new a,this._eventsCount=0),this},W.prototype.off=W.prototype.removeListener,W.prototype.addListener=W.prototype.on,W.prefixed=H,W.EventEmitter=W,se.exports=W},40798:function(se,Q,H){"use strict";H.d(Q,{Ac:function(){return X},IP:function(){return C},J2:function(){return p},Lc:function(){return u},PA:function(){return h},U2:function(){return k},WY:function(){return m},XW:function(){return L},Zj:function(){return j},_x:function(){return S},qH:function(){return U},u:function(){return N}});function a(T,A){var O=Object.keys(T);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(T);A&&(E=E.filter(function(ee){return Object.getOwnPropertyDescriptor(T,ee).enumerable})),O.push.apply(O,E)}return O}function j(T){for(var A=1;A<arguments.length;A++){var O=arguments[A]!=null?arguments[A]:{};A%2?a(Object(O),!0).forEach(function(E){S(T,E,O[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(O)):a(Object(O)).forEach(function(E){Object.defineProperty(T,E,Object.getOwnPropertyDescriptor(O,E))})}return T}function X(T){"@babel/helpers - typeof";return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},X(T)}function h(T,A){if(!(T instanceof A))throw new TypeError("Cannot call a class as a function")}function W(T,A){for(var O=0;O<A.length;O++){var E=A[O];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(T,B(E.key),E)}}function U(T,A,O){return A&&W(T.prototype,A),O&&W(T,O),Object.defineProperty(T,"prototype",{writable:!1}),T}function S(T,A,O){return A=B(A),A in T?Object.defineProperty(T,A,{value:O,enumerable:!0,configurable:!0,writable:!0}):T[A]=O,T}function L(T,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(A&&A.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),Object.defineProperty(T,"prototype",{writable:!1}),A&&w(T,A)}function C(T){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(O){return O.__proto__||Object.getPrototypeOf(O)},C(T)}function w(T,A){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,ee){return E.__proto__=ee,E},w(T,A)}function f(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(T){return!1}}function u(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function p(T,A){if(A&&(typeof A=="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u(T)}function m(T){var A=f();return function(){var E=C(T),ee;if(A){var te=C(this).constructor;ee=Reflect.construct(E,arguments,te)}else ee=E.apply(this,arguments);return p(this,ee)}}function x(T,A){for(;!Object.prototype.hasOwnProperty.call(T,A)&&(T=C(T),T!==null););return T}function k(){return typeof Reflect!="undefined"&&Reflect.get?k=Reflect.get.bind():k=function(A,O,E){var ee=x(A,O);if(ee){var te=Object.getOwnPropertyDescriptor(ee,O);return te.get?te.get.call(arguments.length<3?A:E):te.value}},k.apply(this,arguments)}function N(T){return R(T)||I(T)||P(T)||F()}function R(T){if(Array.isArray(T))return y(T)}function I(T){if(typeof Symbol!="undefined"&&T[Symbol.iterator]!=null||T["@@iterator"]!=null)return Array.from(T)}function P(T,A){if(T){if(typeof T=="string")return y(T,A);var O=Object.prototype.toString.call(T).slice(8,-1);if(O==="Object"&&T.constructor&&(O=T.constructor.name),O==="Map"||O==="Set")return Array.from(T);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return y(T,A)}}function y(T,A){(A==null||A>T.length)&&(A=T.length);for(var O=0,E=new Array(A);O<A;O++)E[O]=T[O];return E}function F(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V(T,A){if(typeof T!="object"||T===null)return T;var O=T[Symbol.toPrimitive];if(O!==void 0){var E=O.call(T,A||"default");if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(A==="string"?String:Number)(T)}function B(T){var A=V(T,"string");return typeof A=="symbol"?A:String(A)}},24506:function(se,Q,H){"use strict";H.r(Q),H.d(Q,{ABORT:function(){return y},AFTER_DEFINITION_CHANGE:function(){return ue},AUTOPLAY_PREVENTED:function(){return E},AUTOPLAY_STARTED:function(){return O},BEFORE_DEFINITION_CHANGE:function(){return oe},BUFFER_CHANGE:function(){return F},CANPLAY:function(){return w},CANPLAY_THROUGH:function(){return f},COMPLETE:function(){return ee},CSS_FULLSCREEN_CHANGE:function(){return ne},DEFINITION_CHANGE:function(){return q},DESTROY:function(){return $},DOWNLOAD_SPEED_CHANGE:function(){return J},DURATION_CHANGE:function(){return u},EMPTIED:function(){return R},ENDED:function(){return X},ERROR:function(){return W},FPS_STUCK:function(){return fe},FULLSCREEN_CHANGE:function(){return xe},LOADED_DATA:function(){return m},LOAD_START:function(){return N},MINI_STATE_CHANGE:function(){return he},PAUSE:function(){return h},PIP_CHANGE:function(){return Ne},PLAY:function(){return a},PLAYER_BLUR:function(){return B},PLAYER_FOCUS:function(){return V},PLAYING:function(){return j},PLAYNEXT:function(){return Fe},PROGRESS:function(){return k},RATE_CHANGE:function(){return x},READY:function(){return T},REPLAY:function(){return te},RESET:function(){return Ve},RETRY:function(){return le},ROTATE:function(){return Ge},SCREEN_SHOT:function(){return Me},SEEKED:function(){return S},SEEKING:function(){return U},SEI_PARSED:function(){return ve},SHORTCUT:function(){return Ae},SOURCE_ERROR:function(){return je},SOURCE_SUCCESS:function(){return Ye},STALLED:function(){return I},STATS_EVENTS:function(){return Le},SUSPEND:function(){return P},SWITCH_SUBTITLE:function(){return ze},TIME_UPDATE:function(){return L},URL_CHANGE:function(){return Ee},URL_NULL:function(){return A},USER_ACTION:function(){return de},VIDEO_EVENTS:function(){return we},VIDEO_RESIZE:function(){return K},VOLUME_CHANGE:function(){return p},WAITING:function(){return C},XGLOG:function(){return re}});var a="play",j="playing",X="ended",h="pause",W="error",U="seeking",S="seeked",L="timeupdate",C="waiting",w="canplay",f="canplaythrough",u="durationchange",p="volumechange",m="loadeddata",x="ratechange",k="progress",N="loadstart",R="emptied",I="stalled",P="suspend",y="abort",F="bufferedChange",V="focus",B="blur",T="ready",A="urlNull",O="autoplay_started",E="autoplay_was_prevented",ee="complete",te="replay",$="destroy",Ee="urlchange",J="download_speed_change",xe="fullscreen_change",ne="cssFullscreen_change",he="mini_state_change",q="definition_change",oe="before_definition_change",ue="after_definition_change",ve="SEI_PARSED",le="retry",K="video_resize",Ne="pip_change",Ge="rotate",Me="screenShot",Fe="playnext",Ae="shortcut",re="xglog",de="user_action",Ve="reset",je="source_error",Ye="source_success",ze="switch_subtitle",we=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","ratechange","progress","loadstart","emptied","stalled","suspend","abort","lowdecode"],Le={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"},fe="fps_stuck"},65186:function(se,Q,H){"use strict";H.d(Q,{Z:function(){return pe}});var a=H(40798),j=H(11312),X=H.n(j),h=H(64389),W={android:/(Android)\s([\d.]+)/,ios:/(Version)\/([\d.]+)/},U=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],S={get device(){var d=S.os;return d.isPc?"pc":"mobile"},get browser(){if(typeof navigator=="undefined")return"";var d=navigator.userAgent.toLowerCase(),l={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(l).filter(function(s){return l[s].test(d)}))[0]},get os(){if(typeof navigator=="undefined")return{};var d=navigator.userAgent,l=/(?:Windows Phone)/.test(d),s=/(?:SymbianOS)/.test(d)||l,t=/(?:Android)/.test(d),e=/(?:Firefox)/.test(d),i=/(?:iPad|PlayBook)/.test(d)||t&&!/(?:Mobile)/.test(d)||e&&/(?:Tablet)/.test(d),n=/(?:iPhone)/.test(d)&&!i,r=!n&&!t&&!s&&!i,o=/(?:iPad|PlayBook)/.test(d);return{isTablet:i,isPhone:n,isIpad:o,isIos:n||o,isAndroid:t,isPc:r,isSymbian:s,isWindowsPhone:l,isFireFox:e}},get osVersion(){if(typeof navigator=="undefined")return 0;var d=navigator.userAgent,l="";/(?:iPhone)|(?:iPad|PlayBook)/.test(d)?l=W.ios:l=W.android;var s=l?l.exec(d):[];if(s&&s.length>=3){var t=s[2].split(".");return t.length>0?parseInt(t[0]):0}return 0},get isWeixin(){if(typeof navigator=="undefined")return!1;var d=/(micromessenger)\/([\d.]+)/,l=d.exec(navigator.userAgent.toLocaleLowerCase());return!!l},isSupportMP4:function(){var l={isSupport:!1,mime:""};if(typeof document=="undefined")return l;if(this.supportResult)return this.supportResult;var s=document.createElement("video");return typeof s.canPlayType=="function"&&U.map(function(t){s.canPlayType('video/mp4; codecs="'.concat(t,'"'))==="probably"&&(l.isSupport=!0,l.mime+="||".concat(t))}),this.supportResult=l,s=null,l},isMSESupport:function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"';if(typeof MediaSource=="undefined"||!MediaSource)return!1;try{return MediaSource.isTypeSupported(l)}catch(s){return this._logger.error(l,s),!1}},isHevcSupported:function(){return typeof MediaSource=="undefined"||!MediaSource.isTypeSupported?!1:MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"')},probeConfigSupported:function(l){var s={supported:!1,smooth:!1,powerEfficient:!1};if(!l||typeof navigator=="undefined")return Promise.resolve(s);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(l);var t=l.video||{},e=l.audio||{};try{var i=MediaSource.isTypeSupported(t.contentType),n=MediaSource.isTypeSupported(e.contentType);return Promise.resolve({supported:i&&n,smooth:!1,powerEfficient:!1})}catch(r){return Promise.resolve(s)}}},L="3.0.8",C={1:"media",2:"media",3:"media",4:"media",5:"media",6:"media"},w={1:5101,2:5102,3:5103,4:5104,5:5105,6:5106},f=(0,a.qH)(function d(l){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};(0,a.PA)(this,d);var t=l&&l.i18n?l.i18n.ERROR_TYPES:null;if(l.media){var e=s.mediaError?s.mediaError:l.media.error||{},i=l.duration,n=l.currentTime,r=l.ended,o=l.src,c=l.currentSrc,g=l.media,v=g.readyState,_=g.networkState,b=s.errorCode||e.code;w[b]&&(b=w[b]);var D={playerVersion:L,currentTime:n,duration:i,ended:r,readyState:v,networkState:_,src:o||c,errorType:s.errorType,errorCode:b,message:s.errorMessage||e.message,mediaError:e,originError:s.originError?s.originError.stack:"",host:h.ZP.getHostFromUrl(o||c)};return s.ext&&Object.keys(s.ext).map(function(Y){D[Y]=s.ext[Y]}),D}else if(arguments.length>1){for(var M={playerVersion:L,domain:document.domain},Z=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],G=0;G<arguments.length;G++)M[Z[G]]=arguments[G];return M.ex=t?(t[arguments[0]]||{}).msg:"",M}}),u=H(24506);function p(d,l){!this||!this.emit||(d==="error"?this.errorHandler(d,l.error):this.emit(d,l))}function m(d,l){return function(s,t){var e={player:l,eventName:d,originalEvent:s,detail:s.detail||{},timeStamp:s.timeStamp,currentTime:l.currentTime,duration:l.duration,paused:l.paused,ended:l.ended,isInternalOp:!!l._internalOp[s.type],muted:l.muted,volume:l.volume,host:h.ZP.getHostFromUrl(l.currentSrc),vtype:l.vtype};if(l.removeInnerOP(s.type),d==="timeupdate"&&(l._currentTime=l.media&&l.media.currentTime),d==="ratechange"){var i=l.media?l.media.playbackRate:0;if(i&&l._rate===i)return;l._rate=l.media&&l.media.playbackRate}if(d==="durationchange"&&(l._duration=l.media.duration),d==="volumechange"&&(e.isMutedChange=l._lastMuted!==l.muted,l._lastMuted=l.muted),d==="error"&&(e.error=t||l.video.error),l.mediaEventMiddleware[d]){var n=p.bind(l,d,e);try{l.mediaEventMiddleware[d].call(l,e,n)}catch(r){throw p.call(l,d,e),r}}else p.call(l,d,e)}}var x=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(t){var e;(0,a.PA)(this,s),e=l.call(this,t),e._hasStart=!1,e._currentTime=0,e._duration=0,e._internalOp={},e._lastMuted=!1,e.vtype="MP4",e._rate=-1,e.mediaConfig=Object.assign({},{controls:!1,autoplay:t.autoplay,playsinline:t.playsinline,"x5-playsinline":t.playsinline,"webkit-playsinline":t.playsinline,"x5-video-player-fullscreen":t["x5-video-player-fullscreen"]||t.x5VideoPlayerFullscreen,"x5-video-orientation":t["x5-video-orientation"]||t.x5VideoOrientation,airplay:t.airplay,"webkit-airplay":t.airplay,tabindex:t.tabindex|0,mediaType:t.mediaType||"video","data-index":-1},t.videoConfig,t.videoAttributes);var i=t["x5-video-player-type"]||t.x5VideoPlayerType;return S.isWeixin&&S.os.isAndroid&&i&&(e.mediaConfig["x5-video-player-type"]=i,delete e.mediaConfig.playsinline,delete e.mediaConfig["webkit-playsinline"],delete e.mediaConfig["x5-playsinline"]),t.loop&&(e.mediaConfig.loop="loop"),e.media=h.ZP.createDom(e.mediaConfig.mediaType,"",e.mediaConfig,""),t.defaultPlaybackRate&&(e.media.defaultPlaybackRate=e.media.playbackRate=t.defaultPlaybackRate),h.ZP.typeOf(t.volume)==="Number"&&(e.volume=t.volume),t.autoplayMuted&&(e.media.muted=!0,e._lastMuted=!0),t.autoplay&&(e.media.autoplay=!0),e._interval={},e.mediaEventMiddleware={},e.attachVideoEvents(),e}return(0,a.qH)(s,[{key:"setEventsMiddleware",value:function(e){var i=this;Object.keys(e).map(function(n){i.mediaEventMiddleware[n]=e[n]})}},{key:"removeEventsMiddleware",value:function(e){var i=this;Object.keys(e).map(function(n){delete i.mediaEventMiddleware[n]})}},{key:"attachVideoEvents",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.media;this._evHandlers||(this._evHandlers=u.VIDEO_EVENTS.map(function(n){var r="on".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));return typeof e[r]=="function"&&e.on(n,e[r]),(0,a._x)({},n,m(n,e))})),this._evHandlers.forEach(function(n){var r=Object.keys(n)[0];i.addEventListener(r,n[r],!1)})}},{key:"detachVideoEvents",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.media;this._evHandlers.forEach(function(n){var r=Object.keys(n)[0];i.removeEventListener(r,n[r],!1)}),this._evHandlers.forEach(function(n){var r=Object.keys(n)[0],o="on".concat(r.charAt(0).toUpperCase()).concat(r.slice(1));typeof e[o]=="function"&&e.off(r,e[o])}),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(e,i){var n=this;e.removeAttribute("src"),e.load(),i.forEach(function(v){n.media.appendChild(h.ZP.createDom("source","",{src:"".concat(v.src),type:"".concat(v.type||"")}))});var r=e.children;if(r){this._videoSourceCount=r.length,this._vLoadeddata=function(v){n.emit(u.SOURCE_SUCCESS,{src:v.target.currentSrc,host:h.ZP.getHostFromUrl(v.target.currentSrc)})};for(var o=null,c=0;c<this._evHandlers.length;c++)if(Object.keys(this._evHandlers[c])[0]==="error"){o=this._evHandlers[c];break}!this._sourceError&&(this._sourceError=function(v){if(n._videoSourceCount--,n._videoSourceCount===0){var _={code:4,message:"sources_load_error"};o?o.error(v,_):n.errorHandler("error",_)}var b=C[4];n.emit(u.SOURCE_ERROR,new f(n,{errorType:b,errorCode:4,errorMessage:"sources_load_error",mediaError:{code:4,message:"sources_load_error"},src:v.target.src}))});for(var g=0;g<r.length;g++)r[g].addEventListener("error",this._sourceError);e.addEventListener("loadeddata",this._vLoadeddata)}}},{key:"_detachSourceEvents",value:function(e){var i=e.children;if(!(!i||i.length===0||!this._sourceError)){for(var n=0;n<i.length;n++)i[n].removeEventListener("error",this._sourceError);for(;i.length>0;)e.removeChild(i[0]);this._vLoadeddata&&e.removeEventListener("loadeddata",this._vLoadeddata)}}},{key:"errorHandler",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.media&&(this.media.error||i)){var n=this.media.error||i,r=n.code?C[n.code]:"other",o=n.message;this.media.currentSrc||(o="empty_src",n={code:6,message:o}),this.emit(e,new f(this,{errorType:r,errorCode:n.code,errorMessage:n.message||"",mediaError:n}))}}},{key:"destroy",value:function(){this.media&&(this.media.pause&&(this.media.pause(),this.media.muted=!0),this.media.removeAttribute("src"),this.media.load()),this._currentTime=0,this._duration=0,this.mediaConfig=null;for(var e in this._interval)Object.prototype.hasOwnProperty.call(this._interval,e)&&(clearInterval(this._interval[e]),this._interval[e]=null);this.detachVideoEvents(),this.media=null,this.mediaEventMiddleware={},this.removeAllListeners()}},{key:"video",get:function(){return this.media},set:function(e){this.media=e}},{key:"play",value:function(){var e=this.media?this.media.play():null;return e}},{key:"pause",value:function(){this.media&&this.media.pause()}},{key:"load",value:function(){this.media&&this.media.load()}},{key:"canPlayType",value:function(e){return this.media?this.media.canPlayType(e):!1}},{key:"getBufferedRange",value:function(e){var i=[0,0];if(!this.media)return i;e||(e=this.media.buffered);var n=this.media.currentTime;if(e)for(var r=0,o=e.length;r<o&&(i[0]=e.start(r),i[1]=e.end(r),!(i[0]<=n&&n<=i[1]));r++);return i[0]-n<=0&&n-i[1]<=0?i:[0,0]}},{key:"autoplay",get:function(){return this.media?this.media.autoplay:!1},set:function(e){this.media&&(this.media.autoplay=e)}},{key:"buffered",get:function(){return this.media?this.media.buffered:null}},{key:"buffered2",get:function(){return this.media&&this.media.buffered?h.ZP.getBuffered2(this.media.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.media)return e;var i=this.media.buffered;if(!i||i.length===0)return e;for(var n=0;n<i.length;n++)if((i.start(n)<=this.currentTime||i.start(n)<.1)&&i.end(n)>=this.currentTime)return{start:i.start(n),end:i.end(n)};return e}},{key:"crossOrigin",get:function(){return this.media?this.media.crossOrigin:""},set:function(e){this.media&&(this.media.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.media?this.media.currentSrc:""},set:function(e){this.media&&(this.media.currentSrc=e)}},{key:"currentTime",get:function(){return this.media?this.media.currentTime!==void 0?this.media.currentTime:this._currentTime:0},set:function(e){this.media&&(this.media.currentTime=e)}},{key:"defaultMuted",get:function(){return this.media?this.media.defaultMuted:!1},set:function(e){this.media&&(this.media.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return this.media?this.media.ended:!1}},{key:"error",get:function(){return this.media.error}},{key:"errorNote",get:function(){var e=this.media.error;if(!e)return"";var i=["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];return i[this.media.error.code-1]}},{key:"loop",get:function(){return this.media?this.media.loop:!1},set:function(e){this.media&&(this.media.loop=e)}},{key:"muted",get:function(){return this.media?this.media.muted:!1},set:function(e){!this.media||this.media.muted===e||(this._lastMuted=this.media.muted,this.media.muted=e)}},{key:"networkState",get:function(){return this.media.networkState}},{key:"paused",get:function(){return this.media?this.media.paused:!0}},{key:"playbackRate",get:function(){return this.media?this.media.playbackRate:0},set:function(e){!this.media||e===1/0||(this.media.defaultPlaybackRate=e,this.media.playbackRate=e)}},{key:"played",get:function(){return this.media?this.media.played:null}},{key:"preload",get:function(){return this.media?this.media.preload:!1},set:function(e){this.media&&(this.media.preload=e)}},{key:"readyState",get:function(){return this.media.readyState}},{key:"seekable",get:function(){return this.media?this.media.seekable:!1}},{key:"seeking",get:function(){return this.media?this.media.seeking:!1}},{key:"src",get:function(){return this.media?this.media.src:""},set:function(e){if(this.media){if(this.emit(u.URL_CHANGE,e),this.emit(u.WAITING),this._currentTime=0,this._duration=0,/^blob/.test(this.media.currentSrc)||/^blob/.test(this.media.src)){this.onWaiting();return}this._detachSourceEvents(this.media),h.ZP.typeOf(e)==="Array"?this._attachSourceEvents(this.media,e):e?this.media.src=e:this.media.removeAttribute("src"),this.load()}}},{key:"volume",get:function(){return this.media?this.media.volume:0},set:function(e){e===1/0||!this.media||(this.media.volume=e)}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,i){for(var n,r=arguments.length,o=new Array(r>2?r-2:0),c=2;c<r;c++)o[c-2]=arguments[c];(n=(0,a.U2)((0,a.IP)(s.prototype),"emit",this)).call.apply(n,[this,e,i].concat(o))}},{key:"on",value:function(e,i){for(var n,r=arguments.length,o=new Array(r>2?r-2:0),c=2;c<r;c++)o[c-2]=arguments[c];(n=(0,a.U2)((0,a.IP)(s.prototype),"on",this)).call.apply(n,[this,e,i].concat(o))}},{key:"once",value:function(e,i){for(var n,r=arguments.length,o=new Array(r>2?r-2:0),c=2;c<r;c++)o[c-2]=arguments[c];(n=(0,a.U2)((0,a.IP)(s.prototype),"once",this)).call.apply(n,[this,e,i].concat(o))}},{key:"off",value:function(e,i){for(var n,r=arguments.length,o=new Array(r>2?r-2:0),c=2;c<r;c++)o[c-2]=arguments[c];(n=(0,a.U2)((0,a.IP)(s.prototype),"off",this)).call.apply(n,[this,e,i].concat(o))}},{key:"offAll",value:function(){(0,a.U2)((0,a.IP)(s.prototype),"removeAllListeners",this).call(this)}}]),s}(X()),k=function(){function d(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};(0,a.PA)(this,d),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=l}return(0,a.qH)(d,[{key:"openDB",value:function(s){var t=this,e=this,i=this.myDB.version||1,n=e.indexedDB.open(e.myDB.name,i);n.onerror=function(r){},n.onsuccess=function(r){t.myDB.db=r.target.result,s.call(e)},n.onupgradeneeded=function(r){var o=r.target.result;r.target.transaction,o.objectStoreNames.contains(e.myDB.ojstore.name)||o.createObjectStore(e.myDB.ojstore.name,{keyPath:e.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){var s=this;s.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(s,t){for(var e=this.myDB.db.transaction(s,"readwrite").objectStore(s),i,n=0;n<t.length;n++)i=e.add(t[n]),i.onerror=function(){},i.onsuccess=function(){}}},{key:"putData",value:function(s,t){for(var e=this.myDB.db.transaction(s,"readwrite").objectStore(s),i,n=0;n<t.length;n++)i=e.put(t[n]),i.onerror=function(){},i.onsuccess=function(){}}},{key:"getDataByKey",value:function(s,t,e){var i=this,n=this.myDB.db.transaction(s,"readwrite").objectStore(s),r=n.get(t);r.onerror=function(){e.call(i,null)},r.onsuccess=function(o){var c=o.target.result;e.call(i,c)}}},{key:"deleteData",value:function(s,t){var e=this.myDB.db.transaction(s,"readwrite").objectStore(s);e.delete(t)}},{key:"clearData",value:function(s){var t=this.myDB.db.transaction(s,"readwrite").objectStore(s);t.clear()}}]),d}(),N=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],R=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],I=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],P="data-xgplayerid",y=H(44086),F=H(93112),V=function(){function d(){var l=this;if((0,a.PA)(this,d),(0,a._x)(this,"__trigger",function(s){var t=new Date().getTime();l.timeStamp=t;for(var e=0;e<s.length;e++)l.__runHandler(s[e].target)}),this.__handlers=[],this.timeStamp=0,this.observer=null,!!window.ResizeObserver)try{this.observer=new window.ResizeObserver((0,h.P2)(this.__trigger,100,{trailing:!0})),this.timeStamp=new Date().getTime()}catch(s){console.error(s)}}return(0,a.qH)(d,[{key:"addObserver",value:function(s,t){if(this.observer){this.observer&&this.observer.observe(s);for(var e=s.getAttribute(P),i=this.__handlers,n=-1,r=0;r<i.length;r++)i[r]&&s===i[r].target&&(n=r);n>-1?this.__handlers[n].handler=t:this.__handlers.push({target:s,handler:t,playerId:e})}}},{key:"unObserver",value:function(s){var t=-1;this.__handlers.map(function(e,i){s===e.target&&(t=i)});try{this.observer&&this.observer.unobserve(s)}catch(e){}this.observer&&this.observer.unobserve(s),t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(s){for(var t=this.__handlers,e=0;e<t.length;e++)if(t[e]&&s===t[e].target){try{t[e].handler(s)}catch(i){console.error(i)}return!0}return!1}}]),d}(),B=null;function T(d,l){return B||(B=new V),B.addObserver(d,l),B}function A(d,l){B.unObserver(d,l)}var O={pluginGroup:{},init:function(l){var s=l._pluginInfoId;s||(s=new Date().getTime(),l._pluginInfoId=s),!l.config.closeResizeObserver&&T(l.root,function(){l.resize()}),Object.keys(this.pluginGroup).length===0&&(l.isUserActive=!0),this.pluginGroup[s]={_player:l,_originalOptions:l.config||{},_plugins:{}}},checkPlayerRoot:function(l){if(this.pluginGroup){for(var s=Object.keys(this.pluginGroup),t=0;t<s.length;t++){var e=this.pluginGroup[s[t]]._player;if(e.root===l)return e}return null}return null},formatPluginInfo:function(l,s){var t=null,e=null;return l.plugin&&typeof l.plugin=="function"?(t=l.plugin,e=l.options):(t=l,e={}),s&&(e.config=s||{}),{PLUFGIN:t,options:e}},checkPluginIfExits:function(l,s){for(var t=0;t<s.length;t++)if(l.toLowerCase()===s[t].pluginName.toLowerCase())return!0;return!1},getRootByConfig:function(l,s){for(var t=Object.keys(s),e=null,i=0;i<t.length;i++)if(l.toLowerCase()===t[i].toLowerCase()){e=s[t[i]];break}return h.ZP.typeOf(e)==="Object"?{root:e.root,position:e.position}:{}},lazyRegister:function(l,s){var t=this,e=s.timeout||1500;return Promise.race([s.loader().then(function(i){var n;i&&i.__esModule?n=i.default:n=i,t.register(l,n,i.options)}),new Promise(function(i,n){setTimeout(function(){n(new Error("timeout"))},e)})])},register:function(l,s){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(!l||!s||typeof s!="function"||s.prototype===void 0)){var e=l._pluginInfoId;if(!(!e||!this.pluginGroup[e])){this.pluginGroup[e]._plugins||(this.pluginGroup[e]._plugins={});var i=this.pluginGroup[e]._plugins,n=this.pluginGroup[e]._originalOptions;t.player=this.pluginGroup[e]._player;var r=t.pluginName||s.pluginName;if(!r)throw new Error("The property pluginName is necessary");if(s.isSupported&&!s.isSupported(l.config.mediaType,l.config.codecType)){console.warn("not supported plugin [".concat(r,"]"));return}t.config||(t.config={});for(var o=Object.keys(n),c=0;c<o.length;c++)if(r.toLowerCase()===o[c].toLowerCase()){var g=n[o[c]];h.ZP.typeOf(g)==="Object"?t.config=Object.assign({},t.config,n[o[c]]):h.ZP.typeOf(g)==="Boolean"&&(t.config.disable=!g);break}s.defaultConfig&&Object.keys(s.defaultConfig).forEach(function(_){typeof t.config[_]=="undefined"&&(t.config[_]=s.defaultConfig[_])}),t.root?typeof t.root=="string"&&(t.root=l[t.root]):t.root=l.root,t.index=t.config.index||0;try{i[r.toLowerCase()]&&(this.unRegister(e,r.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(r,"] exist, destroy the old instance")));var v=new s(t);return i[r.toLowerCase()]=v,i[r.toLowerCase()].func=s,v&&typeof v.afterCreate=="function"&&v.afterCreate(),v}catch(_){throw console.error(_),_}}}},unRegister:function(l,s){l._pluginInfoId&&(l=l._pluginInfoId),s=s.toLowerCase();try{var t=this.pluginGroup[l]._plugins[s];t&&(t.pluginName&&t.__destroy(),delete this.pluginGroup[l]._plugins[s])}catch(e){console.error("[unRegister:".concat(s,"] cgid:[").concat(l,"] error"),e)}},deletePlugin:function(l,s){var t=l._pluginInfoId;t&&this.pluginGroup[t]&&this.pluginGroup[t]._plugins&&delete this.pluginGroup[t]._plugins[s]},getPlugins:function(l){var s=l._pluginInfoId;return s&&this.pluginGroup[s]?this.pluginGroup[s]._plugins:{}},findPlugin:function(l,s){var t=l._pluginInfoId;if(!t||!this.pluginGroup[t])return null;var e=s.toLowerCase();return this.pluginGroup[t]._plugins[e]},beforeInit:function(l){var s=this;function t(e){return!e||!e.then?new Promise(function(i){i()}):e}return new Promise(function(e){if(s.pluginGroup){var i;return l._loadingPlugins&&l._loadingPlugins.length?i=Promise.all(l._loadingPlugins):i=Promise.resolve(),i.then(function(){var n=l._pluginInfoId;if(!s.pluginGroup[n]){e();return}var r=s.pluginGroup[n]._plugins,o=[];Object.keys(r).forEach(function(c){if(r[c]&&r[c].beforePlayerInit)try{var g=r[c].beforePlayerInit();o.push(t(g))}catch(v){throw o.push(t(null)),v}}),Promise.all([].concat(o)).then(function(){e()}).catch(function(c){console.error(c),e()})})}})},afterInit:function(l){var s=l._pluginInfoId;if(!(!s||!this.pluginGroup[s])){var t=this.pluginGroup[s]._plugins;Object.keys(t).forEach(function(e){t[e]&&t[e].afterPlayerInit&&t[e].afterPlayerInit()})}},setLang:function(l,s){var t=s._pluginInfoId;if(!(!t||!this.pluginGroup[t])){var e=this.pluginGroup[t]._plugins;Object.keys(e).forEach(function(i){if(e[i].updateLang)e[i].updateLang(l);else try{e[i].lang=l}catch(n){console.warn("".concat(i," setLang"))}})}},reRender:function(l){var s=this,t=l._pluginInfoId;if(!(!t||!this.pluginGroup[t])){var e=[],i=this.pluginGroup[t]._plugins;Object.keys(i).forEach(function(n){n!=="controls"&&i[n]&&(e.push({plugin:i[n].func,options:i[n].__args}),s.unRegister(t,n))}),e.forEach(function(n){s.register(l,n.plugin,n.options)})}},onPluginsReady:function(l){var s=l._pluginInfoId;if(!(!s||!this.pluginGroup[s])){var t=this.pluginGroup[s]._plugins||{};Object.keys(t).forEach(function(e){t[e].onPluginsReady&&typeof t[e].onPluginsReady=="function"&&t[e].onPluginsReady()})}},setCurrentUserActive:function(l,s){if(this.pluginGroup[l]){if(!s)return this.pluginGroup[l]._player.isUserActive=s,l;for(var t=Object.keys(this.pluginGroup),e=0;e<t.length;e++){var i=this.pluginGroup[t[e]];i&&i._player&&(this.pluginGroup[t[e]]._player.isUserActive=!1)}return this.pluginGroup[l]._player.isUserActive=s,l}},getCurrentUseActiveId:function(){if(this.pluginGroup){for(var l=Object.keys(this.pluginGroup),s=0;s<l.length;s++){var t=this.pluginGroup[l[s]];if(t&&t._player&&t._player.isUserActive)return l[s]}return null}},destroy:function(l){var s=l._pluginInfoId;if(this.pluginGroup[s]){A(l.root);for(var t=this.pluginGroup[s]._plugins,e=0,i=Object.keys(t);e<i.length;e++){var n=i[e];this.unRegister(s,n)}var r=l.isUseActive;if(delete this.pluginGroup[s],delete l._pluginInfoId,r){var o=Object.keys(this.pluginGroup);o.length>0&&this.setCurrentUserActive(o[o.length-1],!0)}}}},E={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-active",INACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",INNER_FULLSCREEN:"xgplayer-fullscreen-inner",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",CONTROLS_AUTOHIDE:"controls-autohide",TOP_BAR_AUTOHIDE:"top-bar-autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"};function ee(){return{id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!0,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},ignores:[],whitelist:[],inactive:3e3,lang:(0,h.VQ)(),controls:!0,marginControls:!1,fullscreenTarget:null,screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],tabindex:0,thumbnail:null,videoConfig:{},isHideTips:!1,minWaitDelay:200,commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}}}var te=function(l,s){var t,e,i;s.preset&&s.options?i=new s.preset(s.options,l.config):i=new s({},l.config);var n=i,r=n.plugins,o=r===void 0?[]:r,c=n.ignores,g=c===void 0?[]:c,v=n.icons,_=v===void 0?{}:v,b=n.i18n,D=b===void 0?[]:b;l.config.plugins||(l.config.plugins=[]),l.config.ignores||(l.config.ignores=[]),(t=l.config.plugins).push.apply(t,(0,a.u)(o)),(e=l.config.ignores).push.apply(e,(0,a.u)(g)),Object.keys(_).map(function(Z){l.config.icons[Z]||(l.config.icons[Z]=_[Z])});var M=l.config.i18n||[];D.push.apply(D,(0,a.u)(M)),l.config.i18n=D},$=H(42970),Ee=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){var t;(0,a.PA)(this,s);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=l.call.apply(l,[this].concat(i)),(0,a._x)((0,a.Lc)(t),"onMouseEnter",function(r){var o=(0,a.Lc)(t),c=o.player,g=o.playerConfig;g.closeControlsBlur&&c.focus({autoHide:!1})}),(0,a._x)((0,a.Lc)(t),"onMouseLeave",function(){var r=(0,a.Lc)(t),o=r.player;o.focus()}),t}return(0,a.qH)(s,[{key:"beforeCreate",value:function(e){!e.config.mode&&S.device==="mobile"&&(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,i=this.config,n=i.disable,r=i.height,o=i.mode;if(!n){o==="flex"&&this.player.addClass(E.FLEX_CONTROLS);var c={height:"".concat(r,"px")};Object.keys(c).map(function(v){e.root.style[v]=c[v]}),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(u.MINI_STATE_CHANGE,function(v){v?h.ZP.addClass(e.root,"mini-controls"):h.ZP.removeClass(e.root,"mini-controls")});var g=this.playerConfig.isMobileSimulateMode;S.device!=="mobile"&&g!=="mobile"&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"focusAwhile",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&h.ZP.addClass(this.root,E.CONTROLS_AUTOHIDE)}},{key:"pauseAutoHide",value:function(){h.ZP.removeClass(this.root,E.CONTROLS_AUTOHIDE)}},{key:"show",value:function(){h.ZP.addClass(this.root,"show")}},{key:"hide",value:function(){h.ZP.removeClass(this.root,"show")}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(this.root){var r=e.defaultConfig||{};if(!i.root){var o=i.position?i.position:i.config&&i.config.position?i.config.position:r.position;switch(o){case y.kd.CONTROLS_LEFT:i.root=this.left;break;case y.kd.CONTROLS_RIGHT:i.root=this.right;break;case y.kd.CONTROLS_CENTER:i.root=this.center;break;case y.kd.CONTROLS:i.root=this.root;break;default:i.root=this.left}return(0,a.U2)((0,a.IP)(s.prototype),"registerPlugin",this).call(this,e,i,n)}}}},{key:"destroy",value:function(){S.device!=="mobile"&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,i=e.mode,n=e.autoHide,r=e.initShow,o=e.disable;if(!o){var c=h.ZP.classNames({"xgplayer-controls":!0},{"flex-controls":i==="flex"},{"bottom-controls":i==="bottom"},(0,a._x)({},E.CONTROLS_AUTOHIDE,n),{"xgplayer-controls-initshow":r||!n});return'<xg-controls class="'.concat(c,`" unselectable="on">
    <xg-inner-controls class="xg-inner-controls xg-pos">
      <xg-left-grid class="xg-left-grid">
      </xg-left-grid>
      <xg-center-grid class="xg-center-grid"></xg-center-grid>
      <xg-right-grid class="xg-right-grid">
      </xg-right-grid>
    </xg-inner-controls>
    </xg-controls>`)}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),s}(y.ZP),J=H(42684),xe={LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}},ne={lang:{},langKeys:[],textKeys:[]};function he(d,l){return Object.keys(l).forEach(function(s){var t=h.ZP.typeOf(l[s]),e=h.ZP.typeOf(d[s]);if(t==="Array"){var i;e!=="Array"&&(d[s]=[]),(i=d[s]).push.apply(i,(0,a.u)(l[s]))}else t==="Object"?(e!=="Object"&&(d[s]={}),he(d[s],l[s])):d[s]=l[s]}),d}function q(){Object.keys(ne.lang.en).map(function(d){ne.textKeys[d]=d})}function oe(d,l){var s=[];if(l||(l=ne),!!l.lang){h.ZP.typeOf(d)!=="Array"?s=Object.keys(d).map(function(i){var n=i==="zh"?"zh-cn":i;return{LANG:n,TEXT:d[i]}}):s=d;var t=l,e=t.lang;s.map(function(i){i.LANG==="zh"&&(i.LANG="zh-cn"),e[i.LANG]?he(e[i.LANG]||{},i.TEXT||{}):ue(i,l)}),q()}}function ue(d,l){var s=d.LANG;if(l||(l=ne),!!l.lang){var t=d.TEXT||{};s==="zh"&&(s="zh-cn"),l.lang[s]?he(l.lang[s],t):(l.langKeys.push(s),l.lang[s]=t),q()}}function ve(d){var l,s={lang:{},langKeys:[],textKeys:{},pId:d};return he(s.lang,ne.lang),(l=s.langKeys).push.apply(l,(0,a.u)(ne.langKeys)),he(s.textKeys,ne.textKeys),s}ue(xe);var le={get textKeys(){return ne.textKeys},get langKeys(){return ne.langKeys},get lang(){var d={};return ne.langKeys.map(function(l){d[l]=ne.lang[l]}),ne.lang["zh-cn"]&&(d.zh=ne.lang["zh-cn"]||{}),d},extend:oe,use:ue,init:ve},K={INITIAL:1,READY:2,ATTACHING:3,ATTACHED:4,NOTALLOW:5,RUNNING:6,ENDED:7,DESTROYED:8},Ne=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"],Ge=["play","pause","replay","retry"],Me=0,Fe=0,Ae=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(t){var e;(0,a.PA)(this,s);var i=h.ZP.deepMerge(ee(),t);e=l.call(this,i),(0,a._x)((0,a.Lc)(e),"canPlayFunc",function(){if(e.config){var D=e.config,M=D.autoplay,Z=D.startTime,G=D.defaultPlaybackRate;J.Z.logInfo("player","canPlayFunc, startTime",Z),Z&&(e.currentTime=Z>e.duration?e.duration:Z,e.config.startTime=0),e.playbackRate=G,(M||e._useAutoplay)&&e.mediaPlay(),e.off(u.CANPLAY,e.canPlayFunc),e.removeClass(E.ENTER)}}),(0,a._x)((0,a.Lc)(e),"onFullscreenChange",function(D,M){var Z=function(){h.ZP.setTimeout((0,a.Lc)(e),function(){e.resize()},100)},G=h.ZP.getFullScreenEl();e._fullActionFrom?e._fullActionFrom="":e.emit(u.USER_ACTION,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:e.currentTime,duration:e.duration,props:[{prop:"fullscreen",from:!0,to:!1}]});var Y=(0,h.F7)(G,e.playerId,P);if(M||G&&(G===e._fullscreenEl||Y))Z(),!e.config.closeFocusVideoFocus&&e.media.focus(),e.fullscreen=!0,e.changeFullStyle(e.root,G,E.FULLSCREEN),e.emit(u.FULLSCREEN_CHANGE,!0,e._fullScreenOffset),e.cssfullscreen&&e.exitCssFullscreen();else if(e.fullscreen){Z();var z=(0,a.Lc)(e),ae=z._fullScreenOffset,ie=z.config;ie.needFullscreenScroll?(window.scrollTo(ae.left,ae.top),h.ZP.setTimeout((0,a.Lc)(e),function(){e.fullscreen=!1,e._fullScreenOffset=null},100)):(!e.config.closeFocusVideoFocus&&e.media.focus(),e.fullscreen=!1,e._fullScreenOffset=null),e.cssfullscreen?e.removeClass(E.FULLSCREEN):e.recoverFullStyle(e.root,e._fullscreenEl,E.FULLSCREEN),e._fullscreenEl=null,e.emit(u.FULLSCREEN_CHANGE,!1)}}),(0,a._x)((0,a.Lc)(e),"_onWebkitbeginfullscreen",function(D){e._fullscreenEl=e.media,e.onFullscreenChange(D,!0)}),(0,a._x)((0,a.Lc)(e),"_onWebkitendfullscreen",function(D){e.onFullscreenChange(D,!1)}),(0,$.ZP)((0,a.Lc)(e),Ge),e.config=i,e._pluginInfoId=h.ZP.generateSessionId(),(0,J.w)((0,a.Lc)(e));var n=e.constructor.defaultPreset;if(e.config.presets.length){var r=e.config.presets.indexOf("default");r>=0&&n&&(e.config.presets[r]=n)}else n&&e.config.presets.push(n);e.userTimer=null,e.waitTimer=null,e._state=K.INITIAL,e.isError=!1,e._hasStart=!1,e.isSeeking=!1,e.isCanplay=!1,e._useAutoplay=!1,e.rotateDeg=0,e.isActive=!1,e.fullscreen=!1,e.cssfullscreen=!1,e.isRotateFullscreen=!1,e._fullscreenEl=null,e._cssfullscreenEl=null,e.curDefinition=null,e._orgCss="",e._fullScreenOffset=null,e._videoHeight=0,e._videoWidth=0,e.videoPos={pi:1,scale:0,rotate:0,x:0,y:0,h:-1,w:-1,vy:0,vx:0},e._accPlayed={t:0,acc:0,loopAcc:0},e.innerContainer=null,e.controls=null,e.topBar=null,e.root=null,e.__i18n=le.init(e._pluginInfoId),S.os.isAndroid&&S.osVersion>0&&S.osVersion<6&&(e.config.autoplay=!1),e.database=new k,e.isUserActive=!1,e._onceSeekCanplay=null,e._isPauseBeforeSeek=0;var o=e._initDOM();if(!o)return console.error(new Error("can't find the dom which id is ".concat(e.config.id," or this.config.el does not exist"))),(0,a.J2)(e);var c=e.config,g=c.definition,v=g===void 0?{}:g,_=c.url;if(!_&&v.list&&v.list.length>0){var b=v.list.find(function(D){return D.definition&&D.definition===v.defaultDefinition});b||(v.defaultDefinition=v.list[0].definition,b=v.list[0]),e.config.url=b.url,e.curDefinition=b}return e._bindEvents(),e._registerPresets(),e._registerPlugins(),O.onPluginsReady((0,a.Lc)(e)),e.getInitDefinition(),e.setState(K.READY),h.ZP.setTimeout((0,a.Lc)(e),function(){e.emit(u.READY)},0),e.onReady&&e.onReady(),(e.config.videoInit||e.config.autoplay)&&(!e.hasStart||e.state<K.ATTACHED)&&e.start(),e}return(0,a.qH)(s,[{key:"_initDOM",value:function(){var e=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var i=this.config.el;if(i&&i.nodeType===1)this.root=i;else return this.emit(u.ERROR,new f("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1}var n=O.checkPlayerRoot(this.root);n&&(J.Z.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),n.destroy()),this.root.setAttribute(P,this.playerId),O.init(this),this._initBaseDoms();var r=this.constructor.XgVideoProxy;if(r&&this.mediaConfig.mediaType===r.mediaType){var o=this.innerContainer||this.root;this.detachVideoEvents(this.media);var c=new r(o,this.config,this.mediaConfig);this.attachVideoEvents(c),this.media=c}if(this.media.setAttribute(P,this.playerId),this.config.controls){var g=this.config.controls.root||null,v=O.register(this,Ee,{root:g});this.controls=v}var _=this.config.isMobileSimulateMode==="mobile"?"mobile":S.device;if(this.addClass("".concat(E.DEFAULT," ").concat(E.INACTIVE," xgplayer-").concat(_," ").concat(this.config.controls?"":E.NO_CONTROLS)),this.config.autoplay?this.addClass(E.ENTER):this.addClass(E.NO_START),this.config.fluid){var b=this.config,D=b.width,M=b.height;(typeof D!="number"||typeof M!="number")&&(D=600,M=337.5);var Z={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(M*100/D,"%")};Object.keys(Z).forEach(function(G){e.root.style[G]=Z[G]})}else["width","height"].forEach(function(G){e.config[G]&&(typeof e.config[G]!="number"?e.root.style[G]=e.config[G]:e.root.style[G]="".concat(e.config[G],"px"))});return!0}},{key:"_initBaseDoms",value:function(){this.topBar=null,this.leftBar=null,this.rightBar=null,this.config.marginControls&&(this.innerContainer=h.ZP.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer))}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach(function(i){e.on(i,e["on"+i.charAt(0).toUpperCase()+i.slice(1)])}),N.forEach(function(i){document&&document.addEventListener(i,e.onFullscreenChange)}),S.os.isIos&&(this.media.addEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.addEventListener("webkitendfullscreen",this._onWebkitendfullscreen)),this.once(u.LOADED_DATA,this.resize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.media.focus()},this.once(u.PLAY,this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),N.forEach(function(i){document.removeEventListener(i,e.onFullscreenChange)}),this.playFunc&&this.off(u.PLAY,this.playFunc),this.off(u.CANPLAY,this.canPlayFunc),this.media.removeEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.removeEventListener("webkitendfullscreen",this._onWebkitendfullscreen)}},{key:"_startInit",value:function(e){var i=this;if(this.media&&!((!e||e===""||h.ZP.typeOf(e)==="Array"&&e.length===0)&&(e="",this.emit(u.URL_NULL),J.Z.logWarn("config.url is null, please get url and run player._startInit(url)"),this.config.nullUrlStart))){this._detachSourceEvents(this.media),h.ZP.typeOf(e)==="Array"&&e.length>0?this._attachSourceEvents(this.media,e):!this.media.src||this.media.src!==e?this.media.src=e:e||this.media.removeAttribute("src"),h.ZP.typeOf(this.config.volume)==="Number"&&(this.volume=this.config.volume);var n=this.innerContainer?this.innerContainer:this.root;this.media instanceof window.Element&&!n.contains(this.media)&&n.insertBefore(this.media,n.firstChild);var r=this.media.readyState;J.Z.logInfo("_startInit readyState",r),this.config.autoplay&&(!(/^blob/.test(this.media.currentSrc)||/^blob/.test(this.media.src))&&this.load(),(S.os.isIpad||S.os.isPhone)&&this.mediaPlay()),r>=2?this.canPlayFunc():this.once(u.CANPLAY,this.canPlayFunc),(!this.hasStart||this.state<K.ATTACHED)&&O.afterInit(this),this.hasStart=!0,this.setState(K.ATTACHED),h.ZP.setTimeout(this,function(){i.emit(u.COMPLETE)},0)}}},{key:"_registerPlugins",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._loadingPlugins=[];var n=this.config.ignores||[],r=this.config.plugins||[],o=this.config.i18n||[];i&&le.extend(o,this.__i18n);var c=n.join("||").toLowerCase().split("||"),g=this.plugins;r.forEach(function(v){try{var _=v.plugin?v.plugin.pluginName:v.pluginName;if(_&&c.indexOf(_.toLowerCase())>-1)return null;if(!i&&g[_.toLowerCase()])return;if(v.lazy&&v.loader){var b=O.lazyRegister(e,v);v.forceBeforeInit&&(b.then(function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(b),1)}).catch(function(D){J.Z.logError("_registerPlugins:loadingPlugin",D),e._loadingPlugins.splice(e._loadingPlugins.indexOf(b),1)}),e._loadingPlugins.push(b));return}return e.registerPlugin(v)}catch(D){J.Z.logError("_registerPlugins:",D)}})}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach(function(i){te(e,i)})}},{key:"_getRootByPosition",value:function(e){var i=null;switch(e){case y.kd.ROOT_RIGHT:this.rightBar||(this.rightBar=h.ZP.createPositionBar("xg-right-bar",this.root)),i=this.rightBar;break;case y.kd.ROOT_LEFT:this.leftBar||(this.leftBar=h.ZP.createPositionBar("xg-left-bar",this.root)),i=this.leftBar;break;case y.kd.ROOT_TOP:this.topBar||(this.topBar=h.ZP.createPositionBar("xg-top-bar",this.root),this.config.topBarAutoHide&&h.ZP.addClass(this.topBar,E.TOP_BAR_AUTOHIDE)),i=this.topBar;break;default:i=this.innerContainer||this.root;break}return i}},{key:"registerPlugin",value:function(e,i){var n=O.formatPluginInfo(e,i),r=n.PLUFGIN,o=n.options,c=this.config.plugins,g=O.checkPluginIfExits(r.pluginName,c);!g&&c.push(r);var v=O.getRootByConfig(r.pluginName,this.config);v.root&&(o.root=v.root),v.position&&(o.position=v.position);var _=o.position?o.position:o.config&&o.config.position||r.defaultConfig&&r.defaultConfig.position;return!o.root&&typeof _=="string"&&_.indexOf("controls")>-1?this.controls&&this.controls.registerPlugin(r,o,r.pluginName):(o.root||(o.root=this._getRootByPosition(_)),O.register(this,r,o))}},{key:"deregister",value:function(e){typeof e=="string"?O.unRegister(this,e):e instanceof F.ZP&&O.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.deregister(e),i&&this.removePluginFromConfig(e)}},{key:"removePluginFromConfig",value:function(e){var i;if(typeof e=="string"?i=e:e instanceof F.ZP&&(i=e.pluginName),!!i)for(var n=this.config.plugins.length-1;n>-1;n--){var r=this.config.plugins[n];if(r.pluginName.toLowerCase()===i.toLowerCase()){this.config.plugins.splice(n,1);break}}}},{key:"plugins",get:function(){return O.getPlugins(this)}},{key:"getPlugin",value:function(e){var i=O.findPlugin(this,e);return i&&i.pluginName?i:null}},{key:"addClass",value:function(e){this.root&&(h.ZP.hasClass(this.root,e)||h.ZP.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&h.ZP.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return h.ZP.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,i){this.root&&this.root.setAttribute(e,i)}},{key:"removeAttribute",value:function(e,i){this.root&&this.root.removeAttribute(e,i)}},{key:"start",value:function(e){var i=this;if(!(this.state>K.ATTACHING))return!e&&!this.config.url&&this.getInitDefinition(),this.hasStart=!0,this.setState(K.ATTACHING),this._registerPlugins(!1),O.beforeInit(this).then(function(){if(i.config){e||(e=i.url||i.config.url);var n=i._startInit(e);return n}}).catch(function(n){throw n.fileName="player",n.lineNumber="236",J.Z.logError("start:beforeInit:",n),n})}},{key:"switchURL",value:function(e,i){var n=this,r=e;h.ZP.typeOf(e)==="Object"&&(r=e.url);var o=this.currentTime,c=this.paused&&!this.isError;return this.src=r,new Promise(function(g,v){var _=function(M){n.off("timeupdate",b),n.off("canplay",b),v(M)},b=function(){n.currentTime=o,c&&n.pause(),n.off("error",_),g(!0)};if(n.once("error",_),!r){n.errorHandler("error",{code:6,message:"empty_src"});return}S.os.isAndroid?n.once("timeupdate",b):n.once("canplay",b),n.play()})}},{key:"videoPlay",value:function(){this.mediaPlay()}},{key:"mediaPlay",value:function(){var e=this;if(!this.hasStart&&this.state<K.ATTACHED){this.removeClass(E.NO_START),this.addClass(E.ENTER),this.start(),this._useAutoplay=!0;return}this.state<K.RUNNING&&(this.removeClass(E.NO_START),!this.isCanplay&&this.addClass(E.ENTER));var i=(0,a.U2)((0,a.IP)(s.prototype),"play",this).call(this);return i!==void 0&&i&&i.then?i.then(function(){e.removeClass(E.NOT_ALLOW_AUTOPLAY),e.addClass(E.PLAYING),e.state<K.RUNNING&&(J.Z.logInfo(">>>>playPromise.then"),e.setState(K.RUNNING),e.emit(u.AUTOPLAY_STARTED))}).catch(function(n){if(J.Z.logWarn(">>>>playPromise.catch",n.name),e.media&&e.media.error){e.onError(),e.removeClass(E.ENTER);return}n.name==="NotAllowedError"&&(e._errorTimer=h.ZP.setTimeout(e,function(){e._errorTimer=null,e.emit(u.AUTOPLAY_PREVENTED),e.addClass(E.NOT_ALLOW_AUTOPLAY),e.removeClass(E.ENTER),e.pause(),e.setState(K.NOTALLOW)},0))}):(J.Z.logWarn("video.play not return promise"),this.state<K.RUNNING&&(this.setState(K.RUNNING),this.removeClass(E.NOT_ALLOW_AUTOPLAY),this.removeClass(E.NO_START),this.removeClass(E.ENTER),this.addClass(E.PLAYING),this.emit(u.AUTOPLAY_STARTED))),i}},{key:"mediaPause",value:function(){(0,a.U2)((0,a.IP)(s.prototype),"pause",this).call(this)}},{key:"videoPause",value:function(){(0,a.U2)((0,a.IP)(s.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;return this.removeClass(E.PAUSED),(0,$.rl)(this,"play",function(){return e.mediaPlay()})}},{key:"pause",value:function(){var e=this;(0,$.rl)(this,"pause",function(){(0,a.U2)((0,a.IP)(s.prototype),"pause",e).call(e)})}},{key:"seek",value:function(e,i){var n=this;if(!(!this.media||Number.isNaN(Number(e))||!this.hasStart)){var r=this.config,o=r.isSeekedPlay,c=r.seekedStatus,g=i||(o?"play":c);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,!this._isPauseBeforeSeek&&(this._isPauseBeforeSeek=this.paused?2:1),this._onceSeekCanplay&&this.off(u.SEEKED,this._onceSeekCanplay),this._onceSeekCanplay=function(){switch(n.removeClass(E.ENTER),n.isSeeking=!1,g){case"play":n.play();break;case"pause":n.pause();break;default:n._isPauseBeforeSeek>1||n.paused?n.pause():n.play()}n._isPauseBeforeSeek=0,n._onceSeekCanplay=null},this.once(u.SEEKED,this._onceSeekCanplay),this.state<K.RUNNING?(this.removeClass(E.NO_START),this.currentTime=e,this.play()):this.currentTime=e}}},{key:"getInitDefinition",value:function(){var e=this,i=this.config,n=i.definition,r=i.url;!r&&n&&n.list&&n.list.length>0&&n.defaultDefinition&&n.list.map(function(o){o.definition===n.defaultDefinition&&(e.config.url=o.url,e.curDefinition=o)})}},{key:"changeDefinition",value:function(e,i){var n=this,r=this.config.definition;if(Array.isArray(r==null?void 0:r.list)&&r.list.forEach(function(c){(e==null?void 0:e.definition)===c.definition&&(n.curDefinition=c)}),e!=null&&e.bitrate&&typeof e.bitrate!="number"&&(e.bitrate=parseInt(e.bitrate,10)||0),this.emit(u.DEFINITION_CHANGE,{from:i,to:e}),!this.hasStart){this.config.url=e.url;return}var o=this.switchURL(e.url,(0,a.Zj)({seamless:r.seamless!==!1&&typeof MediaSource!="undefined"&&typeof MediaSource.isTypeSupported=="function"},e));o&&o.then?o.then(function(){n.emit(u.AFTER_DEFINITION_CHANGE,{from:i,to:e})}):this.emit(u.AFTER_DEFINITION_CHANGE,{from:i,to:e})}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once(u.LOADED_DATA,this.reloadFunc)}},{key:"resetState",value:function(){var e=this,i=E.NOT_ALLOW_AUTOPLAY,n=E.PLAYING,r=E.NO_START,o=E.PAUSED,c=E.REPLAY,g=E.ENTER,v=E.ENDED,_=E.ERROR,b=E.LOADING,D=[i,n,r,o,c,g,v,_,b];this.hasStart=!1,this.isError=!1,this._useAutoplay=!1,this.mediaPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,D.forEach(function(M){e.removeClass(M)}),this.addClass(E.ENTER),this.emit(u.RESET)}},{key:"reset",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;this.resetState();var r=this.plugins;if(r&&(i.map(function(c){e.deregister(c)}),n)){var o=ee();Object.keys(this.config).keys(function(c){e.config[c]!=="undefined"&&(c==="plugins"||c==="presets"||c==="el"||c==="id")&&(e.config[c]=o[c])})}}},{key:"destroy",value:function(){var e=this,i=this.innerContainer,n=this.root,r=this.media;if(!(!n||!r)){if(this.hasStart=!1,this._useAutoplay=!1,n.removeAttribute(P),this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.media),h.ZP.clearAllTimers(this),this.emit(u.DESTROY),O.destroy(this),(0,$.Qs)(this),(0,a.U2)((0,a.IP)(s.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root&&this.exitFullscreen(),i)for(var o=i.children,c=0;c<o.length;c++)i.removeChild(o[c]);!i&&r instanceof window.Node&&n.contains(r)&&n.removeChild(r),["topBar","leftBar","rightBar","innerContainer"].map(function(v){e[v]&&n.removeChild(e[v]),e[v]=null});var g=n.className.split(" ");g.length>0?n.className=g.filter(function(v){return v.indexOf("xgplayer")<0}).join(" "):n.className="",this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach(function(v){e[v]=!1})}}},{key:"replay",value:function(){var e=this;this.removeClass(E.ENDED),this.currentTime=0,this.isSeeking=!1,(0,$.rl)(this,"replay",function(){e.once(u.SEEKED,function(){var i=e.mediaPlay();i&&i.catch&&i.catch(function(n){console.log(n)})}),e.play(),e.emit(u.REPLAY),e.onPlay()})}},{key:"retry",value:function(){var e=this;this.removeClass(E.ERROR),this.addClass(E.LOADING),(0,$.rl)(this,"retry",function(){var i=e.currentTime;e.src=e.config.url,!e.config.isLive&&(e.currentTime=i),e.once(u.CANPLAY,function(){e.mediaPlay()})})}},{key:"changeFullStyle",value:function(e,i,n,r){e&&(r||(r=E.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=h.ZP.filterStyleFromText(e)),h.ZP.addClass(e,n),i&&i!==e&&!this._orgPCss&&(this._orgPCss=h.ZP.filterStyleFromText(i),h.ZP.addClass(i,r),i.setAttribute(P,this.playerId)))}},{key:"recoverFullStyle",value:function(e,i,n,r){r||(r=E.PARENT_FULLSCREEN),this._orgCss&&(h.ZP.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),h.ZP.removeClass(e,n),i&&i!==e&&this._orgPCss&&(h.ZP.setStyleFromCsstext(i,this._orgPCss),this._orgPCss="",h.ZP.removeClass(i,r),i.removeAttribute(P))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget,i=this.root,n=this.media;e||(e=i),this._fullScreenOffset={top:h.ZP.scrollTop(),left:h.ZP.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get";var r=h.ZP.getFullScreenEl();if(r===this._fullscreenEl){this.onFullscreenChange();return}try{for(var o=0;o<R.length;o++){var c=R[o];if(e[c]){var g=c==="webkitRequestFullscreen"?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[c]();return g&&g.then?g:Promise.resolve()}}return n.fullscreenEnabled||n.webkitSupportsFullscreen?(n.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch(v){return Promise.reject(new Error("call getFullscreen fail"))}}},{key:"exitFullscreen",value:function(e){if(this.isRotateFullscreen&&this.exitRotateFullscreen(),!(!this._fullscreenEl&&!h.ZP.getFullScreenEl())){this.root;var i=this.media;this._fullActionFrom="exit";try{for(var n=0;n<I.length;n++){var r=I[n];if(document[r]){var o=document[r]();return o&&o.then?o:Promise.resolve()}}return i&&i.webkitSupportsFullscreen?(i.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}catch(c){return Promise.reject(new Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget;this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen();var i=e?"".concat(E.INNER_FULLSCREEN," ").concat(E.CSS_FULLSCREEN):E.CSS_FULLSCREEN;this.changeFullStyle(this.root,e,i);var n=this.config.fullscreen,r=n===void 0?{}:n,o=r.useCssFullscreen===!0||typeof r.useCssFullscreen=="function"&&r.useCssFullscreen();o&&(this.fullscreen=!0,this.emit(u.FULLSCREEN_CHANGE,!0)),this._cssfullscreenEl=e,this.cssfullscreen=!0,this.emit(u.CSS_FULLSCREEN_CHANGE,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?"".concat(E.INNER_FULLSCREEN," ").concat(E.CSS_FULLSCREEN):E.CSS_FULLSCREEN;if(!this.fullscreen)this.recoverFullStyle(this.root,this._cssfullscreenEl,e);else{var i=this.config.fullscreen,n=i===void 0?{}:i,r=n.useCssFullscreen===!0||typeof n.useCssFullscreen=="function"&&n.useCssFullscreen();r?(this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this.fullscreen=!1,this.emit(u.FULLSCREEN_CHANGE,!1)):this.removeClass(e)}this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(u.CSS_FULLSCREEN_CHANGE,!1)}},{key:"getRotateFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget;this.cssfullscreen&&this.exitCssFullscreen(e);var i=e?"".concat(E.INNER_FULLSCREEN," ").concat(E.ROTATE_FULLSCREEN):E.ROTATE_FULLSCREEN;this._fullscreenEl=e||this.root,this.changeFullStyle(this.root,e,i,E.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this._rootStyle=this.root.getAttribute("style"),this.root.style.width="".concat(window.innerHeight,"px"),this.emit(u.FULLSCREEN_CHANGE,!0)}},{key:"exitRotateFullscreen",value:function(e){var i=this._fullscreenEl!==this.root?"".concat(E.INNER_FULLSCREEN," ").concat(E.ROTATE_FULLSCREEN):E.ROTATE_FULLSCREEN;this.recoverFullStyle(this.root,this._fullscreenEl,i,E.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(u.FULLSCREEN_CHANGE,!1),this._rootStyle&&(this.root.style.style=this._rootStyle,this._rootStyle=!1)}},{key:"setRotateDeg",value:function(e){window.orientation===90||window.orientation===-90?this.rotateDeg=0:this.rotateDeg=e}},{key:"focus",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{autoHide:!this.config.closeDelayBlur,delay:this.config.inactive};if(this.isActive){this.onFocus(e);return}this.emit(u.PLAYER_FOCUS,(0,a.Zj)({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{ignorePaused:!1};if(!this.isActive){this.onBlur(e);return}this.emit(u.PLAYER_BLUR,(0,a.Zj)({paused:this.paused,ended:this.ended},e))}},{key:"onFocus",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=i.autoHide,r=n===void 0?!this.config.closePlayerBlur:n,o=i.delay,c=o===void 0?this.config.inactive:o;if(this.isActive=!0,this.removeClass(E.INACTIVE),this.userTimer&&(h.ZP.clearTimeout(this,this.userTimer),this.userTimer=null),!r){this.userTimer&&(h.ZP.clearTimeout(this,this.userTimer),this.userTimer=null);return}this.userTimer=h.ZP.setTimeout(this,function(){e.userTimer=null,e.blur()},c)}},{key:"onBlur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=e.ignorePaused,n=i===void 0?!1:i;if(this.isActive){var r=this.config.closePauseVideoFocus;this.isActive=!1,(n||r||!this.paused&&!this.ended)&&this.addClass(E.INACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.removeClass(E.ENTER),this.removeClass(E.ERROR),this.removeClass(E.LOADING),this.isCanplay=!0,this.waitTimer&&h.ZP.clearTimeout(this,this.waitTimer)}},{key:"onLoadeddata",value:function(){this.isError=!1,this.isSeeking=!1}},{key:"onLoadstart",value:function(){this.removeClass(E.ERROR),this.isCanplay=!1}},{key:"onPlay",value:function(){this.state===K.ENDED&&this.setState(K.RUNNING),this.removeClass(E.PAUSED),this.ended&&this.removeClass(E.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(E.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this.userTimer&&(h.ZP.clearTimeout(this,this.userTimer),this.userTimer=null),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(E.ENDED),this.setState(K.ENDED)}},{key:"onError",value:function(){this.isError=!0,this.updateAcc("error"),this.removeClass(E.NOT_ALLOW_AUTOPLAY),this.removeClass(E.NO_START),this.removeClass(E.ENTER),this.removeClass(E.LOADING),this.addClass(E.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(E.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&h.ZP.clearTimeout(this,this.waitTimer),this.removeClass(E.LOADING),this.removeClass(E.SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&h.ZP.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=h.ZP.setTimeout(this,function(){e.addClass(E.LOADING),h.ZP.clearTimeout(e,e.waitTimer),e.waitTimer=null},this.config.minWaitDelay)}},{key:"onPlaying",value:function(){var e=this;this.isError=!1;var i=E.NO_START,n=E.PAUSED,r=E.ENDED,o=E.ERROR,c=E.REPLAY,g=E.LOADING,v=[i,n,r,o,c,g];v.forEach(function(_){e.removeClass(_)})}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.resize(),(this.waitTimer||this.hasClass(E.LOADING))&&this.media.readyState>2&&(this.removeClass(E.LOADING),h.ZP.clearTimeout(this,this.waitTimer),this.waitTimer=null),!this.paused&&this.state<K.RUNNING&&this.duration&&(this.setState(K.RUNNING),this.emit(u.AUTOPLAY_STARTED)),!this._accPlayed.t&&!this.paused&&!this.ended&&(this._accPlayed.t=new Date().getTime())}},{key:"onVolumechange",value:function(){h.ZP.typeOf(this.config.volume)==="Number"&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,i,n){if(!(!this.media||!i||!e)){var r=h.ZP.typeOf(e)==="String"?e:e.type||"";n.props&&h.ZP.typeOf(n.props)!=="Array"&&(n.props=[n.props]),this.emit(u.USER_ACTION,(0,a.Zj)({eventType:r,action:i,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},n))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var i=new Date().getTime()-this._accPlayed.t;this._accPlayed.acc+=i,this._accPlayed.t=0,(e==="ended"||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var i=this.media.buffered;if(!i||i.length===0||!this.duration)return!0;for(var n=e||this.media.currentTime||.2,r=i.length,o=0;o<r;o++)if(i.start(o)<=n&&i.end(o)>n)return!0;return!1}},{key:"resizePosition",value:function(){var e=this.videoPos,i=e.rotate,n=e.vy,r=e.vx,o=e.h,c=e.w,g=this.videoPos._pi;if(g||(g=this.media.videoWidth/this.media.videoHeight*100),!!g){this.videoPos.pi=g;var v={rotate:i},_=0,b=0,D=1,M=Math.abs(i/90),Z=this.root,G=this.innerContainer,Y=Z.offsetWidth,z=G?G.offsetHeight:Z.offsetHeight,ae=z,ie=Y;if(M%2===0)D=o>0?100/o:c>0?100/c:1,v.scale=D,_=n>0?(100-o)/2-n:0,v.y=M===2?0-_:_,b=r>0?(100-c)/2-r:0,v.x=M===2?0-b:b,this.media.style.width="".concat(ie,"px"),this.media.style.height="".concat(ae,"px");else if(M%2===1){ie=z,ae=Y;var ce=z-Y;b=-ce/2/ie*100,v.x=M===3?b+n/2:b-n/2,_=ce/2/ae*100,v.y=M===3?_+r/2:_-r/2,v.scale=D,this.media.style.width="".concat(ie,"px"),this.media.style.height="".concat(ae,"px")}var Ce=h.ZP.getTransformStyle(v);this.media.style.transform=Ce,this.media.style.webkitTransform=Ce}}},{key:"position",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{h:0,y:0,x:0,w:0};if(!(!this.media||!e||!e.h)){var i=this.videoPos;i.h=e.h*100||0,i.w=e.w*100||0,i.vx=e.x*100||0,i.vy=e.y*100||0,this.resizePosition()}}},{key:"setConfig",value:function(e){var i=this;e&&Object.keys(e).map(function(n){if(n!=="plugins"){i.config[n]=e[n];var r=i.plugins[n.toLowerCase()];r&&h.ZP.typeOf(r.setConfig)==="Function"&&r.setConfig(e[n])}})}},{key:"playNext",value:function(e){var i=this;this.resetState(),this.setConfig(e),this._currentTime=0,this._duration=0,(0,$.rl)(this,"playnext",function(){i.start(),i.emit(u.PLAYNEXT,e)})}},{key:"resize",value:function(){var e=this;if(this.media){var i=this.media,n=i.videoWidth,r=i.videoHeight,o=this.config,c=o.fitVideoSize,g=o.videoFillMode;if((g==="fill"||g==="cover")&&this.setAttribute("data-xgfill",g),!(!r||!n)){this._videoHeight=r,this._videoWidth=n;var v=this.root.getBoundingClientRect(),_=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,b=v.width,D=v.height-_,M=parseInt(n/r*1e3,10),Z=parseInt(b/D*1e3,10),G=b,Y=D,z={};c==="auto"&&Z>M||c==="fixWidth"?(Y=b/M*1e3,this.config.fluid?z.paddingTop="".concat(Y*100/G,"%"):z.height="".concat(Y+_,"px")):(c==="auto"&&Z<M||c==="fixHeight")&&(G=M*D/1e3,z.width="".concat(G,"px")),!this.fullscreen&&!this.cssfullscreen&&Object.keys(z).forEach(function(ie){e.root.style[ie]=z[ie]}),(g==="fillHeight"&&Z<M||g==="fillWidth"&&Z>M)&&this.setAttribute("data-xgfill","cover");var ae={videoScale:M,vWidth:G,vHeight:Y,cWidth:G,cHeight:Y+_};this.resizePosition(),this.emit(u.VIDEO_RESIZE,ae)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this.media.updateObjectPosition){this.media.updateObjectPosition(e,i);return}this.media.style.objectPosition="".concat(e*100,"% ").concat(i*100,"%")}},{key:"setState",value:function(e){J.Z.logInfo("setState","state from:".concat(Ne[this.state]," to:").concat(Ne[e])),this._state=e}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){typeof e=="boolean"&&(this._hasStart=e,e===!1&&this.setState(K.READY),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return this._state===K.RUNNING||this._state===K.ENDED},set:function(e){e?this.setState(K.RUNNING):this._state>=K.RUNNING&&this.setState(K.ATTACHED)}},{key:"definitionList",get:function(){return!this.config||!this.config.definition?[]:this.config.definition.list||[]},set:function(e){var i=this,n=this.config.definition,r=null,o=null;n.list=e,this.emit("resourceReady",e),e.forEach(function(c){var g;((g=i.curDefinition)===null||g===void 0?void 0:g.definition)===c.definition&&(r=c),n.defaultDefinition===c.definition&&(o=c)}),!o&&e.length>0&&(o=e[0]),r?this.changeDefinition(r):o&&this.changeDefinition(o)}},{key:"videoFrameInfo",get:function(){var e={total:0,dropped:0,corrupted:0,droppedRate:0,droppedDuration:0};if(!this.media||!this.media.getVideoPlaybackQuality)return e;var i=this.media.getVideoPlaybackQuality();return e.dropped=i.droppedVideoFrames||0,e.total=i.totalVideoFrames||0,e.corrupted=i.corruptedVideoFrames||0,e.total>0&&(e.droppedRate=e.dropped/e.total*100,e.droppedDuration=parseInt(this.cumulateTime/e.total*e.dropped,0)),e}},{key:"lang",get:function(){return this.config.lang},set:function(e){var i=le.langKeys.filter(function(n){return n===e});if(i.length===0&&e!=="zh"){console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(le.langKeys.join(),"] "));return}this.config.lang=e,O.setLang(e,this)}},{key:"i18n",get:function(){var e=this.config.lang;return e==="zh"&&(e="zh-cn"),this.__i18n.lang[e]||this.__i18n.lang.en}},{key:"i18nKeys",get:function(){return this.__i18n.textKeys||{}}},{key:"version",get:function(){return L}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){return(0,a.U2)((0,a.IP)(s.prototype),"readyState",this)}},{key:"error",get:function(){var e=(0,a.U2)((0,a.IP)(s.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){return(0,a.U2)((0,a.IP)(s.prototype),"networkState",this)}},{key:"fullscreenChanging",get:function(){return this._fullScreenOffset!==null}},{key:"cumulateTime",get:function(){var e=this._accPlayed;return this.updateAcc("get"),e.acc}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"videoRotateDeg",get:function(){return this.videoPos.rotate},set:function(e){e=h.ZP.convertDeg(e),!(e%90!==0||e===this.videoPos.rotate)&&(this.videoPos.rotate=e,this.resizePosition())}},{key:"avgSpeed",get:function(){return Fe},set:function(e){Fe=e}},{key:"realTimeSpeed",get:function(){return Me},set:function(e){Me=e}},{key:"hook",value:function(e,i){return $.z3.call.apply($.z3,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,i){return $.xn.call.apply($.xn,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,i){return $.v8.call.apply($.v8,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,i,n){for(var r=arguments.length,o=new Array(r>3?r-3:0),c=3;c<r;c++)o[c-3]=arguments[c];return $.bR.call.apply($.bR,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removePluginHooks",value:function(e,i,n){for(var r=arguments.length,o=new Array(r>3?r-3:0),c=3;c<r;c++)o[c-3]=arguments[c];return $.g2.call.apply($.g2,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,i){typeof i=="boolean"&&i!==this.muted&&(this.addInnerOP("volumechange"),this.muted=i),O.setCurrentUserActive(this.playerId,e)}}],[{key:"debugger",get:function(){return J.Z.config.debug},set:function(e){J.Z.config.debug=e}},{key:"getCurrentUserActivePlayerId",value:function(){return O.getCurrentUseActiveId()}},{key:"setCurrentUserActive",value:function(e,i){O.setCurrentUserActive(e,i)}},{key:"isHevcSupported",value:function(){return S.isHevcSupported()}},{key:"probeConfigSupported",value:function(e){return S.probeConfigSupported(e)}},{key:"install",value:function(e,i){s.plugins||(s.plugins={}),s.plugins[e]||(s.plugins[e]=i)}},{key:"use",value:function(e,i){s.plugins||(s.plugins={}),s.plugins[e]=i}}]),s}(x);(0,a._x)(Ae,"defaultPreset",null),(0,a._x)(Ae,"XgVideoProxy",null);function re(){return new Date().getTime()}var de={LOAD_START:"loadstart",LOADED_DATA:"loadeddata",FIRST_FRAME:"firstFrame",WAIT_START:"waitingStart",WAIT_END:"waitingEnd",SEEK_START:"seekStart",SEEK_END:"seekEnd"},Ve=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){var t;(0,a.PA)(this,s);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=l.call.apply(l,[this].concat(i)),(0,a._x)((0,a.Lc)(t),"_onTimeupdate",function(){t._state.isTimeUpdate=!0,t._state.autoplayStart&&(J.Z.logInfo("[xgLogger]".concat(t.player.playerId," _onTimeupdate")),t._sendFF("onTimeupdate"))}),(0,a._x)((0,a.Lc)(t),"_onAutoplayStart",function(){J.Z.logInfo("[xgLogger]".concat(t.player.playerId," _onAutoplayStart")),t._state.autoplayStart=!0,t.vt&&t._sendFF("onAutoplayStart")}),(0,a._x)((0,a.Lc)(t),"_onReset",function(){t._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1,isFFSend:!1,isLs:!1},t.vt=0,t.pt=0,t.fvt=0,t.newPointTime=re(),t.loadedCostTime=0,t.startCostTime=0,t._isSeeking=!1,t.seekingStart=0,t.waitingStart=0,t.fixedWaitingStart=0,t._isWaiting=!1,t._waitTimer&&h.ZP.clearTimeout((0,a.Lc)(t),t._waitTimer),t._waittTimer&&h.ZP.clearTimeout((0,a.Lc)(t),t._waittTimer),t._waitTimer=null,t._waittTimer=null,t._waitType=0}),(0,a._x)((0,a.Lc)(t),"_onSeeking",function(){t.seekingStart||(t.suspendWaitingStatus("seek"),t.seekingStart=re(),t.emitLog(de.SEEK_START,{start:re()}))}),(0,a._x)((0,a.Lc)(t),"_onSeeked",function(){t.suspendSeekingStatus("seeked")}),(0,a._x)((0,a.Lc)(t),"_onWaitingLoadStart",function(){t._isWaiting||t.vt||(t._isWaiting=!0,t.waitingStart=re(),t.fixedWaitingStart=re(),t._waitType=1,t.emitLog(de.WAIT_START,{fixedStart:t.fixedWaitingStart,start:t.waitingStart,type:1,endType:"loadstart"}))}),(0,a._x)((0,a.Lc)(t),"_onWaiting",function(){t._isWaiting||!t.vt||(t._isWaiting=!0,t.vt?t.seekingStart?t._waitType=2:t._waitType=0:t._waitType=1,t.fixedWaitingStart=re(),t._waitTimer=h.ZP.setTimeout((0,a.Lc)(t),function(){t._isWaiting&&(t.waitingStart=re(),h.ZP.clearTimeout((0,a.Lc)(t),t._waitTimer),t._waitTimer=null,t._startWaitTimeout(),t.emitLog(de.WAIT_START,{fixedStart:t.fixedWaitingStart,start:t.waitingStart,type:t._waitType,endType:t._waitType===2?"seek":"playing"}))},200))}),(0,a._x)((0,a.Lc)(t),"_onError",function(){t.suspendSeekingStatus("error"),t.suspendWaitingStatus("error")}),(0,a._x)((0,a.Lc)(t),"_onPlaying",function(){t._isWaiting&&t.suspendWaitingStatus("playing")}),t}return(0,a.qH)(s,[{key:"afterCreate",value:function(){var e=this;this._onReset(),this._waitType="firstFrame",this._initOnceEvents(),this.newPointTime=re(),this.loadedCostTime=0,this.startCostTime=0,this.on(u.LOAD_START,function(){var i=e._state,n=i.autoplayStart,r=i.isFFSend;e.startCostTime=re()-e.newPointTime,J.Z.logInfo("[xgLogger]".concat(e.player.playerId," LOAD_START"),"autoplayStart:".concat(n," isFFSend:").concat(r," startCostTime:").concat(e.startCostTime," newPointTime").concat(e.newPointTime)),!r&&(!i.isLs&&e.emitLog(de.LOAD_START,{}),i.isLs=!0,i.isTimeUpdate=!1,i.isFFLoading=!0,e.pt=re(),e.vt=0,e.fvt=0,e._initOnceEvents(),e._onWaitingLoadStart())}),this.on(u.LOADED_DATA,function(){e.vt=re(),e.fvt=e.vt-e.pt,e.loadedCostTime=e.vt-e.newPointTime;var i=e._state,n=i.isTimeUpdate,r=i.isFFSend,o=i.autoplayStart;J.Z.logInfo("[xgLogger]".concat(e.player.playerId," LOADED_DATA"),"fvt:".concat(e.fvt," isTimeUpdate:").concat(e._state.isTimeUpdate," loadedCostTime:").concat(e.loadedCostTime)),(n||o)&&e._sendFF("loadedData"),r||e.emitLog(de.LOADED_DATA,{}),e.suspendWaitingStatus("loadeddata")}),this.on(u.SEEKING,this._onSeeking),this.on(u.SEEKED,this._onSeeked),this.on(u.DESTROY,function(){e.endState("destroy")}),this.on(u.URL_CHANGE,function(){e.endState("urlChange"),J.Z.logInfo("[xgLogger]".concat(e.player.playerId," URL_CHANGE")),e._state.isFFSend&&e._onReset()}),this.on([u.PLAYING,u.CANPLAY],this._onPlaying),this.on(u.WAITING,this._onWaiting),this.on(u.ERROR,this._onError),this.on(u.RESET,function(){J.Z.logInfo("[xgLogger]".concat(e.player.playerId," RESET")),e.endState("reset"),e._initOnceEvents(),e._onReset()})}},{key:"_initOnceEvents",value:function(){this.off(u.AUTOPLAY_STARTED,this._onAutoplayStart),this.off(u.TIME_UPDATE,this._onTimeupdate),this.once(u.AUTOPLAY_STARTED,this._onAutoplayStart),this.once(u.TIME_UPDATE,this._onTimeupdate)}},{key:"_sendFF",value:function(e){this.s=re();var i=this._state,n=i.isFFLoading,r=i.isFFSend;J.Z.logInfo("[xgLogger]".concat(this.player.playerId," _sendFF"),"".concat(e," fvt:").concat(this.fvt," isFFLoading:").concat(n," !isFFSend:").concat(!r)),this.vt>0&&n&&!r&&(J.Z.logInfo("[xgLogger]".concat(this.player.playerId," emitLog_firstFrame"),e),this._state.isFFLoading=!1,this._state.isFFSend=!0,this.emitLog(de.FIRST_FRAME,{fvt:this.fvt,costTime:this.fvt,vt:this.vt,startCostTime:this.startCostTime,loadedCostTime:this.loadedCostTime}))}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer&&h.ZP.clearTimeout(this,this._waittTimer),this._waittTimer=h.ZP.setTimeout(this,function(){e.suspendWaitingStatus("timeout"),h.ZP.clearTimeout(e,e._waittTimer),e._waittTimer=null},this.config.waitTimeout)}},{key:"endState",value:function(e){this.suspendWaitingStatus(e),this.suspendSeekingStatus(e)}},{key:"suspendSeekingStatus",value:function(e){if(this.seekingStart){var i=re(),n=i-this.seekingStart;this.seekingStart=0,this.emitLog(de.SEEK_END,{end:i,costTime:n,endType:e})}}},{key:"suspendWaitingStatus",value:function(e){if(this._waitTimer&&(h.ZP.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(h.ZP.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,!!this.waitingStart){var i=re(),n=i-this.waitingStart,r=i-this.fixedWaitingStart,o=this.config.waitTimeout;this._isWaiting=!1,this.waitingStart=0,this.fixedWaitingStart=0,this.emitLog(de.WAIT_END,{fixedCostTime:r>o?o:r,costTime:n>o?o:n,type:e==="loadeddata"?1:this._waitType,endType:this._waitType===2?"seek":e})}}},{key:"emitLog",value:function(e,i){var n=this.player;this.emit(u.XGLOG,(0,a.Zj)({t:re(),host:h.ZP.getHostFromUrl(n.currentSrc),vtype:n.vtype,eventType:e,currentTime:this.player.currentTime,readyState:n.video.readyState,networkState:n.video.networkState},i))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{waitTimeout:1e4}}}]),s}(y.ZP);function je(){return new DOMParser().parseFromString(`<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78">
  <path fill="#fff" transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>
</svg>
`,"image/svg+xml").firstChild}var Ye=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){return(0,a.PA)(this,s),l.apply(this,arguments)}return(0,a.qH)(s,[{key:"registerIcons",value:function(){return{replay:je}}},{key:"afterCreate",value:function(){var e=this;y.ZP.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayClick",function(){e.player.replay()},{pre:function(n){n.preventDefault(),n.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(u.ENDED,function(){if(e.playerConfig.loop||h.ZP.addClass(e.player.root,"replay"),!e.config.disable){e.show();var i=e.root.querySelector("path");if(i){var n=window.getComputedStyle(i).getPropertyValue("transform");if(typeof n=="string"&&n.indexOf("none")>-1)return null;i.setAttribute("transform",n)}}}),this.on(u.PLAY,function(){e.hide()})}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),h.ZP.removeClass(this.player.root,"replay")}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return`<xg-replay class="xgplayer-replay">
      <xg-replay-txt class="xgplayer-replay-txt" lang-key="`.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,`</xg-replay-txt>
    </xg-replay>`)}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),s}(y.ZP),ze=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){return(0,a.PA)(this,s),l.apply(this,arguments)}return(0,a.qH)(s,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){h.ZP.addClass(this.root,"hide")}},{key:"show",value:function(){h.ZP.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){typeof e.player.config.poster=="string"&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on(u.ENDED,function(){e.isEndedShow&&h.ZP.removeClass(e.root,"hide")}),this.config.hideCanplay?(this.once(u.TIME_UPDATE,function(){e.onTimeUpdate()}),this.on(u.URL_CHANGE,function(){h.ZP.removeClass(e.root,"hide"),h.ZP.addClass(e.root,"xg-showplay"),e.once(u.TIME_UPDATE,function(){e.onTimeUpdate()})})):this.on(u.PLAY,function(){h.ZP.addClass(e.root,"hide")})}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?h.ZP.removeClass(this.root,"xg-showplay"):this.once(u.TIME_UPDATE,function(){e.onTimeUpdate()})}},{key:"update",value:function(e){e&&(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"render",value:function(){var e=this.config,i=e.poster,n=e.hideCanplay,r=i?"background-image:url(".concat(i,");"):"";return'<xg-poster class="xgplayer-poster '.concat(n?"xg-showplay":"",'" style="').concat(r,`">
    </xg-poster>`)}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}]),s}(y.ZP);function we(){return new DOMParser().parseFromString(`<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>
</svg>
`,"image/svg+xml").firstChild}function Le(){return new DOMParser().parseFromString(`<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>
</svg>
`,"image/svg+xml").firstChild}var fe={};function mt(d,l){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{start:null,end:null};return fe[d]&&window.clearTimeout(fe[d].id),fe[d]={},s.start&&s.start(),fe[d].id=window.setTimeout(function(){s.end&&s.end(),window.clearTimeout(fe[d].id),delete fe[d]},l),fe[d].id}function it(d){if(d){window.clearTimeout(d);return}Object.keys(fe).map(function(l){window.clearTimeout(fe[l].id),delete fe[l]})}var yt=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(t){var e;return(0,a.PA)(this,s),e=l.call(this,t),(0,a._x)((0,a.Lc)(e),"onPlayerReset",function(){e.autoPlayStart=!1;var i=e.config.mode==="auto"?"auto-hide":"hide";e.setAttr("data-state","play"),h.ZP.removeClass(e.root,i),e.show()}),(0,a._x)((0,a.Lc)(e),"onAutoplayStart",function(){if(!e.autoPlayStart){var i=e.config.mode==="auto"?"auto-hide":"hide";h.ZP.addClass(e.root,i),e.autoPlayStart=!0,e.onPlayPause("play")}}),e.autoPlayStart=!1,e}return(0,a.qH)(s,[{key:"afterCreate",value:function(){var e=this,i=this.player,n=this.playerConfig;this.initIcons(),this.once(u.READY,function(){n&&(n.lang&&n.lang==="en"?h.ZP.addClass(i.root,"lang-is-en"):n.lang==="jp"&&h.ZP.addClass(i.root,"lang-is-jp"))}),this.on(u.AUTOPLAY_STARTED,this.onAutoplayStart),n.autoplay||this.show(),this.on(u.AUTOPLAY_PREVENTED,function(){var r=e.config.mode==="auto"?"auto-hide":"hide";e.setAttr("data-state","play"),h.ZP.removeClass(e.root,r),e.show()}),this.on(u.PLAY,function(){e.onPlayPause("play")}),this.on(u.PAUSE,function(){e.onPlayPause("pause")}),this.on(u.RESET,function(){e.onPlayerReset()}),this.clickHandler=this.hook("startClick",this.switchPausePlay,{pre:function(o){o.cancelable&&o.preventDefault(),o.stopPropagation();var c=e.player.paused;e.emitUserAction(o,"switch_play_pause",{props:"paused",from:c,to:!c})}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"registerIcons",value:function(){return{startPlay:{icon:we,class:"xg-icon-play"},startPause:{icon:Le,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){h.ZP.addClass(this.root,"hide")}},{key:"show",value:function(){h.ZP.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){h.ZP.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){h.ZP.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var i=this;this._animateId=mt("pauseplay",400,{start:function(){h.ZP.addClass(i.root,"interact"),i.show(),i.switchStatus(!0)},end:function(){h.ZP.removeClass(i.root,"interact"),!e&&i.hide(),i._animateId=null}})}},{key:"endAnimate",value:function(){h.ZP.removeClass(this.root,"interact"),it(this._animateId),this._animateId=null}},{key:"switchPausePlay",value:function(e){var i=this.player;if(e.cancelable&&e.preventDefault(),e.stopPropagation(),!(i.state<K.READY)){var n=this.player.paused;!n&&i.state===K.RUNNING?i.pause():i.play()}}},{key:"onPlayPause",value:function(e){var i=this.config,n=this.player;if(!(!n||n.state<K.RUNNING||!this.autoPlayStart)){if(i.mode==="show"){this.switchStatus(),this.show();return}if(i.mode==="auto"){this.switchStatus();return}if(i.isShowPause&&n.paused&&!n.ended||i.isShowEnd&&n.ended){this.switchStatus(),this.show(),this.endAnimate();return}if(i.disableAnimate){this.switchStatus(),this.hide();return}if(e==="play")this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||n.ended)return;this.animate()}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),it(this._animateId)}},{key:"render",value:function(){var e=this.playerConfig.autoplay?this.config.mode==="auto"?"auto-hide":"hide":"";return`
    <xg-start class="xgplayer-start `.concat(e,`">
    <xg-start-inner></xg-start-inner>
    </xg-start>`)}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),s}(y.ZP),_t=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){return(0,a.PA)(this,s),l.apply(this,arguments)}return(0,a.qH)(s,[{key:"render",value:function(){var e=this.config.innerHtml,i=h.ZP.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)i.appendChild(e);else if(e&&typeof e=="string")i.innerHTML=e;else{for(var n="",r=1;r<=12;r++)n+='<div class="xgplayer-enter-bar'.concat(r,'"></div>');i.innerHTML='<div class="xgplayer-enter-spinner">'.concat(n,"</div>")}return i}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),s}(y.ZP);function me(d,l,s){try{return' <div class="xg-tips '.concat(s?"hide":" ",'" lang-key="').concat(d.i18nKeys[l],`">
    `).concat(d.i18n[l],`
    </div>`)}catch(t){return'<div class="xg-tips hide"></div>'}}var nt=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){return(0,a.PA)(this,s),l.apply(this,arguments)}return(0,a.qH)(s,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var e="MINISCREEN";return`
      <xg-icon class="xgplayer-miniicon">
      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="`.concat(this.i18nKeys[e],'">').concat(this.i18n[e],`</span></div>
      </xg-icon>`)}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:y.kd.CONTROLS_RIGHT,index:10}}}]),s}(y.ZP);function rt(d){var l=parseFloat(d),s=d.indexOf("%")===-1&&!Number.isNaN(l);return s&&l}var Ke=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],st=Ke.length;function Ct(){for(var d={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},l=0;l<st;l++){var s=Ke[l];d[s]=0}return d}function Et(d){var l=window.getComputedStyle(d);return l}function at(d){if(typeof d=="string"&&(d=document.querySelector(d)),!(!d||(0,a.Ac)(d)!=="object"||!d.nodeType)){var l=Et(d);if(l.display==="none")return Ct();var s={};s.width=d.offsetWidth,s.height=d.offsetHeight;for(var t=s.isBorderBox=l.boxSizing==="border-box",e=0;e<st;e++){var i=Ke[e],n=l[i],r=parseFloat(n);s[i]=Number.isNaN(r)?0:r}var o=s.paddingLeft+s.paddingRight,c=s.paddingTop+s.paddingBottom,g=s.marginLeft+s.marginRight,v=s.marginTop+s.marginBottom,_=s.borderLeftWidth+s.borderRightWidth,b=s.borderTopWidth+s.borderBottomWidth,D=t,M=rt(l.width);M!==!1&&(s.width=M+(D?0:o+_));var Z=rt(l.height);return Z!==!1&&(s.height=Z+(D?0:c+b)),s.innerWidth=s.width-(o+_),s.innerHeight=s.height-(c+b),s.outerWidth=s.width+g,s.outerHeight=s.height+v,s}}function Xe(d,l){for(var s=0;s<d.length;s++){var t=d[s];if(t.identifier===l)return t}}var $e={START:"dragStart",MOVE:"dragMove",ENDED:"dragEnded"},ot={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},Pt=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(t){var e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,a.PA)(this,s),e=l.call(this),e.isEnabled=!0,e.isDragging=!1,e.isDown=!1,e.position={},e.downPoint={},e.dragPoint={x:0,y:0},e.startPos={x:0,y:0},e._root=t instanceof Element?t:document.querySelector(t),e._handlerDom=i.handle instanceof Element?i.handle:document.querySelector(i.handle),!e._root||!e._handlerDom?(0,a.J2)(e):(e._bindStartEvent(),e)}return(0,a.qH)(s,[{key:"_bindStartEvent",value:function(){var e=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),ot[this._startKey].map(function(i){e["on".concat(i)]=e["on".concat(i)].bind(e)})}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var i=this;if(e){var n=ot[this._startKey];n.map(function(r){window.addEventListener(r,i["on".concat(r)])}),this._boundPointerEvents=n}}},{key:"_unbindPostStartEvents",value:function(){var e=this;this._boundPointerEvents&&(this._boundPointerEvents.map(function(i){window.removeEventListener(i,e["on".concat(i)])}),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame(function(){e.animate()}))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var i=e.changedTouches[0];this.dragStart(e,i),this.touchIdentifier=i.pointerId!==void 0?i.pointerId:i.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var i=Xe(e.changedTouches,this.touchIdentifier);i&&this.dragMove(e,i)}},{key:"ontouchend",value:function(e){var i=Xe(e.changedTouches,this.touchIdentifier);i&&this.dragEnd(e,i),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var i=Xe(e.changedTouches,this.touchIdentifier);i&&this.dragCancel(e,i)}},{key:"dragStart",value:function(e,i){if(!(!this._root||this.isDown||!this.isEnabled)){this.downPoint=i,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var n=at(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-n.height,this.startPos.maxX=window.innerWidth-n.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e)}}},{key:"dragRealStart",value:function(e,i){this.isDragging=!0,this.animate(),this.emit($e.START,this.startPos)}},{key:"dragEnd",value:function(e,i){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit($e.ENDED)),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,i){var n={x:i.pageX-this.downPoint.pageX,y:i.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(n)&&this.dragRealStart(e,i),n}},{key:"dragMove",value:function(e,i){if(e=e||window.event,!!this.isDown){var n=this.startPos,r=n.x,o=n.y,c=this._dragPointerMove(e,i),g=c.x,v=c.y;g=this.checkContain("x",g,r),v=this.checkContain("y",v,o),this.position.x=r+g,this.position.y=o+v,this.dragPoint.x=g,this.dragPoint.y=v,this.emit($e.MOVE,this.position)}}},{key:"dragCancel",value:function(e,i){this.dragEnd(e,i)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3}},{key:"checkContain",value:function(e,i,n){return i+n<0?0-n:e==="x"&&i+n>this.startPos.maxX?this.startPos.maxX-n:e==="y"&&i+n>this.startPos.maxY?this.startPos.maxY-n:i}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),i=this._getPositionCoord(e.left,"width"),n=this._getPositionCoord(e.top,"height");this.position.x=Number.isNaN(i)?0:i,this.position.y=Number.isNaN(n)?0:n,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var i=e.transform;if(i.indexOf("matrix")===0){var n=i.split(","),r=i.indexOf("matrix3d")===0?12:4,o=parseInt(n[r],10),c=parseInt(n[r+1],10);this.position.x+=o,this.position.y+=c}}},{key:"_getPositionCoord",value:function(e,i){if(e.indexOf("%")!==-1){var n=at(this._root.parentNode);return n?parseFloat(e)/100*n[i]:0}return parseInt(e,10)}}]),s}(X()),Tt=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(t){var e;(0,a.PA)(this,s),e=l.call(this,t),(0,a._x)((0,a.Lc)(e),"onCancelClick",function(r){e.exitMini(),e.isClose=!0}),(0,a._x)((0,a.Lc)(e),"onCenterClick",function(r){var o=(0,a.Lc)(e),c=o.player;c.paused?c.play():c.pause()}),(0,a._x)((0,a.Lc)(e),"onScroll",function(r){if(!(!window.scrollY&&window.scrollY!==0||Math.abs(window.scrollY-e.pos.scrollY)<50)){var o=parseInt(h.ZP.getCss(e.player.root,"height"));o+=e.config.scrollTop,e.pos.scrollY=window.scrollY,window.scrollY>o+5?!e.isMini&&!e.isClose&&e.getMini():window.scrollY<=o&&(e.isMini&&e.exitMini(),e.isClose=!1)}}),e.isMini=!1,e.isClose=!1;var i=(0,a.Lc)(e),n=i.config;return e.pos={left:n.left<0?window.innerWidth-n.width-20:n.left,top:n.top<0?window.innerHeight-n.height-20:n.top,height:e.config.height,width:e.config.width,scrollY:window.scrollY||0},e.lastStyle=null,e}return(0,a.qH)(s,[{key:"beforeCreate",value:function(e){typeof e.player.config.mini=="boolean"&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(u.PAUSE,function(){e.setAttr("data-state","pause")}),this.on(u.PLAY,function(){e.setAttr("data-state","play")})}},{key:"onPluginsReady",value:function(){var e=this,i=this.player,n=this.config;if(!n.disable){if(this.config.isShowIcon){var r={config:{onClick:function(){e.getMini()}}};i.controls.registerPlugin(nt,r,nt.pluginName)}var o=h.ZP.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",o,this.onCancelClick),this.bind(".play-icon",o,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new Pt(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:we,class:"xg-icon-play"},pause:{icon:Le,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var i=this.player,n=this.playerConfig,r=this.config.target||this.player.root;this.lastStyle={},h.ZP.addClass(i.root,"xgplayer-mini"),["width","height","top","left"].map(function(o){e.lastStyle[o]=r.style[o],r.style[o]="".concat(e.pos[o],"px")}),n.fluid&&(r.style["padding-top"]=""),this.emit(u.MINI_STATE_CHANGE,!0),i.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var i=this.player,n=this.playerConfig,r=this.config.target||this.player.root;h.ZP.removeClass(i.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map(function(o){r.style[o]=e.lastStyle[o]}),this.lastStyle=null,n.fluid&&(i.root.style.width="100%",i.root.style.height="0",i.root.style["padding-top"]="".concat(n.height*100/n.width,"%")),this.emit(u.MINI_STATE_CHANGE,!1),this.isMini=i.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=h.ZP.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return`
      <xg-mini-layer class="xg-mini-layer">
      <xg-mini-header class="xgplayer-mini-header">
      `.concat(me(this,"MINI_DRAG",this.playerConfig.isHideTips),`
      </xg-mini-header>
      <div class="mini-cancel-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>
        </svg>
      </div>
      <div class="play-icon">
      </div>
      </xg-mini-layer>`)}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),s}(y.ZP),Si=H(24490),He={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},qe=["videoClick","videoDbClick"],Je=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){var t;(0,a.PA)(this,s);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=l.call.apply(l,[this].concat(i)),(0,a._x)((0,a.Lc)(t),"onMouseMove",function(r){var o=(0,a.Lc)(t),c=o.player,g=o.playerConfig;c.isActive||(c.focus({autoHide:!g.closeDelayBlur}),!g.closeFocusVideoFocus&&c.media.focus())}),(0,a._x)((0,a.Lc)(t),"onMouseEnter",function(r){var o=(0,a.Lc)(t),c=o.playerConfig,g=o.player;!c.closeFocusVideoFocus&&g.media.focus(),c.closeDelayBlur?g.focus({autoHide:!1}):g.focus()}),(0,a._x)((0,a.Lc)(t),"onMouseLeave",function(r){var o=t.playerConfig,c=o.closePlayerBlur,g=o.leavePlayerTime,v=o.closeDelayBlur;!c&&!v&&(g?t.player.focus({autoHide:!0,delay:g}):t.player.blur())}),(0,a._x)((0,a.Lc)(t),"onVideoClick",function(r){var o=(0,a.Lc)(t),c=o.player,g=o.playerConfig;r.target&&g.closeVideoClick||(r.target===c.root||r.target===c.media||r.target===c.innerContainer||r.target===c.media.__canvas)&&(r.preventDefault(),g.closeVideoStopPropagation||r.stopPropagation(),t._clickCount++,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),t.clickTimer=setTimeout(function(){t._clickCount&&(t._clickCount--,(0,$.rl)((0,a.Lc)(t),qe[0],function(v,_){t.switchPlayPause(_.e)},{e:r,paused:c.paused}),clearTimeout(t.clickTimer),t.clickTimer=null)},300))}),(0,a._x)((0,a.Lc)(t),"onVideoDblClick",function(r){var o=(0,a.Lc)(t),c=o.player,g=o.playerConfig;if(!(g.closeVideoDblclick||!r.target||r.target!==c.media&&r.target!==c.media.__canvas)){if(!g.closeVideoClick&&t._clickCount<2){t._clickCount=0;return}t._clickCount=0,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),r.preventDefault(),r.stopPropagation(),(0,$.rl)((0,a.Lc)(t),qe[1],function(v,_){t.emitUserAction(_.e,"switch_fullscreen",{props:"fullscreen",from:c.fullscreen,to:!c.fullscreen}),c.fullscreen?c.exitFullscreen():c.getFullscreen()},{e:r,fullscreen:c.fullscreen})}}),t}return(0,a.qH)(s,[{key:"afterCreate",value:function(){var e=this;this._clickCount=0,qe.map(function(n){e.__hooks[n]=null});var i=this.playerConfig.isMobileSimulateMode;i==="mobile"||S.device==="mobile"&&!S.os.isIpad||this.initEvents()}},{key:"initEvents",value:function(){var e=this,i=this.player,n=i.video,r=i.root,o=this.playerConfig.enableContextmenu;r&&r.addEventListener("click",this.onVideoClick,!1),r&&r.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(He).map(function(c){r.addEventListener(c,e[He[c]],!1)}),o&&n&&n.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var i=this.player;this.emitUserAction(e,"switch_play_pause",{props:"paused",from:i.paused,to:!i.paused}),i.ended?i.duration!==1/0&&i.duration>0&&i.replay():i.paused?i.play():i.pause()}},{key:"onContextmenu",value:function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var e=this,i=this.player,n=i.video,r=i.root;this.clickTimer&&clearTimeout(this.clickTimer),r.removeEventListener("click",this.onVideoClick,!1),r.removeEventListener("dblclick",this.onVideoDblClick,!1),n.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(He).map(function(o){r.removeEventListener(o,e[He[o]],!1)})}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{}}}]),s}(F.ZP),ye={PRESS:"press",PRESS_END:"pressend",DOUBlE_CLICK:"doubleclick",CLICK:"click",TOUCH_MOVE:"touchmove",TOUCH_START:"touchstart",TOUCH_END:"touchend"},kt={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},bt={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function ut(d){return d&&d.length>0?d[d.length-1]:null}function St(){return{pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0}}var xt=function(){function d(l){var s=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{eventType:"touch"};(0,a.PA)(this,d),this._pos={moving:!1,start:!1,x:0,y:0},this.config=St(),Object.keys(t).map(function(e){s.config[e]=t[e]}),this.root=l,this.events=t.eventType==="mouse"?bt:kt,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return(0,a.qH)(d,[{key:"_initEvent",value:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(s){var t=this,e=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout(function(){t.trigger(ye.PRESS,s),t._pos.press=!0,t.__clearPress()},e.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(s){var t=this,e=this.config;if(this.dbIntrvalId){this.__clearDb(),this.trigger(ye.DOUBlE_CLICK,s);return}this.dbIntrvalId=setTimeout(function(){t.__clearDb(),!t._pos.start&&!t._pos.press&&!t._pos.moving&&t.trigger(ye.CLICK,s)},e.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(s,t){this.__handlers[s]||(this.__handlers[s]=[]),this.__handlers[s].push(t)}},{key:"off",value:function(s,t){if(this.__handlers[s]){for(var e=this.__handlers[s],i=-1,n=0;n<e.length;n++)if(e[n]===t){i=n;break}i>=0&&this.__handlers[s].splice(i,1)}}},{key:"trigger",value:function(s,t){this.__handlers[s]&&this.__handlers[s].map(function(e){try{e(t)}catch(i){console.error("trigger>>:".concat(s),i)}})}},{key:"onTouchStart",value:function(s){var t=this._pos,e=this.root,i=ut(s.touches);t.x=i?parseInt(i.pageX,10):s.pageX,t.y=i?parseInt(i.pageX,10):s.pageX,t.start=!0,this.__setPress(s),e.addEventListener(this.events.end,this.onTouchEnd),e.addEventListener(this.events.cancel,this.onTouchCancel),e.addEventListener(this.events.move,this.onTouchMove),this.trigger(ye.TOUCH_START,s)}},{key:"onTouchCancel",value:function(s){this.onTouchEnd(s)}},{key:"onTouchEnd",value:function(s){var t=this._pos,e=this.root;this.__clearPress(),e.removeEventListener(this.events.cancel,this.onTouchCancel),e.removeEventListener(this.events.end,this.onTouchEnd),e.removeEventListener(this.events.move,this.onTouchMove),s.moving=t.moving,s.press=t.press,t.press&&this.trigger(ye.PRESS_END,s),this.trigger(ye.TOUCH_END,s),!t.press&&!t.moving&&this.__setDb(s),t.press=!1,t.start=!1,t.moving=!1}},{key:"onTouchMove",value:function(s){var t=this._pos,e=this.config,i=ut(s.touches),n=i?parseInt(i.pageX,10):s.pageX,r=i?parseInt(i.pageY,10):s.pageX,o=n-t.x,c=r-t.y;Math.abs(c)<e.miniStep&&Math.abs(o)<e.miniStep||(this.__clearPress(),t.press&&this.trigger(ye.PRESS_END,s),t.press=!1,t.moving=!0,this.trigger(ye.TOUCH_MOVE,s))}},{key:"destroy",value:function(){var s=this,t={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(t).map(function(e){s.root.removeEventListener("touchend",s[t[e]])})}}]),d}();function At(){return new DOMParser().parseFromString(`<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink">
  <path opacity="0.54"
    d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z"
    fill="white" />
  <path transform="translate(5 0)" d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z" fill="white"/>
</svg>`,"image/svg+xml").firstChild}var Pe={AUTO:"auto",SEEKING:"seeking",PLAYBACK:"playbackrate",LIGHT:""},Qe=["videoClick","videoDbClick"],wt=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(t){var e;return(0,a.PA)(this,s),e=l.call(this,t),(0,a._x)((0,a.Lc)(e),"onTouchStart",function(i){var n=(0,a.Lc)(e),r=n.player,o=n.config,c=n.pos,g=n.playerConfig,v=e.getTouche(i);if(v&&!o.disableGesture&&e.duration>0&&!r.ended){c.isStart=!0,h.ZP.checkIsFunction(g.disableSwipeHandler)&&g.disableSwipeHandler(),e.find(".xg-dur").innerHTML=h.ZP.format(e.duration);var _=e.root.getBoundingClientRect();r.rotateDeg===90?(c.top=_.left,c.left=_.top,c.width=_.height,c.height=_.width):(c.top=_.top,c.left=_.left,c.width=_.width,c.height=_.height);var b=parseInt(v.pageX-c.left,10),D=parseInt(v.pageY-c.top,10);c.x=r.rotateDeg===90?D:b,c.y=r.rotateDeg===90?b:D,c.scopeL=o.scopeL*c.width,c.scopeR=(1-o.scopeR)*c.width,c.scopeM1=c.width*(1-o.scopeM)/2,c.scopeM2=c.width-c.scopeM1}}),(0,a._x)((0,a.Lc)(e),"onTouchMove",function(i){var n=e.getTouche(i),r=(0,a.Lc)(e),o=r.pos,c=r.config,g=r.player;if(!(!n||c.disableGesture||!e.duration||!o.isStart)){var v=c.miniMoveStep,_=c.hideControlsActive,b=parseInt(n.pageX-o.left,10),D=parseInt(n.pageY-o.top,10),M=g.rotateDeg===90?D:b,Z=g.rotateDeg===90?b:D;if(Math.abs(M-o.x)>v||Math.abs(Z-o.y)>v){var G=M-o.x,Y=Z-o.y,z=o.scope;if(z===-1&&(z=e.checkScope(M,Z,G,Y,o),z===0&&(_?g.blur():g.focus({autoHide:!1}),!o.time&&(o.time=parseInt(g.currentTime*1e3,10)+e.timeOffset*1e3)),o.scope=z),z===-1||z>0&&!c.gestureY||z===0&&!c.gestureX)return;i.cancelable&&i.preventDefault(),e.executeMove(G,Y,z,o.width,o.height),o.x=M,o.y=Z}}}),(0,a._x)((0,a.Lc)(e),"onTouchEnd",function(i){var n=(0,a.Lc)(e),r=n.player,o=n.pos,c=n.playerConfig;if(o.isStart){o.scope>-1&&i.cancelable&&i.preventDefault();var g=e.config,v=g.disableGesture,_=g.gestureX;!v&&_?(e.endLastMove(o.scope),setTimeout(function(){r.getPlugin("progress")&&r.getPlugin("progress").resetSeekState()},10)):o.time=0,o.scope=-1,e.resetPos(),h.ZP.checkIsFunction(c.enableSwipeHandler)&&c.enableSwipeHandler(),e.changeAction(Pe.AUTO)}}),(0,a._x)((0,a.Lc)(e),"onRootTouchMove",function(i){e.config.disableGesture||!e.config.gestureX||e.checkIsRootTarget(i)&&(i.stopPropagation(),e.pos.isStart?e.onTouchMove(i):e.onTouchStart(i))}),(0,a._x)((0,a.Lc)(e),"onRootTouchEnd",function(i){e.pos.isStart&&e.checkIsRootTarget(i)&&(i.stopPropagation(),e.onTouchEnd(i))}),e.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},e.timer=null,e}return(0,a.qH)(s,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:At,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var e=this;Qe.map(function(v){e.__hooks[v]=null});var i=this.playerConfig,n=this.config,r=this.player;i.closeVideoDblclick===!0&&(n.closedbClick=!0),this.resetPos(),h.ZP.isUndefined(i.disableGesture)||(n.disableGesture=!!i.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=h.ZP.createDom("xg-mask","",{},"xgmask"),r.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var o=this.domEventType==="mouse"?"mouse":"touch";this.touch=new xt(this.root,{eventType:o,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",function(v){v.preventDefault()}),r.root.addEventListener("touchmove",this.onRootTouchMove,!0),r.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(u.DURATION_CHANGE,function(){var v=e.player,_=e.config;v.duration*1e3<_.moveDuration&&(_.moveDuration=v.duration*1e3)}),this.on([u.CANPLAY,u.ENDED],function(){var v=e.pos,_=v.time,b=v.isStart;!b&&_>0&&(e.pos.time=0)});var c={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(c).map(function(v){e.touch.on(v,function(_){e[c[v]](_)})}),!n.disableActive){var g=r.plugins.progress;g&&(g.addCallBack("dragmove",function(v){e.activeSeekNote(v.currentTime,v.forward)}),g.addCallBack("dragend",function(){e.changeAction(Pe.AUTO)}))}}},{key:"registerThumbnail",value:function(){var e=this.player,i=e.plugins.thumbnail;if(i&&i.usable){this.thumbnail=i.createThumbnail(null,"mobile-thumbnail");var n=this.find(".time-preview");n.insertBefore(this.thumbnail,n.children[0])}}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},i=e.commonStyle,n=i.playedColor,r=i.progressColor;n&&(this.find(".xg-curbar").style.backgroundColor=n,this.find(".xg-cur").style.color=n),r&&(this.find(".xg-bar").style.backgroundColor=r,this.find(".time-preview").style.color=r),this.config.disableTimeProgress&&h.ZP.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var e=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map(function(i){e.pos[i]=0})):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var i=this.player,n=this.root;n.setAttribute("data-xg-action",e);var r=i.plugins.start;r&&r.recover()}},{key:"getTouche",value:function(e){var i=this.player.rotateDeg,n=e.touches&&e.touches.length>0?e.touches[e.touches.length-1]:e;return i===0?{pageX:n.pageX,pageY:n.pageY}:{pageX:n.pageX,pageY:n.pageY}}},{key:"checkScope",value:function(e,i,n,r,o){var c=o.width,g=-1;if(e<0||e>c)return g;var v=Math.abs(r===0?n:n/r);return Math.abs(n)>0&&v>=1.73&&e>o.scopeM1&&e<o.scopeM2?g=0:(Math.abs(n)===0||v<=.57)&&(g=e<o.scopeL?1:e>o.scopeR?2:3),g}},{key:"executeMove",value:function(e,i,n,r,o){switch(n){case 0:this.updateTime(e/r*this.config.scopeM);break;case 1:this.updateBrightness(i/o);break;case 2:S.os.isIos||this.updateVolume(i/o);break}}},{key:"endLastMove",value:function(e){var i=this,n=this.pos,r=this.player,o=this.config,c=(n.time-this.timeOffset)/1e3;switch(e){case 0:r.seek(Number(c).toFixed(1)),o.hideControlsEnd?r.blur():r.focus(),this.timer=setTimeout(function(){i.pos.time=0},500);break}this.changeAction(Pe.AUTO)}},{key:"checkIsRootTarget",value:function(e){var i=this.player.plugins||{};return i.progress&&i.progress.root.contains(e.target)?!1:i.start&&i.start.root.contains(e.target)||i.controls&&i.controls.root.contains(e.target)}},{key:"sendUseAction",value:function(e){var i=this.player.paused;this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:i,to:!i})}},{key:"clickHandler",value:function(e){var i=this.player,n=this.config,r=this.playerConfig;if(i.state<K.RUNNING){r.closeVideoClick||(this.sendUseAction(h.ZP.createEvent("click")),i.play());return}!n.closedbClick||r.closeVideoClick?i.isActive?i.blur():i.focus():r.closeVideoClick||((i.isActive||n.focusVideoClick)&&(this.sendUseAction(h.ZP.createEvent("click")),this.switchPlayPause()),i.focus())}},{key:"dbClickHandler",value:function(e){var i=this.config,n=this.player;!i.closedbClick&&n.state>=K.RUNNING&&(this.sendUseAction(h.ZP.createEvent("dblclick")),this.switchPlayPause())}},{key:"onClick",value:function(e){var i=this,n=this.player;(0,$.rl)(this,Qe[0],function(r,o){i.clickHandler(o.e)},{e,paused:n.paused})}},{key:"onDbClick",value:function(e){var i=this,n=this.player;(0,$.rl)(this,Qe[1],function(r,o){i.dbClickHandler(o.e)},{e,paused:n.paused})}},{key:"onPress",value:function(e){var i=this.pos,n=this.config,r=this.player;n.disablePress||(i.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{prop:"playbackRate",from:r.playbackRate,to:n.pressRate}),r.playbackRate=n.pressRate,this.changeAction(Pe.PLAYBACK))}},{key:"onPressEnd",value:function(e){var i=this.pos,n=this.config,r=this.player;n.disablePress||(this.emitUserAction("pressend","change_rate",{prop:"playbackRate",from:r.playbackRate,to:i.rate}),r.playbackRate=i.rate,i.rate=1,this.changeAction(Pe.AUTO))}},{key:"updateTime",value:function(e){var i=this.player,n=this.config,r=this.player.duration;e=Number(e.toFixed(4));var o=parseInt(e*n.moveDuration,10)+this.timeOffset;o+=this.pos.time,o=o<0?0:o>r*1e3?r*1e3-200:o,i.getPlugin("time")&&i.getPlugin("time").updateTime(o/1e3),i.getPlugin("progress")&&i.getPlugin("progress").updatePercent(o/1e3/this.duration,!0),this.activeSeekNote(o/1e3,e>0),n.isTouchingSeek&&i.seek(Number((o-this.timeOffset)/1e3).toFixed(1)),this.pos.time=o}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var i=this.player,n=this.pos;if(e=parseInt(e*100,10),n.volume+=e,!(Math.abs(n.volume)<10)){var r=parseInt(i.volume*10,10)-parseInt(n.volume/10,10);r=r>10?10:r<1?0:r,i.volume=r/10,n.volume=0}}},{key:"updateBrightness",value:function(e){this.player.rotateDeg&&(e=-e);var i=this.pos,n=this.config,r=this.xgMask,o=i.light+.8*e;o=o>n.maxDarkness?n.maxDarkness:o<0?0:o,r&&(r.style.backgroundColor="rgba(0,0,0,".concat(o,")")),i.light=o}},{key:"activeSeekNote",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this.player,r=this.config,o=!(this.duration!==1/0&&this.duration>0);if(!(!e||typeof e!="number"||o||r.disableActive)){e<0?e=0:e>n.duration&&(e=n.duration-.2),this.changeAction(Pe.SEEKING);var c=n.plugins.start;c&&c.focusHide(),this.find(".xg-dur").innerHTML=h.ZP.format(this.duration),this.find(".xg-cur").innerHTML=h.ZP.format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),i?h.ZP.removeClass(this.find(".xg-seek-show"),"xg-back"):h.ZP.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e)}}},{key:"updateThumbnails",value:function(e){var i=this.player,n=i.plugins.thumbnail;n&&n.usable&&this.thumbnail&&n.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(e.state<K.ATTACHED)return!1;e.ended||(e.paused?e.play():e.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var e=this.config.gradient!=="normal"?"gradient ".concat(this.config.gradient):"gradient";return`
     <xg-trigger class="trigger">
     <div class="`.concat(e,`"></div>
        <div class="time-preview">
            <div class="xg-seek-show `).concat(this.config.disableSeekIcon?" hide-seek-icon":"",`">
              <i class="xg-seek-icon"></i>
              <span class="xg-cur">00:00</span>
              <span>/</span>
              <span class="xg-dur">00:00</span>
            </div>
              <div class="xg-bar xg-timebar">
                <div class="xg-curbar"></div>
              </div>
        </div>
        <div class="xg-playbackrate xg-top-note">
            <span><i>`).concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,`</span>
        </div>
     </xg-trigger>
    `)}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{index:0,disableGesture:!1,gestureX:!0,gestureY:!0,gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:60*6*1e3,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),s}(y.ZP);function lt(d){d.preventDefault(),d.returnValue=!1}function Lt(d){var l=d.tagName;return!!(l==="INPUT"||l==="TEXTAREA"||d.isContentEditable)}var ct=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){var t;(0,a.PA)(this,s);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=l.call.apply(l,[this].concat(i)),(0,a._x)((0,a.Lc)(t),"onBodyKeyDown",function(r){var o=r||window.event;if(!(!t.player||!t.player.isUserActive&&!t.config.isIgnoreUserActive)&&!(t.config.disable||t.config.disableBodyTrigger||!t.checkIsVisible()||o.metaKey||o.altKey||o.ctrlKey)){var c=o.keyCode;return(o.target===document.body||t.config.isGlobalTrigger&&!Lt(o.target))&&t.checkCode(c,!0)&&(lt(o),t.handleKeyCode(c,r)),!1}}),(0,a._x)((0,a.Lc)(t),"onKeydown",function(r){var o=r||window.event;if(!(t.config.disable||t.config.disableRootTrigger||o.metaKey||o.altKey||o.ctrlKey)&&!(!t.player.isUserActive&&!t.config.isIgnoreUserActive)&&!(!t.player.isUserActive&&!t.config.isIgnoreUserActive)){if(o&&(o.keyCode===37||t.checkCode(o.keyCode))&&(o.target===t.player.root||o.target===t.player.video||o.target===t.player.controls.el))lt(o);else return!0;t.handleKeyCode(o.keyCode,r)}}),t}return(0,a.qH)(s,[{key:"mergekeyCodeMap",value:function(){var e=this,i=this.config.keyCodeMap;i&&Object.keys(i).map(function(n){e.keyCodeMap[n]?["keyCode","action","disable","isBodyTarget"].map(function(r){i[n][r]&&(e.keyCodeMap[n][r]=i[n][r])}):e.keyCodeMap[n]=i[n]})}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e=typeof this.config.seekStep=="function"?this.config.seekStep(this.player):this.config.seekStep;!e||typeof e!="number"||(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disable:!1},right:{keyCode:39,action:"seek",disable:!1},esc:{keyCode:27,action:"exitFullscreen",disable:!1}},this.mergekeyCodeMap(),this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),i=e.height,n=e.top,r=e.bottom,o=window.innerHeight;return!(n<0&&n<0-i*.9||r>0&&r-o>i*.9)}},{key:"checkCode",value:function(e,i){var n=this,r=!1;return Object.keys(this.keyCodeMap).map(function(o){n.keyCodeMap[o]&&e===n.keyCodeMap[o].keyCode&&!n.keyCodeMap[o].disable&&(r=!i||i&&!n.keyCodeMap[o].noBodyTarget)}),r}},{key:"downVolume",value:function(e){var i=this.player,n=parseFloat((i.volume-.1).toFixed(1)),r={volume:{from:i.volume,to:n}};this.emitUserAction(e,"change_volume",{props:r}),n>=0?i.volume=n:i.volume=0}},{key:"upVolume",value:function(e){var i=this.player,n=parseFloat((i.volume+.1).toFixed(1)),r={volume:{from:i.volume,to:n}};this.emitUserAction(e,"change_volume",{props:r}),n<=1?i.volume=n:i.volume=1}},{key:"seek",value:function(e){var i=this.player,n=i.currentTime,r=i.duration,o=n;n+this.seekStep<=r?o=n+this.seekStep:o=r;var c={currentTime:{from:n,to:o}};this.emitUserAction(e,"seek",{props:c}),this.player.currentTime=o}},{key:"seekBack",value:function(e){var i=this.player.currentTime,n=0;i-this.seekStep>=0&&(n=i-this.seekStep);var r={currentTime:{from:i,to:n}};this.emitUserAction(e,"seek",{props:r}),this.player.currentTime=n}},{key:"playPause",value:function(e){var i=this.player;i&&(this.emitUserAction(e,"switch_play_pause"),i.paused?i.play():i.pause())}},{key:"exitFullscreen",value:function(e){var i=this.player,n=i.fullscreen,r=i.cssfullscreen;n&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:n,to:!n}),i.exitFullscreen()),r&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:r,to:!r}),i.exitCssFullscreen())}},{key:"handleKeyCode",value:function(e,i){var n=this;Object.keys(this.keyCodeMap).map(function(r){var o=n.keyCodeMap[r],c=o.action,g=o.keyCode,v=o.disable;g===e&&!v&&(typeof c=="function"?c(i,n.player):typeof c=="string"&&typeof n[c]=="function"&&n[c](i,n.player),n.emit(u.SHORTCUT,(0,a.Zj)({key:r,target:i.target},n.keyCodeMap[r])))})}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!0,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!1,keyCodeMap:{},disable:!1,isIgnoreUserActive:!1}}}]),s}(F.ZP);function It(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110">
  <path d="M100,50A50,50,0,1,1,50,0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"></path>
</svg>
`,"image/svg+xml").firstChild}var Dt=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){return(0,a.PA)(this,s),l.apply(this,arguments)}return(0,a.qH)(s,[{key:"registerIcons",value:function(){return{loadingIcon:It}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return`
    <xg-loading class="xgplayer-loading">
      <xg-loading-inner></xg-loading-inner>
    </xg-loading>`}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:y.kd.ROOT}}}]),s}(y.ZP),Rt=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],Ot=function(){function d(l){(0,a.PA)(this,d),this.fragments=l.fragments||[],this.fragments.length===0&&this.fragments.push({percent:1}),this._callBack=l.actionCallback,this.fragConfig={fragFocusClass:l.fragFocusClass||"inner-focus-point",fragAutoFocus:!!l.fragAutoFocus,fragClass:l.fragClass||""},this.style=l.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0,this.focusIndex=-1}return(0,a.qH)(d,[{key:"updateDuration",value:function(s){var t=this;this.duration=s;var e=0,i=this.fragments;this.fragments=i.map(function(n){return n.start=parseInt(e,10),n.end=parseInt(e+n.percent*t.duration,10),n.duration=parseInt(n.percent*t.duration,10),e+=n.percent*t.duration,n})}},{key:"updateProgress",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"played",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},e=this.progressList,i=this.fragments;if(!(e.length<1)){var n=t.newIndex,r=t.curIndex,o=t.millisecond;n!==r&&e.map(function(v,_){_<n?v[s].style.width="100%":_>n&&(v[s].style.width=0)});var c=i[n],g=o===0?0:(o-c.start)/c.duration;e[n][s].style.width=g<0?0:"".concat(g*100,"%")}}},{key:"updateFocus",value:function(s){if(!(!this.fragConfig.fragAutoFocus||this.fragments.length<2)){if(!s){if(this.focusIndex>-1){this.unHightLight(this.focusIndex);var t={index:-1,preIndex:this.focusIndex,fragment:null};this._callBack&&this._callBack(t),this.focusIndex=-1}return}var e=this.findIndex(s.currentTime*1e3,this.focusIndex);if(e>=0&&e!==this.focusIndex){this.focusIndex>-1&&this.unHightLight(this.focusIndex),this.setHightLight(e);var i={index:e,preIndex:this.focusIndex,fragment:this.fragments[this.focusIndex]};this.focusIndex=e,this._callBack&&this._callBack(i)}}}},{key:"update",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(t*1e3,10)!==this.duration){if(!t&&t!==0)return;this.updateDuration(parseInt(t*1e3,10))}var e=this.playedIndex,i=this.cachedIndex;if(h.ZP.typeOf(s.played)!=="Undefined"){var n=this.findIndex(s.played*1e3,e);if(n<0)return;this.updateProgress("played",{newIndex:n,curIndex:e,millisecond:parseInt(s.played*1e3,10)}),this.playedIndex=n}if(h.ZP.typeOf(s.cached)!=="Undefined"){var r=this.findIndex(s.cached*1e3,i);if(r<0)return;this.updateProgress("cached",{newIndex:r,curIndex:i,millisecond:parseInt(s.cached*1e3,10)}),this.cachedIndex=r}}},{key:"findIndex",value:function(s,t){var e=this.fragments;if(!e||e.length===0)return-1;if(e.length===1)return 0;if(t>-1&&t<e.length&&s>e[t].start&&s<e[t].end)return t;if(s>e[e.length-1].start)return e.length-1;for(var i=0;i<e.length;i++)if(s>e[i].start&&s<=e[i].end){t=i;break}return t}},{key:"findHightLight",value:function(){for(var s=this.root.children,t=0;t<s.length;t++)if(h.ZP.hasClass(s[t],this.fragConfig.fragFocusClass))return{dom:s[t],pos:s[t].getBoundingClientRect()}}},{key:"findFragment",value:function(s){var t=this.root.children;return s<0||s>=t.length?null:{dom:t[s],pos:t[s].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var s=this.root.children,t=0;t<s.length;t++)h.ZP.removeClass(s[t],this.fragConfig.fragFocusClass)}},{key:"setHightLight",value:function(s){var t=this.root.children;if(s<t.length)return h.ZP.addClass(t[s],this.fragConfig.fragFocusClass),{dom:t[s],pos:t[s].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"reset",value:function(s){var t=this;if(Object.keys(this.fragConfig).forEach(function(i){s[i]!==void 0&&(t.fragConfig[i]=s[i])}),s.fragments){if(this.fragments=s.fragments.length===0?[{percent:1}]:s.fragments,this.updateDuration(this.duration),this.playedIndex=0,this.cachedIndex=0,this.root)for(var e=this.root.children;e.length>0;)this.root.removeChild(e[0]);this.render()}}},{key:"render",value:function(){var s=this,t=this.style.progressColor;if(this.root||(this.root=h.ZP.createDom("xg-inners","",{},"progress-list")),this.fragments){var e=this.fragConfig,i=e.fragClass,n=e.fragFocusClass;this.progressList=this.fragments.map(function(r){var o=h.ZP.createDom("xg-inner","",{style:t?"background:".concat(t,"; flex: ").concat(r.percent):"flex: ".concat(r.percent)},"".concat(r.isFocus?n:""," xgplayer-progress-inner ").concat(i));return s.root.appendChild(o),Rt.forEach(function(c){o.appendChild(h.ZP.createDom(c.tag,"",{style:c.styleKey?"background: ".concat(s.style[c.styleKey],"; width:0;"):"width:0;"},c.className))}),{cached:o.children[0],played:o.children[1]}})}return this.root}}]),d}(),ht={POINT:"inner-focus-point",HIGHLIGHT:"inner-focus-highlight"},Nt=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(t){var e;return(0,a.PA)(this,s),e=l.call(this,t),(0,a._x)((0,a.Lc)(e),"onMoveOnly",function(i,n){var r=(0,a.Lc)(e),o=r.pos,c=r.config,g=r.player,v=n;if(i){h.ZP.event(i);var _=h.ZP.getEventPos(i,g.zoom),b=g.rotateDeg===90?_.clientY:_.clientX;if(o.moving&&Math.abs(o.x-b)<c.miniMoveStep)return;o.moving=!0,o.x=b,v=e.computeTime(i,b)}e.triggerCallbacks("dragmove",v,i),e._updateInnerFocus(v)}),(0,a._x)((0,a.Lc)(e),"onBodyClick",function(i){e.pos.isLocked&&(e.pos.isLocked=!1,i.preventDefault(),i.stopPropagation())}),(0,a._x)((0,a.Lc)(e),"_mouseDownHandler",function(i,n){e._state.time=n.currentTime,e.updateWidth(n.currentTime,n.percent,0),e._updateInnerFocus(n)}),(0,a._x)((0,a.Lc)(e),"_mouseUpHandler",function(i,n){var r=(0,a.Lc)(e),o=r.pos;o.moving&&e.updateWidth(n.currentTime,n.percent,2)}),(0,a._x)((0,a.Lc)(e),"_mouseMoveHandler",function(i,n){var r=(0,a.Lc)(e),o=r._state,c=r.pos,g=r.config,v=r.player;o.time<n.currentTime?n.forward=!0:n.forward=!1,o.time=n.currentTime,c.isDown&&!c.moving&&(c.moving=!0,g.isPauseMoving&&v.pause(),e.triggerCallbacks("dragstart",n,i),e.emitUserAction("drag","dragstart",n)),e.updateWidth(n.currentTime,n.percent,1),e.triggerCallbacks("dragmove",n,i),e._updateInnerFocus(n)}),(0,a._x)((0,a.Lc)(e),"onMouseDown",function(i){var n=(0,a.Lc)(e),r=n._state,o=n.player,c=n.pos,g=n.config,v=n.playerConfig,_=h.ZP.getEventPos(i,o.zoom),b=o.rotateDeg===90?_.clientY:_.clientX;if(!(o.isMini||g.closeMoveSeek||!v.allowSeekAfterEnded&&o.ended)){if(!o.duration&&!o.isPlaying){o.play();return}i.stopPropagation(),e.focus(),h.ZP.checkIsFunction(v.disableSwipeHandler)&&v.disableSwipeHandler(),h.ZP.checkIsFunction(g.onMoveStart)&&g.onMoveStart(),h.ZP.event(i),c.x=b,c.isDown=!0,c.moving=!1,r.prePlayTime=o.currentTime,o.focus({autoHide:!1}),e.isProgressMoving=!0,h.ZP.addClass(e.progressBtn,"active");var D=e.computeTime(i,b);D.prePlayTime=r.prePlayTime,e._mouseDownHandlerHook(i,D);var M=i.type;return M==="touchstart"?(e.root.addEventListener("touchmove",e.onMouseMove),e.root.addEventListener("touchend",e.onMouseUp)):(e.unbind("mousemove",e.onMoveOnly),document.addEventListener("mousemove",e.onMouseMove,!1),document.addEventListener("mouseup",e.onMouseUp,!1)),!0}}),(0,a._x)((0,a.Lc)(e),"onMouseUp",function(i){var n=(0,a.Lc)(e),r=n.player,o=n.config,c=n.pos,g=n.playerConfig,v=n._state;i.stopPropagation(),i.preventDefault(),h.ZP.checkIsFunction(g.enableSwipeHandler)&&g.enableSwipeHandler(),h.ZP.checkIsFunction(o.onMoveEnd)&&o.onMoveEnd(),h.ZP.event(i),h.ZP.removeClass(e.progressBtn,"active");var _=e.computeTime(i,c.x);_.prePlayTime=v.prePlayTime,c.moving?(e.triggerCallbacks("dragend",_,i),e.emitUserAction("drag","dragend",_)):(e.triggerCallbacks("click",_,i),e.emitUserAction("click","click",_)),e._mouseUpHandlerHook(i,_),c.moving=!1,c.isDown=!1,c.x=0,c.y=0,c.isLocked=!0,v.prePlayTime=0,v.time=0;var b=i.type;b==="touchend"?(e.root.removeEventListener("touchmove",e.onMouseMove),e.root.removeEventListener("touchend",e.onMouseUp),e.blur()):(document.removeEventListener("mousemove",e.onMouseMove,!1),document.removeEventListener("mouseup",e.onMouseUp,!1),c.isEnter?g.isMobileSimulateMode!=="mobile"&&e.bind("mousemove",e.onMoveOnly):e.onMouseLeave(i)),h.ZP.setTimeout((0,a.Lc)(e),function(){e.resetSeekState()},10),r.focus()}),(0,a._x)((0,a.Lc)(e),"onMouseMove",function(i){var n=(0,a.Lc)(e),r=n._state,o=n.pos,c=n.player,g=n.config;h.ZP.checkTouchSupport()&&i.preventDefault(),h.ZP.event(i);var v=h.ZP.getEventPos(i,c.zoom),_=c.rotateDeg===90?v.clientY:v.clientX,b=Math.abs(o.x-_);if(!(o.moving&&b<g.miniMoveStep||!o.moving&&b<g.miniStartStep)){o.x=_;var D=e.computeTime(i,_);D.prePlayTime=r.prePlayTime,e._mouseMoveHandlerHook(i,D)}}),(0,a._x)((0,a.Lc)(e),"onMouseOut",function(i){e.triggerCallbacks("mouseout",null,i)}),(0,a._x)((0,a.Lc)(e),"onMouseOver",function(i){e.triggerCallbacks("mouseover",null,i)}),(0,a._x)((0,a.Lc)(e),"onMouseEnter",function(i){var n=(0,a.Lc)(e),r=n.player,o=n.pos;if(!(o.isDown||o.isEnter||r.isMini||!r.config.allowSeekAfterEnded&&r.ended)){o.isEnter=!0,e.bind("mousemove",e.onMoveOnly),e.bind("mouseleave",e.onMouseLeave),h.ZP.event(i);var c=h.ZP.getEventPos(i,r.zoom),g=r.rotateDeg===90?c.clientY:c.clientX,v=e.computeTime(i,g);e.triggerCallbacks("mouseenter",v,i),e.focus()}}),(0,a._x)((0,a.Lc)(e),"onMouseLeave",function(i){e.triggerCallbacks("mouseleave",null,i),e.unlock(),e._updateInnerFocus(null)}),(0,a._x)((0,a.Lc)(e),"onVideoResize",function(){var i=e.pos,n=i.x,r=i.isDown,o=i.isEnter;if(o&&!r){var c=e.computeTime(null,n);e.onMoveOnly(null,c)}}),e.useable=!1,e.isProgressMoving=!1,e.__dragCallBacks=[],e._state={now:-1,direc:0,time:0,prePlayTime:-1},e._disableBlur=!1,e}return(0,a.qH)(s,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"changeState",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.useable=e}},{key:"show",value:function(){this.root&&(this.root.style.display="flex")}},{key:"_initInner",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!i||i.length===0)&&(i=[{percent:1}]);var r=(0,a.Zj)((0,a.Zj)({fragments:i},n),{},{actionCallback:function(c){e.emitUserAction("fragment_focus","fragment_focus",c)}});this.innerList?this.innerList.reset(r):(this.innerList=new Ot(r),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map(function(o){e[o]=e.innerList[o].bind(e.innerList)}))}},{key:"_updateInnerFocus",value:function(e){this.innerList&&this.innerList.updateFocus(e)}},{key:"afterCreate",value:function(){var e=this;if(!(this.config.disable||this.playerConfig.isLive)){this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1,isLocked:!1},this.outer=this.find("xg-outer");var i=this.config,n=i.fragFocusClass,r=i.fragAutoFocus,o=i.fragClass;this._initInner(this.config.fragments,{fragFocusClass:n,fragAutoFocus:r,fragClass:o,style:this.playerConfig.commonStyle||{}}),S.device==="mobile"&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(u.DURATION_CHANGE,function(){e.onMouseLeave()}),this.on(u.TIME_UPDATE,function(){e.onTimeupdate()}),this.on(u.SEEKED,function(){e.onTimeupdate(),e.onCacheUpdate()}),this.on(u.PROGRESS,function(){e.onCacheUpdate()}),this.on(u.ENDED,function(){e.onCacheUpdate(!0),e.onTimeupdate(!0),e._state.now=0}),this.on(u.EMPTIED,function(){e.onReset()}),this.on(u.VIDEO_RESIZE,function(){e.onVideoResize()}),this.bindDomEvents(),this.initCustomStyle()}}},{key:"setConfig",value:function(e){var i=this,n=null;Object.keys(e).forEach(function(r){i.config[r]=e[r],r==="fragments"&&(n=e[r])}),n&&this._initInner(n,e)}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},i=e.commonStyle,n=i.sliderBtnStyle,r=this.progressBtn;n&&(typeof n=="string"?r.style.boxShadow=n:(0,a.Ac)(n)==="object"&&Object.keys(n).map(function(o){r.style[o]=n[o]}))}},{key:"triggerCallbacks",value:function(e,i,n){this.__dragCallBacks.length>0&&this.__dragCallBacks.map(function(r){if(r&&r.handler&&r.type===e)try{r.handler(i,n)}catch(o){console.error("[XGPLAYER][triggerCallbacks] ".concat(r," error"),o)}})}},{key:"addCallBack",value:function(e,i){i&&typeof i=="function"&&this.__dragCallBacks.push({type:e,handler:i})}},{key:"removeCallBack",value:function(e,i){var n=this.__dragCallBacks,r=-1;n.map(function(o,c){o&&o.type===e&&o.handler===i&&(r=c)}),r>-1&&n.splice(r,1)}},{key:"unlock",value:function(){var e=this.player,i=this.pos;if(i.isEnter=!1,!e.isMini){if(this.unbind("mousemove",this.onMoveOnly),i.isDown){this.unbind("mouseleave",this.onMouseLeave);return}this.blur()}}},{key:"bindDomEvents",value:function(){var e=this.player,i=e.controls,n=e.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),(this.domEventType==="touch"||this.domEventType==="compatible")&&(this.root.addEventListener("touchstart",this.onMouseDown),i&&(i.root&&i.root.addEventListener("touchmove",h.ZP.stopPropagation),i.center&&i.center.addEventListener("touchend",h.ZP.stopPropagation))),(this.domEventType==="mouse"||this.domEventType==="compatible")&&(this.bind("mousedown",this.onMouseDown),n.isMobileSimulateMode!=="mobile"&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut),this.player.root.addEventListener("click",this.onBodyClick,!0))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),h.ZP.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),h.ZP.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(e,i,n){var r=this.config,o=this.player;if(!(r.isCloseClickSeek&&n===0)){var c=e>=o.duration?o.duration-r.endedDiff:Number(e).toFixed(1);this.updatePercent(i),this.updateTime(e),!(n===1&&(!r.isDragingSeek||o.config.mediaType==="audio"))&&(this._state.now=c,this._state.direc=c>o.currentTime?0:1,o.seek(c))}}},{key:"computeTime",value:function(e,i){var n=this.player,r=this.root.getBoundingClientRect(),o=r.width,c=r.height,g=r.top,v=r.left,_,b,D=i;n.rotateDeg===90?(_=c,b=g):(_=o,b=v);var M=D-b;M=M>_?_:M<0?0:M;var Z=M/_;Z=Z<0?0:Z>1?1:Z;var G=parseInt(Z*this.duration*1e3,10)/1e3;return{percent:Z,currentTime:G,offset:M,width:_,left:b,e}}},{key:"updateTime",value:function(e){var i=this.player,n=this.duration;e>n?e=n:e<0&&(e=0);var r=i.plugins.time;r&&r.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,i){if(this.isProgressMoving=!0,!this.config.disable){e=e>1?1:e<0?0:e,this.progressBtn.style.left="".concat(e*100,"%"),this.innerList.update({played:e*this.duration},this.duration);var n=this.player.plugins.miniprogress;n&&n.update({played:e*this.duration},this.duration)}}},{key:"onTimeupdate",value:function(e){var i=this.player,n=this._state,r=this.duration;if(!(i.isSeeking||this.isProgressMoving)){if(n.now>-1){var o=parseInt(n.now*1e3,10)-parseInt(i.currentTime*1e3,10);if(n.direc===0&&o>300||n.direc===1&&o>-300){n.now=-1;return}else n.now=-1}var c=this.timeOffset+i.currentTime;c=h.ZP.adjustTimeByDuration(c,r,e),this.innerList.update({played:c},r),this.progressBtn.style.left="".concat(c/r*100,"%");var g=this.player.plugins.miniprogress;g&&g.update({played:c},r)}}},{key:"onCacheUpdate",value:function(e){var i=this.player,n=this.duration;if(i){var r=i.bufferedPoint.end;r=h.ZP.adjustTimeByDuration(r,n,e),this.innerList.update({cached:r},n);var o=this.player.plugins.miniprogress;o&&o.update({cached:r},n)}}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var e=this.player.plugins.miniprogress;e&&e.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var e=this.player,i=e.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null;var n=this.domEventType;(n==="touch"||n==="compatible")&&(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),i&&(i.root&&i.root.removeEventListener("touchmove",h.ZP.stopPropagation),i.center&&i.center.removeEventListener("touchend",h.ZP.stopPropagation))),(n==="mouse"||n==="compatible")&&(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!0))}},{key:"render",value:function(){if(!(this.config.disable||this.playerConfig.isLive)){var e=this.player.controls?this.player.controls.config.mode:"",i=e==="bottom"?"xgplayer-progress-bottom":"";return`
    <xg-progress class="xgplayer-progress `.concat(i,`">
      <xg-outer class="xgplayer-progress-outer">
        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>
      </xg-outer>
    </xg-progress>
    `)}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:y.kd.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],fragFocusClass:ht.POINT,fragClass:"",fragAutoFocus:!1,miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){},endedDiff:.2}}},{key:"FRAGMENT_FOCUS_CLASS",get:function(){return ht}}]),s}(y.ZP),_e=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){var t;(0,a.PA)(this,s);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=l.call.apply(l,[this].concat(i)),(0,a._x)((0,a.Lc)(t),"_onMouseenter",function(r){t.emit("icon_mouseenter",{pluginName:t.pluginName})}),(0,a._x)((0,a.Lc)(t),"_onMouseLeave",function(r){t.emit("icon_mouseleave",{pluginName:t.pluginName})}),t}return(0,a.qH)(s,[{key:"afterCreate",value:function(){this.bind("mouseenter",this._onMouseenter),this.bind("mouseleave",this._onMouseLeave)}},{key:"destroy",value:function(){this.unbind("mouseenter",this._onMouseenter),this.unbind("mouseleave",this._onMouseLeave)}}]),s}(y.ZP),Mt=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){return(0,a.PA)(this,s),l.apply(this,arguments)}return(0,a.qH)(s,[{key:"afterCreate",value:function(){var e=this;(0,a.U2)((0,a.IP)(s.prototype),"afterCreate",this).call(this);var i=this.player,n=this.config;n.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on([u.PAUSE,u.ERROR,u.EMPTIED],function(){e.animate(i.paused)}),this.on(u.PLAY,function(){e.animate(i.paused)}),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:we,class:"xg-icon-play"},pause:{icon:Le,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var i=this.player;return this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:i.paused,to:!i.paused}),i.ended?i.replay():i.paused?(i.play(),this.animate(!1)):(i.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){if(this.player){var i=this.i18nKeys,n=this.find(".xg-tips");e?(this.setAttr("data-state","pause"),n&&this.changeLangTextKey(n,i.PLAY_TIPS)):(this.setAttr("data-state","play"),n&&this.changeLangTextKey(n,i.PAUSE_TIPS))}}},{key:"destroy",value:function(){(0,a.U2)((0,a.IP)(s.prototype),"destroy",this).call(this),this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-play">
    <div class="xgplayer-icon">
    </div>
    `.concat(me(this,"PLAY_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:y.kd.CONTROLS_LEFT,index:0,disable:!1}}}]),s}(_e);function Ft(){return new DOMParser().parseFromString(`<svg width="32px" height="40px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>
    </g>
</svg>`,"image/svg+xml").firstChild}var Ht=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){return(0,a.PA)(this,s),l.apply(this,arguments)}return(0,a.qH)(s,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.onClick=function(i){i.preventDefault(),i.stopPropagation(),e.config.onClick(i)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:Ft,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){h.ZP.addClass(this.root,"show")}},{key:"hide",value:function(){h.ZP.removeClass(this.root,"show")}},{key:"render",value:function(){return`<xg-icon class="xgplayer-back">
    </xg-icon>`}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:y.kd.ROOT_TOP,index:0}}}]),s}(y.ZP);function Ut(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>
</svg>
`,"image/svg+xml").firstChild}function Zt(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>
</svg>
`,"image/svg+xml").firstChild}var Bt=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){var t;(0,a.PA)(this,s);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=l.call.apply(l,[this].concat(i)),(0,a._x)((0,a.Lc)(t),"_onOrientationChange",function(r){t.player.fullscreen&&t.config.rotateFullscreen&&(window.orientation===90||window.orientation===-90?t.player.setRotateDeg(0):t.player.setRotateDeg(90))}),t}return(0,a.qH)(s,[{key:"afterCreate",value:function(){var e=this;(0,a.U2)((0,a.IP)(s.prototype),"afterCreate",this).call(this);var i=this.config,n=this.playerConfig;if(!i.disable){i.target&&(this.playerConfig.fullscreenTarget=this.config.target);var r=h.ZP.getFullScreenEl();n.fullscreenTarget===r&&this.player.getFullscreen().catch(function(o){}),this.initIcons(),this.handleFullscreen=this.hook("fullscreenChange",this.toggleFullScreen,{pre:function(c){var g=e.player.fullscreen;e.emitUserAction(c,"switch_fullscreen",{prop:"fullscreen",from:g,to:!g})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(u.FULLSCREEN_CHANGE,function(o){var c=e.find(".xg-tips");c&&e.changeLangTextKey(c,o?e.i18nKeys.EXITFULLSCREEN_TIPS:e.i18nKeys.FULLSCREEN_TIPS),e.animate(o)}),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:Ht,options:{config:{onClick:function(c){e.handleFullscreen(c)}}}})),S.device==="mobile"&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:Ut,class:"xg-get-fullscreen"},exitFullscreen:{icon:Zt,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){(0,a.U2)((0,a.IP)(s.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",S.device==="mobile"?"touchend":"click",this.handleFullscreen),S.device==="mobile"&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"toggleFullScreen",value:function(e){e&&(e.preventDefault(),e.stopPropagation());var i=this.player,n=this.config,r=n.useCssFullscreen===!0||typeof n.useCssFullscreen=="function"&&n.useCssFullscreen();r?(i.fullscreen?i.exitCssFullscreen():i.getCssFullscreen(),this.animate(i.fullscreen)):n.rotateFullscreen?(i.fullscreen?i.exitRotateFullscreen():i.getRotateFullscreen(),this.animate(i.fullscreen)):n.switchCallback&&typeof n.switchCallback=="function"?n.switchCallback(i.fullscreen):i.fullscreen?i.exitFullscreen():i.getFullscreen().catch(function(o){})}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"show",value:function(){(0,a.U2)((0,a.IP)(s.prototype),"show",this).call(this)}},{key:"hide",value:function(){(0,a.U2)((0,a.IP)(s.prototype),"hide",this).call(this)}},{key:"render",value:function(){if(!this.config.disable){var e="FULLSCREEN_TIPS";return`<xg-icon class="xgplayer-fullscreen">
    <div class="xgplayer-icon">
    </div>
    `.concat(me(this,e,this.playerConfig.isHideTips),`
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:y.kd.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),s}(_e),Wt=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(t){var e;return(0,a.PA)(this,s),e=l.call(this,t),e.isActiving=!1,e}return(0,a.qH)(s,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"currentTime",get:function(){return this.player.currentTime||0}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this,i=this.player.controls.config.mode;this.mode=i==="flex"?"flex":"normal",!this.config.disable&&(this.mode==="flex"&&(this.createCenterTime(),this.root.style.display="none"),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on(u.DURATION_CHANGE,function(){e.onTimeUpdate()}),this.on(u.TIME_UPDATE,function(){e.onTimeUpdate()}),this.on(u.ENDED,function(){e.onTimeUpdate(!0)}),this.on(u.EMPTIED,function(){e.onReset()}))}},{key:"show",value:function(){if(this.mode==="flex"){this.centerCurDom&&(this.centerCurDom.style.display="block"),this.centerDurDom&&(this.centerDurDom.style.display="block");return}this.root.style.display="block"}},{key:"hide",value:function(){if(this.mode==="flex"){this.centerCurDom&&(this.centerCurDom.style.display="none"),this.centerDurDom&&(this.centerDurDom.style.display="none");return}this.root.style.display="none"}},{key:"onTimeUpdate",value:function(e){var i=this.player,n=this.config,r=this.duration;if(!(n.disable||this.isActiving||!i.hasStart)){var o=i.currentTime+this.timeOffset;o=h.ZP.adjustTimeByDuration(o,r,e),this.mode==="flex"?(this.centerCurDom.innerHTML=h.ZP.format(o),r!==1/0&&r>0&&(this.centerDurDom.innerHTML=h.ZP.format(r))):(this.timeDom.innerHTML=h.ZP.format(o),r!==1/0&&r>0&&(this.durationDom.innerHTML=h.ZP.format(r)))}}},{key:"onReset",value:function(){this.mode==="flex"?(this.centerCurDom.innerHTML=h.ZP.format(0),this.centerDurDom.innerHTML=h.ZP.format(0)):(this.timeDom.innerHTML=h.ZP.format(0),this.durationDom.innerHTML=h.ZP.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;if(!(!e.controls||!e.controls.center)){var i=e.controls.center;this.centerCurDom=h.ZP.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-left"),this.centerDurDom=h.ZP.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-right"),i.children.length>0?i.insertBefore(this.centerCurDom,i.children[0]):i.appendChild(this.centerCurDom),i.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var e=this.config;if(this.duration===1/0||this.playerConfig.isLive?(h.ZP.hide(this.durationDom),h.ZP.hide(this.timeDom),h.ZP.hide(this.find(".time-separator")),h.ZP.show(this.find(".time-live-tag"))):h.ZP.hide(this.find(".time-live-tag")),e.hide){this.hide();return}this.show()}},{key:"changeLiveState",value:function(e){e?(h.ZP.hide(this.durationDom),h.ZP.hide(this.timeDom),h.ZP.hide(this.find(".time-separator")),h.ZP.show(this.find(".time-live-tag"))):(h.ZP.hide(this.find(".time-live-tag")),h.ZP.show(this.find(".time-separator")),h.ZP.show(this.durationDom),h.ZP.show(this.timeDom))}},{key:"updateTime",value:function(e){if(this.isActiving=!0,!(!e&&e!==0||e>this.duration)){if(this.mode==="flex"){this.centerCurDom.innerHTML=h.ZP.format(e);return}this.timeDom.innerHTML=h.ZP.format(e)}}},{key:"resetActive",value:function(){var e=this,i=this.player,n=function(){e.isActiving=!1};this.off(u.SEEKED,n),i.isSeeking?this.once(u.SEEKED,n):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-time">
    <span class="time-current">00:00</span>
    <span class="time-separator">/</span>
    <span class="time-duration">00:00</span>
    <span class="time-live-tag">`.concat(this.i18n.LIVE_TIP,`</span>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:y.kd.CONTROLS_LEFT,index:2,disable:!1}}}]),s}(y.ZP);function Gt(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>
</svg>
`,"image/svg+xml").firstChild}function Vt(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>
</svg>
`,"image/svg+xml").firstChild}function jt(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>
</svg>
`,"image/svg+xml").firstChild}var Yt=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){var t;(0,a.PA)(this,s);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=l.call.apply(l,[this].concat(i)),(0,a._x)((0,a.Lc)(t),"onBarMousedown",function(r){var o=(0,a.Lc)(t),c=o.player,g=t.find(".xgplayer-bar");h.ZP.event(r);var v=g.getBoundingClientRect(),_=h.ZP.getEventPos(r,c.zoom),b=v.height-(_.clientY-v.top);if(_.h=b,_.barH=v.height,t.pos=_,!(b<-2))return t.updateVolumePos(b,r),document.addEventListener("mouseup",t.onBarMouseUp),t._d.isStart=!0,!1}),(0,a._x)((0,a.Lc)(t),"onBarMouseMove",function(r){var o=(0,a.Lc)(t),c=o._d;if(c.isStart){var g=(0,a.Lc)(t),v=g.pos,_=g.player;r.preventDefault(),r.stopPropagation(),h.ZP.event(r);var b=h.ZP.getEventPos(r,_.zoom);c.isMoving=!0;var D=v.h-b.clientY+v.clientY;D>v.barH||t.updateVolumePos(D,r)}}),(0,a._x)((0,a.Lc)(t),"onBarMouseUp",function(r){h.ZP.event(r),document.removeEventListener("mouseup",t.onBarMouseUp);var o=(0,a.Lc)(t),c=o._d;c.isStart=!1,c.isMoving=!1}),(0,a._x)((0,a.Lc)(t),"onMouseenter",function(r){t._d.isActive=!0,t.focus(),t.emit("icon_mouseenter",{pluginName:t.pluginName})}),(0,a._x)((0,a.Lc)(t),"onMouseleave",function(r){t._d.isActive=!1,t.unFocus(100,!1,r),t.emit("icon_mouseleave",{pluginName:t.pluginName})}),(0,a._x)((0,a.Lc)(t),"onVolumeChange",function(r){if(t.player){var o=t.player,c=o.muted,g=o.volume;t._d.isMoving||(t.find(".xgplayer-drag").style.height=c||g===0?"4px":"".concat(g*100,"%"),t.config.showValueLabel&&t.updateVolumeValue()),t.animate(c,g)}}),t}return(0,a.qH)(s,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:Vt,class:"xg-volume-small"},volumeLarge:{icon:Gt,class:"xg-volume"},volumeMuted:{icon:jt,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e=this;if(this._timerId=null,this._d={isStart:!1,isMoving:!1,isActive:!1},!this.config.disable){this.initIcons();var i=this.playerConfig,n=i.commonStyle,r=i.volume;n.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=n.volumeColor),this.changeMutedHandler=this.hook("mutedChange",function(o){e.changeMuted(o)},{pre:function(c){c.preventDefault(),c.stopPropagation()}}),this._onMouseenterHandler=this.hook("mouseenter",this.onMouseenter),this._onMouseleaveHandler=this.hook("mouseleave",this.onMouseleave),S.device!=="mobile"&&this.playerConfig.isMobileSimulateMode!=="mobile"&&(this.bind("mouseenter",this._onMouseenterHandler),this.bind(["blur","mouseleave"],this._onMouseleaveHandler),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(u.VOLUME_CHANGE,this.onVolumeChange),this.once(u.LOADED_DATA,this.onVolumeChange),h.ZP.typeOf(r)!=="Number"&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(e,i){var n=this.player,r=this.find(".xgplayer-drag"),o=this.find(".xgplayer-bar");if(!(!o||!r)){var c=parseInt(e/o.getBoundingClientRect().height*1e3,10);r.style.height="".concat(e,"px");var g=Math.max(Math.min(c/1e3,1),0),v={volume:{from:n.volume,to:g}};n.muted&&(v.muted={from:!0,to:!1}),this.emitUserAction(i,"change_volume",{muted:n.muted,volume:n.volume,props:v}),n.volume=Math.max(Math.min(c/1e3,1),0),n.muted&&(n.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var e=this.player,i=e.volume,n=e.muted,r=this.find(".xgplayer-value-label"),o=Math.max(Math.min(i,1),0);r.innerText=n?0:Math.ceil(o*100)}},{key:"focus",value:function(){var e=this.player;e.focus({autoHide:!1}),this._timerId&&(h.ZP.clearTimeout(this,this._timerId),this._timerId=null),h.ZP.addClass(this.root,"slide-show")}},{key:"unFocus",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=arguments.length>2?arguments[2]:void 0,o=this._d,c=this.player;o.isActive||(this._timerId&&(h.ZP.clearTimeout(this,this._timerId),this._timerId=null),this._timerId=h.ZP.setTimeout(this,function(){o.isActive||(n?c.blur():c.focus(),h.ZP.removeClass(e.root,"slide-show"),o.isStart&&e.onBarMouseUp(r)),e._timerId=null},i))}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var i=this.player,n=this._d;n.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:i.muted,volume:i.volume,props:{muted:{from:i.muted,to:!i.muted}}}),i.volume>0&&(i.muted=!i.muted),i.volume<.01&&(i.volume=this.config.miniVolume)}},{key:"animate",value:function(e,i){e||i===0?this.setAttr("data-state","mute"):i<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this._timerId&&(h.ZP.clearTimeout(this,this._timerId),this._timerId=null),this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon",S.device==="mobile"?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var e=this.config.default||this.player.volume,i=this.config.showValueLabel;return`
    <xg-icon class="xgplayer-volume" data-state="normal">
      <div class="xgplayer-icon">
      </div>
      <xg-slider class="xgplayer-slider">
        `.concat(i?'<div class="xgplayer-value-label">'.concat(e*100,"</div>"):"",`
        <div class="xgplayer-bar">
          <xg-drag class="xgplayer-drag" style="height: `).concat(e*100,`%"></xg-drag>
        </div>
      </xg-slider>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:y.kd.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),s}(y.ZP);function zt(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">
  <g clip-path="url(#clip0)">
    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>
    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>
  </g>
  <defs>
    <clipPath id="clip0">
      <rect width="40" height="40" fill="white"/>
    </clipPath>
  </defs>
</svg>
`,"image/svg+xml").firstChild}var Kt=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(t){var e;return(0,a.PA)(this,s),e=l.call(this,t),e.rotateDeg=e.config.rotateDeg||0,e}return(0,a.qH)(s,[{key:"afterCreate",value:function(){var e=this;if(!this.config.disable){(0,a.U2)((0,a.IP)(s.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(u.VIDEO_RESIZE,function(){e.rotateDeg&&e.config.innerRotate&&h.ZP.setTimeout(e,function(){e.updateRotateDeg(e.rotateDeg,e.config.innerRotate)},100)});var i=this.player.root;this.rootWidth=i.style.width||i.offsetWidth||i.clientWidth,this.rootHeight=i.style.height||i.offsetHeight||i.clientHeight,this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate)}}},{key:"destroy",value:function(){(0,a.U2)((0,a.IP)(s.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,i){if(e||(e=0),i){this.player.videoRotateDeg=e;return}var n=this.player,r=this.rootWidth,o=this.rootHeight,c=n.root,g=n.innerContainer,v=n.media,_=c.offsetWidth,b=g&&i?g.offsetHeight:c.offsetHeight,D=r,M=o,Z=0,G=0;(e===.75||e===.25)&&(D="".concat(b,"px"),M="".concat(_,"px"),Z=-(b-_)/2,G=-(_-b)/2);var Y="translate(".concat(Z,"px,").concat(G,"px) rotate(").concat(e,"turn)"),z={transformOrigin:"center center",transform:Y,webKitTransform:Y,height:M,width:D},ae=i?v:c,ie=i?n.getPlugin("poster"):null;Object.keys(z).map(function(ce){ae.style[ce]=z[ce],ie&&ie.root&&(ie.root.style[ce]=z[ce])})}},{key:"rotate",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=this.player;this.rotateDeg||(this.rotateDeg=0);var o=e?1:-1;this.rotateDeg=(this.rotateDeg+1+o*.25*n)%1,this.updateRotateDeg(this.rotateDeg,i),r.emit(u.ROTATE,this.rotateDeg*360)}},{key:"registerIcons",value:function(){return{rotate:zt}}},{key:"render",value:function(){if(!this.config.disable)return`
    <xg-icon class="xgplayer-rotate">
      <div class="xgplayer-icon">
      </div>
      `.concat(me(this,"ROTATE_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:y.kd.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),s}(_e);function Xt(){return new DOMParser().parseFromString(`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"
    fill="white" />
</svg>`,"image/svg+xml").firstChild}function $t(){return new DOMParser().parseFromString(`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"
    fill="white" />
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M9.4998 7.7C9.77595 7.7 9.9998 7.47614 9.9998 7.2V6.5C9.9998 6.22386 9.77595 6 9.4998 6H5.5402L5.52754 6.00016H5.5C5.22386 6.00016 5 6.22401 5 6.50016V10.4598C5 10.7359 5.22386 10.9598 5.5 10.9598H6.2C6.47614 10.9598 6.7 10.7359 6.7 10.4598V8.83005L8.76983 10.9386C8.96327 11.1357 9.27984 11.1386 9.47691 10.9451L9.97645 10.4548C10.1735 10.2613 10.1764 9.94476 9.983 9.7477L7.97289 7.7H9.4998Z"
    fill="white" />
</svg>`,"image/svg+xml").firstChild}var Te={PIP:"picture-in-picture",INLINE:"inline",FULLSCREEN:"fullscreen"},qt=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){var t;(0,a.PA)(this,s);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=l.call.apply(l,[this].concat(i)),(0,a._x)((0,a.Lc)(t),"switchPIP",function(r){if(!t.isPIPAvailable())return!1;r.stopPropagation&&r.stopPropagation(),t.isPip?(t.exitPIP(),t.emitUserAction(r,"change_pip",{props:"pip",from:!0,to:!1}),t.setAttr("data-state","normal")):t.player.media.readyState===4&&(t.requestPIP(),t.emitUserAction(r,"change_pip",{props:"pip",from:!1,to:!0}),t.setAttr("data-state","pip"))}),t}return(0,a.qH)(s,[{key:"beforeCreate",value:function(e){typeof e.player.config.pip=="boolean"&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.isPIPAvailable()&&((0,a.U2)((0,a.IP)(s.prototype),"afterCreate",this).call(this),this.pMode=Te.INLINE,this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(u.COMPLETE,function(){e.config.showIcon&&(h.ZP.removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))}))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:Xt,class:"xg-get-pip"},pipIconExit:{icon:$t,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var e=this,i=this.player;this.leavePIPCallback=function(){var n=i.paused;h.ZP.setTimeout(e,function(){!n&&i.mediaPlay()},0),!n&&i.mediaPlay(),e.setAttr("data-state","normal"),i.emit(u.PIP_CHANGE,!1)},this.enterPIPCallback=function(n){i.emit(u.PIP_CHANGE,!0),e.pipWindow=n.pictureInPictureWindow,e.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(n){var r=i.media.webkitPresentationMode;e.pMode===Te.FULLSCREEN&&r!==Te.FULLSCREEN&&i.onFullscreenChange(null,!1),e.pMode=r,r===Te.PIP?e.enterPIPCallback(n):r===Te.INLINE&&e.leavePIPCallback(n)},i.media&&(i.media.addEventListener("enterpictureinpicture",this.enterPIPCallback),i.media.addEventListener("leavepictureinpicture",this.leavePIPCallback),s.checkWebkitSetPresentationMode(i.media)&&i.media.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"requestPIP",value:function(){var e=this.player,i=this.playerConfig;if(!(!this.isPIPAvailable()||this.isPip))try{var n=i.poster;return n&&(e.media.poster=h.ZP.typeOf(n)==="String"?n:n.poster),s.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("picture-in-picture"):e.media.requestPictureInPicture(),!0}catch(r){return console.error("requestPiP",r),!1}}},{key:"exitPIP",value:function(){var e=this.player;try{return this.isPIPAvailable()&&this.isPip&&(s.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("inline"):document.exitPictureInPicture()),!0}catch(i){return console.error("exitPIP",i),!1}}},{key:"isPip",get:function(){var e=this.player;return document.pictureInPictureElement&&document.pictureInPictureElement===e.media||e.media.webkitPresentationMode===Te.PIP}},{key:"isPIPAvailable",value:function(){var e=this.player.media,i=h.ZP.typeOf(document.pictureInPictureEnabled)==="Boolean"?document.pictureInPictureEnabled:!0;return i&&(h.ZP.typeOf(e.disablePictureInPicture)==="Boolean"&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&h.ZP.typeOf(e.webkitSetPresentationMode)==="Function")}},{key:"destroy",value:function(){(0,a.U2)((0,a.IP)(s.prototype),"destroy",this).call(this);var e=this.player;e.media.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.media.removeEventListener("leavepictureinpicture",this.leavePIPCallback),s.checkWebkitSetPresentationMode(e.media)&&e.media.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(!(!this.config.showIcon||!this.isPIPAvailable()))return`<xg-icon class="xgplayer-pip">
      <div class="xgplayer-icon xg-icon-disable">
      </div>
      `.concat(me(this,"PIP",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:y.kd.CONTROLS_RIGHT,index:6,showIcon:!1}}},{key:"checkWebkitSetPresentationMode",value:function(e){return typeof e.webkitSetPresentationMode=="function"}}]),s}(_e);function Jt(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40">
  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>
</svg>
`,"image/svg+xml").firstChild}var Qt=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(t){var e;return(0,a.PA)(this,s),e=l.call(this,t),(0,a._x)((0,a.Lc)(e),"playNext",function(i){var n=(0,a.Lc)(e),r=n.player;i.preventDefault(),i.stopPropagation(),e.idx+1<e.config.urlList.length?(e.idx++,e.nextHandler(e.config.urlList[e.idx],e.idx),r.emit(u.PLAYNEXT,e.idx+1)):(e.nextHandler(),r.emit(u.PLAYNEXT))}),e.idx=-1,e}return(0,a.qH)(s,[{key:"afterCreate",value:function(){!this.config.urlList||this.config.urlList.length===0||(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:Jt}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("nextClick",this.changeSrc);var e=S.device==="mobile"?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var i=this.player;e&&(i.pause(),i.currentTime=0,i.switchURL?i.switchURL(e):i.src=e,i.config.url=e,i.play())}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(!(!this.config.urlList||this.config.urlList.length===0))return`
     <xg-icon class="xgplayer-playnext">
      <div class="xgplayer-icon">
      </div>
      `.concat(me(this,"PLAYNEXT_TIPS",this.playerConfig.isHideTips),`
     </xg-icon>
    `)}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:y.kd.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),s}(y.ZP),ei=H(44785),ti=H.n(ei);function ii(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">
  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">
      <g id="Group-2">
        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">
          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>
          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>
          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>
          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>
        </g>
      </g>
    </g>
  </g>
</svg>
`,"image/svg+xml").firstChild}var ni=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(t){var e;return(0,a.PA)(this,s),e=l.call(this,t),(0,a._x)((0,a.Lc)(e),"download",function(i){if(!e.isLock){e.emitUserAction(i,"download");var n=e.playerConfig.url,r="";h.ZP.typeOf(n)==="String"?r=n:h.ZP.typeOf(n)==="Array"&&n.length>0&&(r=n[0].src);var o=e.getAbsoluteURL(r);ti()(o),e.isLock=!0,e.timer=window.setTimeout(function(){e.isLock=!1,window.clearTimeout(e.timer),e.timer=null},300)}}),e.timer=null,e.isLock=!1,e}return(0,a.qH)(s,[{key:"afterCreate",value:function(){(0,a.U2)((0,a.IP)(s.prototype),"afterCreate",this).call(this),!this.config.disable&&(this.appendChild(".xgplayer-icon",this.icons.download),this._handler=this.hook("click",this.download,{pre:function(i){i.preventDefault(),i.stopPropagation()}}),this.bind(["click","touchend"],this._handler))}},{key:"registerIcons",value:function(){return{download:ii}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var i=document.createElement("div");i.innerHTML='<a href="'.concat(e,'">x</a>'),e=i.firstChild.href}return e}},{key:"destroy",value:function(){(0,a.U2)((0,a.IP)(s.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-download">
   <div class="xgplayer-icon">
   </div>
   `.concat(me(this,"DOWNLOAD_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:y.kd.CONTROLS_RIGHT,index:3,disable:!0}}}]),s}(_e),ri=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){return(0,a.PA)(this,s),l.apply(this,arguments)}return(0,a.qH)(s,[{key:"beforeCreate",value:function(e){typeof e.player.config.screenShot=="boolean"&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){(0,a.U2)((0,a.IP)(s.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var e=this.config;this.initSize=function(i){e.fitVideo&&(e.width=i.vWidth,e.height=i.vHeight)},this.once(u.VIDEO_RESIZE,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,i){var n=document.createElement("a");n.href=e,n.download=i;var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)}},{key:"createCanvas",value:function(e,i){var n=document.createElement("canvas"),r=n.getContext("2d");this.canvasCtx=r,this.canvas=n,n.width=e||this.config.width,n.height=i||this.config.height,r.imageSmoothingEnabled=!0,r.imageSmoothingEnabled&&(r.imageSmoothingQuality="high")}},{key:"onClickBtn",value:function(e){var i=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot"),this.shot().then(function(n){i.emit(u.SCREEN_SHOT,n),i.saveScreenShot(n,i.config.name+i.config.format)})}},{key:"shot",value:function(e,i){var n=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{quality:.92,type:"image/png"},o=this.config,c=this.player,g=r.quality||o.quality,v=r.type||o.type;return new Promise(function(_,b){var D=null,M;if(c.media.canvas)D=c.media.canvas;else{n.canvas?(n.canvas.width=e||o.width,n.canvas.height=i||o.height):n.createCanvas(e,i),D=n.canvas,M=n.canvasCtx;var Z=c.media.videoWidth/c.media.videoHeight,G=D.width/D.height,Y=0,z=0,ae=c.media.videoWidth,ie=c.media.videoHeight,ce,Ce,Re,Oe;Z>G?(Re=D.width,Oe=D.width/Z,ce=0,Ce=Math.round((D.height-Oe)/2)):Z===G?(Re=D.width,Oe=D.height,ce=0,Ce=0):Z<G&&(Re=D.height*Z,Oe=D.height,ce=Math.round((D.width-Re)/2),Ce=0),M.drawImage(c.media,Y,z,ae,ie,ce,Ce,Re,Oe)}var tt=D.toDataURL(v,g).replace(v,"image/octet-stream");tt=tt.replace(/^data:image\/[^;]+/,"data:application/octet-stream"),_(tt)})}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){(0,a.U2)((0,a.IP)(s.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.onClickBtn),this.off(u.VIDEO_RESIZE,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",i="SCREENSHOT";return`
      <xg-icon class="xgplayer-shot">
      <div class="`.concat(e,`">
      `).concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[i],'">').concat(this.i18n[i],"</span>"),`
      </div>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:y.kd.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,fitVideo:!0,disable:!1,name:"screenshot"}}}]),s}(_e),si=function(){function d(l){(0,a.PA)(this,d),this.config=l.config,this.parent=l.root,this.root=h.ZP.createDom("ul","",{},"xg-options-list xg-list-slide-scroll ".concat(this.config.className)),l.root.appendChild(this.root);var s=this.config.maxHeight;s&&this.setStyle({maxHeight:s}),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var t=S.device==="mobile"?"touchend":"click";this._delegates=y.ZP.delegate.call(this,this.root,"li",t,this.onItemClick)}return(0,a.qH)(d,[{key:"renderItemList",value:function(s){var t=this,e=this.config,i=this.root;s?e.data=s:s=e.data,e.style&&Object.keys(e.style).map(function(n){i.style[n]=e[n]}),s.length>0&&(this.attrKeys=Object.keys(s[0])),this.root.innerHTML="",s.map(function(n,r){var o=n.selected?"option-item selected":"option-item";n["data-index"]=r,t.root.appendChild(h.ZP.createDom("li","<span>".concat(n.showText,"</span>"),n,o))})}},{key:"onItemClick",value:function(s){s.delegateTarget||(s.delegateTarget=s.target);var t=s.delegateTarget;if(t&&h.ZP.hasClass(t,"selected"))return!1;var e=typeof this.config.onItemClick=="function"?this.config.onItemClick:null,i=this.root.querySelector(".selected");h.ZP.addClass(t,"selected"),i&&h.ZP.removeClass(i,"selected"),e(s,{from:i?this.getAttrObj(i,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(s,t){if(!s||!t)return{};var e={};t.map(function(n){e[n]=s.getAttribute(n)});var i=s.getAttribute("data-index");return i&&(e.index=Number(i)),e}},{key:"show",value:function(){h.ZP.removeClass(this.root,"hide"),h.ZP.addClass(this.root,"active")}},{key:"hide",value:function(){h.ZP.removeClass(this.root,"active"),h.ZP.addClass(this.root,"hide")}},{key:"setStyle",value:function(s){var t=this;Object.keys(s).forEach(function(e){t.root.style[e]=s[e]})}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map(function(s){s.destroy&&s.destroy()}),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),d}(),ge={SIDE:"side",MIDDLE:"middle"},ke={CLICK:"click",HOVER:"hover"};function ai(d,l){return d===ge.SIDE?l===y.kd.CONTROLS_LEFT?"xg-side-list xg-left-side":"xg-side-list xg-right-side":""}var Ue=S.device==="mobile",Ze=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(t){var e;return(0,a.PA)(this,s),e=l.call(this,t),(0,a._x)((0,a.Lc)(e),"onEnter",function(i){i.stopPropagation(),e.emit("icon_mouseenter",{pluginName:e.pluginName}),e.switchActiveState(i)}),(0,a._x)((0,a.Lc)(e),"switchActiveState",function(i){i.stopPropagation();var n=e.config.toggleMode;n===ke.CLICK?e.toggle(!e.isActive):e.toggle(!0)}),(0,a._x)((0,a.Lc)(e),"onLeave",function(i){i.stopPropagation(),e.emit("icon_mouseleave",{pluginName:e.pluginName}),e.config.listType!==ge.SIDE&&e.isActive&&e.toggle(!1)}),(0,a._x)((0,a.Lc)(e),"onListEnter",function(i){e.enterType=2}),(0,a._x)((0,a.Lc)(e),"onListLeave",function(i){e.enterType=0,e.isActive&&e.toggle(!1)}),e.isIcons=!1,e.isActive=!1,e.curValue=null,e.curIndex=0,e}return(0,a.qH)(s,[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,i=this.config;this.initIcons(),Ue&&i.listType!==ge.MIDDLE&&(i.listType=ge.SIDE),i.hidePortrait&&h.ZP.addClass(this.root,"portrait"),this.on([u.VIDEO_RESIZE,u.FULLSCREEN_CHANGE],function(){e._resizeList()}),this.once(u.CANPLAY,function(){i.list&&i.list.length>0&&(e.renderItemList(i.list),e.show())}),Ue&&this.on(u.PLAYER_FOCUS,function(){e.isActive&&(e.optionsList&&e.optionsList.hide(),e.isActive=!1)}),Ue?(i.toggleMode=ke.CLICK,this.activeEvent="touchend"):this.activeEvent=i.toggleMode===ke.CLICK?"click":"mouseenter",i.toggleMode===ke.CLICK?this.bind(this.activeEvent,this.switchActiveState):(this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)),this.isIcons&&this.bind("click",this.onIconClick)}},{key:"initIcons",value:function(){var e=this,i=this.icons,n=Object.keys(i),r=!1;n.length>0&&(n.forEach(function(o){e.appendChild(".xgplayer-icon",i[o]),!r&&(r=i[o])}),this.isIcons=r),!r&&(this.appendChild(".xgplayer-icon",h.ZP.createDom("span","",{},"icon-text")),h.ZP.addClass(this.find(".xgplayer-icon"),"btn-text"))}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||h.ZP.addClass(this.root,"show")}},{key:"hide",value:function(){h.ZP.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,i,n){if(e===void 0)return"";var r=this.config.list;!n&&(n=this.player.lang),i=!i||h.ZP.isUndefined(e[i])?"text":i,typeof e=="number"&&(e=r[e]);try{return(0,a.Ac)(e[i])==="object"?e[i][n]||e[i].en:e[i]}catch(o){return console.warn(o),""}}},{key:"toggle",value:function(e){if(e!==this.isActive){var i=this.player.controls,n=this.config.listType;e?(n===ge.SIDE?i.blur():i.focus(),this.optionsList&&this.optionsList.show()):(n===ge.SIDE?i.focus():i.focusAwhile(),this.optionsList&&this.optionsList.hide()),this.isActive=e}}},{key:"onItemClick",value:function(e,i){e.stopPropagation();var n=this.config,r=n.listType,o=n.list;this.curIndex=i.to.index,this.curItem=o[this.curIndex],this.changeCurrentText();var c=this.config.isItemClickHide;(c||Ue||r===ge.SIDE)&&this.toggle(!1)}},{key:"onIconClick",value:function(e){}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,i=this.curIndex<e.length?this.curIndex:0,n=e[i];n&&(this.find(".icon-text").innerHTML=this.getTextByLang(n,"iconText"))}}},{key:"renderItemList",value:function(e,i){var n=this,r=this.config,o=this.optionsList,c=this.player;if(typeof i=="number"&&(this.curIndex=i,this.curItem=r.list[i]),o){o.renderItemList(e),this.changeCurrentText();return}var g={config:{data:e||[],className:ai(r.listType,r.position),onItemClick:function(M,Z){n.onItemClick(M,Z)}},root:r.listType===ge.SIDE?c.innerContainer||c.root:this.root};if(this.config.isShowIcon){var v=this.player.root.getBoundingClientRect(),_=v.height,b=r.listType===ge.MIDDLE?_-50:_;b&&(g.config.maxHeight="".concat(b,"px")),this.optionsList=new si(g),this.changeCurrentText(),this.show()}this._resizeList()}},{key:"_resizeList",value:function(){var e=this.player.root.getBoundingClientRect(),i=e.height,n=this.config.listType===ge.MIDDLE?i-50:i;this.optionsList&&this.optionsList.setStyle({maxHeight:"".concat(n,"px")})}},{key:"destroy",value:function(){var e=this.config;e.toggleMode===ke.CLICK?this.unbind(this.activeEvent,this.switchActiveState):(this.unbind(this.activeEvent,this.onEnter),this.unbind("mouseleave",this.onLeave)),this.isIcons&&this.unbind("click",this.onIconClick),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",`">
    <div class="xgplayer-icon">
    </div>
   </xg-icon>`)}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:y.kd.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1,isItemClickHide:!0,toggleMode:ke.HOVER}}}]),s}(y.ZP),oi=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(t){var e;return(0,a.PA)(this,s),e=l.call(this,t),e.curTime=0,e.isPaused=!0,e}return(0,a.qH)(s,[{key:"beforeCreate",value:function(e){var i=e.config.list;Array.isArray(i)&&i.length>0&&(e.config.list=i.map(function(n){return!n.text&&n.name&&(n.text=n.name),n.text||(n.text=n.definition),n}))}},{key:"afterCreate",value:function(){var e=this;(0,a.U2)((0,a.IP)(s.prototype),"afterCreate",this).call(this),this.on("resourceReady",function(i){e.changeDefinitionList(i)}),this.on(u.DEFINITION_CHANGE,function(i){e.renderItemList(e.config.list,i.to)}),this.player.definitionList.length<2&&this.hide()}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||h.ZP.addClass(this.root,"show")}},{key:"initDefinition",value:function(){var e=this.config,i=e.list,n=e.defaultDefinition;if(i.length>0){var r=null;i.map(function(o){o.definition===n&&(r=o)}),r||(r=i[0]),this.changeDefinition(r)}}},{key:"renderItemList",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.list||[],n=arguments.length>1?arguments[1]:void 0,r=n&&n.definition?n.definition:this.config.defaultDefinition;n&&i.forEach(function(g){g.selected=!1});var o=0,c=i.map(function(g,v){var _=(0,a.Zj)((0,a.Zj)({},g),{},{showText:e.getTextByLang(g)||g.definition,selected:!1});return(g.selected||g.definition&&g.definition==r)&&(_.selected=!0,o=v),_});(0,a.U2)((0,a.IP)(s.prototype),"renderItemList",this).call(this,c,o)}},{key:"changeDefinitionList",value:function(e){Array.isArray(e)&&(this.config.list=e.map(function(i){return!i.text&&i.name&&(i.text=i.name),i.text||(i.text=i.definition),i}),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,i){this.player.changeDefinition(e,i)}},{key:"onItemClick",value:function(e,i){var n=this.player.definitionList;(0,a.U2)((0,a.IP)(s.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:i.from,to:i.to});for(var r=0;r<n.length;r++)i.to&&n[r].definition===i.to.definition&&(i.to.url=n[r].url),i.from&&n[r].definition===i.from.definition&&(i.from.url=n[r].url);this.player.changeDefinition(i.to,i.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return(0,a.Zj)((0,a.Zj)({},Ze.defaultConfig),{},{position:y.kd.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0})}}]),s}(Ze),ui=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(t){var e;return(0,a.PA)(this,s),e=l.call(this,t),e.curRate=1,e}return(0,a.qH)(s,[{key:"beforeCreate",value:function(e){var i=e.player.config.playbackRate,n=i?Array.isArray(i)?i:e.config.list:[];Array.isArray(n)&&(e.config.list=n.map(function(r){return typeof r=="number"?r={rate:r,text:"".concat(r,"x")}:!r.text&&r.rate&&(r.text="".concat(r.rate,"x")),r}))}},{key:"afterCreate",value:function(){var e=this;(0,a.U2)((0,a.IP)(s.prototype),"afterCreate",this).call(this),this.on(u.RATE_CHANGE,function(){e.curValue!==e.player.playbackRate&&e.renderItemList()}),this.renderItemList()}},{key:"show",value:function(){!this.config.list||this.config.list.length===0||(0,a.U2)((0,a.IP)(s.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,i){(0,a.U2)((0,a.IP)(s.prototype),"onItemClick",this).apply(this,arguments);var n=e.delegateTarget,r=Number(n.getAttribute("rate"));if(!r||r===this.curValue)return!1;var o={playbackRate:{from:this.player.playbackRate,to:r}};this.emitUserAction(e,"change_rate",{props:o}),this.curValue=r,this.player.playbackRate=r}},{key:"renderItemList",value:function(){var e=this,i=this.player.playbackRate||1;this.curValue=i;var n=-1,r=this.config.list.map(function(o,c){var g={rate:o.rate};return g.rate===i&&(g.selected=!0,n=c),g.showText=e.getTextByLang(o),g});(0,a.U2)((0,a.IP)(s.prototype),"renderItemList",this).call(this,r,n)}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,i=this.curIndex<e.length?this.curIndex:0,n=e[i],r="";!n||this.curIndex<0?r="".concat(this.player.playbackRate,"x"):r=this.getTextByLang(n,"iconText"),this.find(".icon-text").innerHTML=r}}},{key:"destroy",value:function(){(0,a.U2)((0,a.IP)(s.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return(0,a.Zj)((0,a.Zj)({},Ze.defaultConfig),{},{position:y.kd.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1})}}]),s}(Ze);function li(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">
  <path fill="#fff" transform="scale(1.3, 1.3)" class='path_full' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>
</svg>
`,"image/svg+xml").firstChild}function ci(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">
  <path fill="#fff" transform="scale(1.3, 1.3)" d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>
</svg>
`,"image/svg+xml").firstChild}var ft=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){return(0,a.PA)(this,s),l.apply(this,arguments)}return(0,a.qH)(s,[{key:"beforeCreate",value:function(e){typeof e.player.config.cssFullscreen=="boolean"&&(e.config.disable=!e.player.config.cssFullscreen)}},{key:"afterCreate",value:function(){var e=this;(0,a.U2)((0,a.IP)(s.prototype),"afterCreate",this).call(this),!this.config.disable&&(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(u.CSS_FULLSCREEN_CHANGE,function(i){e.animate(i)}),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(n){n.preventDefault(),n.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var e=this.icons,i=this.find(".xgplayer-icon");i.appendChild(e.cssFullscreen),i.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var i=this.player.isCssfullScreen;this.emitUserAction(e,"switch_cssfullscreen",{cssfullscreen:i}),i?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var i=this.i18nKeys,n=this.find(".xg-tips");n&&this.changeLangTextKey(n,e?i.EXITCSSFULLSCREEN_TIPS:i.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:li,class:"xg-get-cssfull"},exitCssFullscreen:{icon:ci,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){(0,a.U2)((0,a.IP)(s.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class='xgplayer-cssfullscreen'>
    <div class="xgplayer-icon">
    </div>
    `.concat(me(this,"CSSFULLSCREEN_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:y.kd.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),s}(_e),hi=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){return(0,a.PA)(this,s),l.apply(this,arguments)}return(0,a.qH)(s,[{key:"afterCreate",value:function(){var e=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(n){n.preventDefault(),n.stopPropagation()}}),this.onError=this.hook("showError",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(u.ERROR,function(i){e.onError(i)})}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleError",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.player,n=e.errorType,r=i.errorNote?this.i18n[i.errorNote]:"";if(!r)switch(n){case"decoder":r=this.i18n.MEDIA_ERR_DECODE;break;case"network":r=this.i18n.MEDIA_ERR_NETWORK;break;default:r=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=r,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return`<xg-error class="xgplayer-error">
      <div class="xgplayer-errornote">
       <span class="xgplayer-error-text"></span>
       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>
      </div>
    </xg-error>`}}],[{key:"pluginName",get:function(){return"error"}}]),s}(y.ZP),fi=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){return(0,a.PA)(this,s),l.apply(this,arguments)}return(0,a.qH)(s,[{key:"afterCreate",value:function(){var e=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],function(i){(e.config.onClick||e.customOnClick)&&(i.preventDefault(),i.stopPropagation(),e.customOnClick?e.customOnClick(i):e.config.onClick(i))}),this.player.showPrompt=function(){e.show.apply(e,arguments)},this.player.hidePrompt=function(){e.hide()}}},{key:"setStyle",value:function(e){var i=this;Object.keys(e).map(function(n){i.root.style[n]=e[n]})}},{key:"show",value:function(e){var i=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(e){this.customOnClick=r;var o=this.config.interval;this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),h.ZP.addClass(this.root,"show"),n.mode==="arrow"&&h.ZP.addClass(this.root,"arrow"),typeof e=="string"?this.find(".xgplayer-prompt-detail").innerHTML=e:this.find(".xgplayer-prompt-detail").innerHTML="".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),n.style&&this.setStyle(n.style);var c=typeof n.autoHide=="boolean"?n.autoHide:this.config.autoHide;if(c){var g=n.interval||o;this.intervalId=setTimeout(function(){i.hide()},g)}}}},{key:"hide",value:function(){h.ZP.removeClass(this.root,"show"),h.ZP.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(E.CONTROLS_FOLLOW,`">
    <span class="xgplayer-prompt-detail"></span>
    </xg-prompt>`)}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),s}(y.ZP),dt={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function gt(d){Object.keys(dt).map(function(l){d[l]===void 0&&(d[l]=dt[l])})}var pt={_updateDotDom:function(l,s){if(s){var t=this.calcuPosition(l.time,l.duration),e=l.style||{};e.left="".concat(t.left,"%"),e.width="".concat(t.width,"%"),s.setAttribute("data-text",l.text),s.setAttribute("data-time",l.time),t.isMini?h.ZP.addClass(s,"mini"):h.ZP.removeClass(s,"mini"),Object.keys(e).map(function(i){s.style[i]=e[i]})}},initDots:function(){var l=this;this._ispots.map(function(s){l.createDot(s,!1)}),this.ispotsInit=!0},createDot:function(l){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this.player.plugins.progress;if(t&&(s&&(gt(l),this._ispots.push(l)),!(!this.ispotsInit&&s))){var e=this.calcuPosition(l.time,l.duration),i=l.style||{};i.left="".concat(e.left,"%"),i.width="".concat(e.width,"%");var n="xgspot_".concat(l.id," xgplayer-spot");e.isMini&&(n+=" mini");var r=h.ZP.createDom("xg-spot",l.template||"",{"data-text":l.text,"data-time":l.time,"data-id":l.id},n);Object.keys(i).map(function(o){r.style[o]=i[o]}),t.outer&&t.outer.appendChild(r)}},findDot:function(l){if(this.player.plugins.progress){var s=this._ispots.filter(function(t,e){return t.id===l});return s.length>0?s[0]:null}},updateDot:function(l){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=this.player.plugins.progress;if(t){var e=this.findDot(l.id);if(e&&Object.keys(l).map(function(n){e[n]=l[n]}),!!this.ispotsInit){var i=t.find('xg-spot[data-id="'.concat(l.id,'"]'));i&&(this._updateDotDom(l,i),s&&this.showDot(l.id))}}},deleteDot:function(l){var s=this._ispots,t=this.player.plugins.progress;if(t){for(var e=[],i=0;i<s.length;i++)s[i].id===l&&e.push(i);for(var n=e.length,r=n-1;r>=0;r--)if(s.splice(e[r],1),this.ispotsInit){var o=t.find('xg-spot[data-id="'.concat(l,'"]'));o&&o.parentElement.removeChild(o)}}},deleteAllDots:function(){var l=this.player.plugins.progress;if(l){if(!this.ispotsInit){this._ispots=[];return}for(var s=l.root.getElementsByTagName("xg-spot"),t=s.length-1;t>=0;t--)l.outer.removeChild(s[t]);this._ispots=[]}},updateAllDots:function(){var l=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.player.plugins.progress;if(t){if(!this.ispotsInit){this._ispots=s;return}this._ispots=[];var e=t.root.getElementsByTagName("xg-spot"),i=e.length;if(i>s.length)for(var n=i-1;n>s.length-1;n--)t.outer.removeChild(e[n]);s.forEach(function(r,o){o<i?(e[o].setAttribute("data-id","".concat(r.id)),l._ispots.push(r),l.updateDot(r)):l.createDot(r)})}},updateDuration:function(){var l=this,s=this.player.plugins.progress;if(s){var t=this._ispots;t.forEach(function(e){var i=s.find('xg-spot[data-id="'.concat(e.id,'"]'));l._updateDotDom(e,i)})}},getAllDotsDom:function(){var l=this.player.plugins.progress;if(!l)return[];var s=l.root.getElementsByTagName("xg-spot");return s},getDotDom:function(l){var s=this.player.plugins.progress;if(s)return s.find('xg-spot[data-id="'.concat(l,'"]'))}};function di(d){var l=d.config,s=d.player;Object.keys(pt).map(function(e){d[e]=pt[e].bind(d)});var t=s.config.progressDot||l.ispots||[];d._ispots=t.map(function(e){return gt(e),e}),d.ispotsInit=!1,d.on(u.DURATION_CHANGE,function(){d.ispotsInit?d.updateDuration():d.initDots()})}var be={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver",mouseenter:"onProgressMove"},gi=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(t){var e;return(0,a.PA)(this,s),e=l.call(this,t),(0,a._x)((0,a.Lc)(e),"onMousemove",function(i){if(!e.config.disable){if(h.ZP.hasClass(i.target,"xg-spot-content")&&e.config.isHideThumbnailHover){e.player.plugins.progress.onMouseLeave(i);return}(e._state.f||h.ZP.hasClass(i.target,"xg-spot-content"))&&(h.ZP.event(i),i.stopPropagation())}}),(0,a._x)((0,a.Lc)(e),"onMousedown",function(i){e.config.disable||(e._state.f||h.ZP.hasClass(i.target,"xg-spot-content"))&&(h.ZP.event(i),i.stopPropagation())}),(0,a._x)((0,a.Lc)(e),"onMouseup",function(i){if(e.isDrag){var n=e.player.plugins.progress;n&&n.pos&&(n.onMouseUp(i),!n.pos.isEnter&&n.onMouseLeave(i))}}),(0,a._x)((0,a.Lc)(e),"onDotMouseLeave",function(i){if(!e.config.disable){e._curDot.removeEventListener("mouseleave",e.onDotMouseLeave),e.blurDot(i.target),e._curDot=null;var n=e.player.plugins.progress;n&&n.enableBlur(),e.show()}}),(0,a._x)((0,a.Lc)(e),"onProgressMouseOver",function(i,n){if(!e.config.disable&&h.ZP.hasClass(n.target,"xgplayer-spot")&&!e._curDot){e._curDot=n.target,e.focusDot(n.target),e._curDot.children.length>0&&e.hide();var r=e.player.plugins.progress;r&&r.disableBlur(),e._curDot.addEventListener("mouseleave",e.onDotMouseLeave)}}),e._ispots=[],e.videoPreview=null,e.videothumbnail=null,e.thumbnail=null,e.timeStr="",e._state={now:0,f:!1},e}return(0,a.qH)(s,[{key:"beforeCreate",value:function(e){var i=e.player.plugins.progress;i&&(e.root=i.root)}},{key:"afterCreate",value:function(){var e=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",function(i,n){n.currentTime&&e.player.seek(n.currentTime)}),this.transformTimeHook=this.hook("transformTime",function(i){e.setTimeContent(h.ZP.format(i))}),di(this),this.on(u.DURATION_CHANGE,function(){e.show()}),this.config.disable&&this.disable(),this.extTextRoot=this.find(".xg-spot-ext-text")}},{key:"setConfig",value:function(e){var i=this;e&&Object.keys(e).map(function(n){i.config[n]=e[n]})}},{key:"onPluginsReady",value:function(){var e=this.player;e.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var e=this,i=this.player.plugins.progress;if(i&&(Object.keys(be).map(function(r){e[be[r]]=e[be[r]].bind(e),i.addCallBack(r,e[be[r]])}),S.device!=="mobile")){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown),this.bind(".xg-spot-info","mouseup",this.onMouseup);var n=this.hook("previewClick",function(){});this.handlerPreviewClick=function(r){r.stopPropagation(),n(parseInt(e._state.now*1e3,10)/1e3,r)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(e,i){this.config.disable||!this.player.duration||this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){this.config.disable||!this.player.duration||(this.isDrag=!0,this.videoPreview&&h.ZP.addClass(this.videoPreview,"show"))}},{key:"onProgressDragEnd",value:function(e){this.config.disable||!this.player.duration||(this.isDrag=!1,this.videoPreview&&h.ZP.removeClass(this.videoPreview,"show"))}},{key:"onProgressClick",value:function(e,i){this.config.disable||h.ZP.hasClass(i.target,"xgplayer-spot")&&(i.stopPropagation(),i.preventDefault(),["time","id","text"].map(function(n){e[n]=i.target.getAttribute("data-".concat(n))}),e.time&&(e.time=Number(e.time)),this.handlerSpotClick(i,e))}},{key:"updateLinePos",value:function(e,i){var n=this.root,r=this.previewLine,o=this.player,c=this.config,g=o.controls.mode,v=g==="flex",_=n.getBoundingClientRect().width;if(_){_=this._hasThumnail&&_<c.width?c.width:_;var b=e-_/2,D;b<0&&!v?(b=0,D=e-_/2):b>i-_&&!v?(D=b-(i-_),b=i-_):D=0,D!==void 0&&(r.style.transform="translateX(".concat(D.toFixed(2),"px)")),n.style.transform="translateX(".concat(b.toFixed(2),"px) translateZ(0)")}}},{key:"updateTimeText",value:function(e){var i=this.timeText,n=this.timePoint;i.innerHTML=e,!this.thumbnail&&(n.innerHTML=e)}},{key:"updatePosition",value:function(e,i,n,r){var o=this.root,c=this.config,g=this._state;if(o){g.now=n,this.transformTimeHook(n);var v=this.timeStr;r&&r.target&&h.ZP.hasClass(r.target,"xgplayer-spot")?(this.showTips(r.target.getAttribute("data-text"),!1,v),this.focusDot(r.target),g.f=!0,c.isFocusDots&&g.f&&(g.now=parseInt(r.target.getAttribute("data-time"),10))):c.defaultText?(g.f=!1,this.showTips(c.defaultText,!0,v)):(g.f=!1,this.hideTips("")),this.updateTimeText(v),this.updateThumbnails(g.now),this.updateLinePos(e,i)}}},{key:"setTimeContent",value:function(e){this.timeStr=e}},{key:"updateThumbnails",value:function(e){var i=this.player,n=this.videoPreview,r=this.config,o=i.plugins.thumbnail;if(o&&o.usable){this.thumbnail&&o.update(this.thumbnail,e,r.width,r.height);var c=n&&n.getBoundingClientRect();this.videothumbnail&&o.update(this.videothumbnail,e,c.width,c.height)}}},{key:"registerThumbnail",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(S.device!=="mobile"){var i=this.player,n=this.config,r=i.getPlugin("thumbnail");if(r&&r.setConfig(e),!r||!r.usable||!n.isShowThumbnail){h.ZP.addClass(this.root,"short-line no-thumbnail");return}else h.ZP.removeClass(this.root,"short-line no-thumbnail");n.mode==="short"&&h.ZP.addClass(this.root,"short-line"),this._hasThumnail=!0;var o=this.find(".xg-spot-thumbnail");this.thumbnail=r.createThumbnail(o,"progress-thumbnail"),n.isShowCoverPreview&&(this.videoPreview=h.ZP.createDom("xg-video-preview","",{},"xgvideo-preview"),i.root.appendChild(this.videoPreview),this.videothumbnail=r.createThumbnail(this.videoPreview,"xgvideo-thumbnail")),this.updateThumbnails(0)}}},{key:"calcuPosition",value:function(e,i){var n=this.player.plugins.progress,r=this.player,o=n.root.getBoundingClientRect().width,c=r.duration/o*6;return e+i>r.duration&&(i=r.duration-e),e/r.duration*100,i/r.duration,{left:e/r.duration*100,width:i/r.duration*100,isMini:i<c}}},{key:"showDot",value:function(e){var i=this.findDot(e);if(i){var n=this.root.getBoundingClientRect(),r=n.width,o=i.time/this.player.duration*r;this.updatePosition(o,r,i.time)}}},{key:"focusDot",value:function(e,i){e&&(i||(i=e.getAttribute("data-id")),h.ZP.addClass(e,"active"),this._activeDotId=i)}},{key:"blurDot",value:function(e){if(!e){var i=this._activeDotId;e=this.getDotDom(i)}e&&(h.ZP.removeClass(e,"active"),this._activeDotId=null)}},{key:"showTips",value:function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";h.ZP.addClass(this.root,"no-timepoint"),e&&(h.ZP.addClass(this.find(".xg-spot-content"),"show-text"),i&&this.config.mode==="production"?(h.ZP.addClass(this.root,"product"),this.tipText.textContent=e):(h.ZP.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(n," ").concat(e)))}},{key:"hideTips",value:function(){h.ZP.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",h.ZP.removeClass(this.find(".xg-spot-content"),"show-text"),h.ZP.removeClass(this.root,"product")}},{key:"hide",value:function(){h.ZP.addClass(this.root,"hide")}},{key:"show",value:function(){h.ZP.removeClass(this.root,"hide")}},{key:"enable",value:function(){var e=this.config,i=this.playerConfig;this.config.disable=!1,this.show(),!this.thumbnail&&e.isShowThumbnail&&this.registerThumbnail(i.thumbnail||{})}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){var e=this,i=this.player.plugins.progress;i&&Object.keys(be).map(function(n){i.removeCallBack(n,e[be[n]])}),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-info","mouseup",this.onMouseup),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return S.device==="mobile"||this.playerConfig.isMobileSimulateMode==="mobile"?"":'<div class="xg-spot-info hide '.concat(this.config.mode==="short"?"short-line":"",`">
      <div class="xg-spot-content">
        <div class="xg-spot-thumbnail">
          <span class="xg-spot-time"></span>
        </div>
        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>
      </div>
      <div class="xgplayer-progress-point">00:00</div>
      <div class="xg-spot-ext-text"></div>
      <div class="xg-spot-line"></div>
    </div>`)}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isHideThumbnailHover:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:"",disable:!1,width:160,height:90}}}]),s}(y.ZP),pi=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(t){var e;return(0,a.PA)(this,s),e=l.call(this,t),e.ratio=1,e.interval=null,e._preloadMark={},e}return(0,a.qH)(s,[{key:"afterCreate",value:function(){var e=this;this.usable&&this.initThumbnail(),this.on([u.DURATION_CHANGE],function(){var i=e.config,n=i.pic_num,r=i.interval;e.usable&&(e.interval=r>0?r:Math.round(e.player.duration*1e3/n)/1e3)})}},{key:"setConfig",value:function(e){var i=this;if(e){var n=Object.keys(e);n.length<1||(n.forEach(function(r){i.config[r]=e[r]}),this.usable&&this.initThumbnail())}}},{key:"usable",get:function(){var e=this.config,i=e.urls,n=e.pic_num;return i&&i.length>0&&n>0}},{key:"initThumbnail",value:function(){var e=this.config,i=e.width,n=e.height,r=e.pic_num,o=e.interval;this.ratio=i/n*100,this.interval=o||Math.round(this.player.duration/r),this._preloadMark={}}},{key:"getUrlByIndex",value:function(e){return e>=0&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var i=this;if(!this._preloadMark[e]){var n=this.config.urls,r=n.length,o=[];e>0&&o.push(e-1),o.push(e),e>0&&e<r-1&&o.push(e+1),o.map(function(c){!i._preloadMark[c]&&c>=0&&c<r&&(i._preloadMark[c]=1,h.ZP.preloadImg(n[c],function(){i._preloadMark[c]=2}))})}}},{key:"getPosition",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=this.config,o=r.pic_num,c=r.row,g=r.col,v=r.width,_=r.height;this.interval=Math.round(this.player.duration/o);var b=Math.ceil(e/this.interval);b=b>o?o:b;var D=b<c*g?0:Math.ceil(b/(c*g))-1,M=b-D*(g*c),Z=M>0?Math.ceil(M/g)-1:0,G=M>0?M-Z*g-1:0,Y=0,z=0;if(i&&n){var ae=i/n;ae<v/_?(z=n,Y=z*(v/_)):(Y=i,z=Y/(v/_))}else n?i||(z=n||_,Y=z*(v/_)):(Y=i||v,z=Y/(v/_));var ie=this.getUrlByIndex(D);return{urlIndex:D,rowIndex:Z,colIndex:G,url:ie,height:z,width:Y,style:{backgroundImage:"url(".concat(ie,")"),backgroundSize:"".concat(Y*g,"px auto"),backgroundPosition:"-".concat(G*Y,"px -").concat(Z*z,"px"),width:"".concat(Y,"px"),height:"".concat(z,"px")}}}},{key:"update",value:function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",c=this.config,g=c.pic_num,v=c.urls;if(!(g<=0||!v||v.length===0)){var _=this.getPosition(i,n,r);this.preload(_.urlIndex),Object.keys(_.style).map(function(b){e.style[b]=_.style[b]}),Object.keys(o).map(function(b){e.style[b]=o[b]})}}},{key:"changeConfig",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.setConfig(e)}},{key:"createThumbnail",value:function(e,i){var n=h.ZP.createDom("xg-thumbnail","",{},"thumbnail ".concat(i));return e&&e.appendChild(n),n}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:90,width:160,scale:1,className:"",hidePortrait:!1}}}]),s}(y.ZP),vi=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){return(0,a.PA)(this,s),l.apply(this,arguments)}return(0,a.qH)(s,[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},i=arguments.length>1?arguments[1]:void 0;!i||!this.root||(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/i*100,"%")),e.played&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/i*100,"%")))}},{key:"render",value:function(){if(!(!this.playerConfig.progress||!this.playerConfig.miniprogress))return`<xg-mini-progress class="xg-mini-progress">
    <xg-mini-progress-cache class="xg-mini-progress-cache"></xg-mini-progress-cache>
    <xg-mini-progress-played class="xg-mini-progress-played"></xg-mini-progress-played>
    </xg-mini-progress>`}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}]),s}(y.ZP),Ie={REAL_TIME:"realtime",FIRST_FRAME:"firstframe",FRAME_RATE:"framerate",POSTER:"poster"};function mi(){try{return parseInt(window.performance.now(),10)}catch(d){return new Date().getTime()}}function yi(){try{var d=document.createElement("canvas").getContext;return!!d}catch(l){return!1}}var Be=null,_i=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){var t;(0,a.PA)(this,s);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=l.call.apply(l,[this].concat(i)),(0,a._x)((0,a.Lc)(t),"onLoadedData",function(r){t.player&&(t._frameCount=t.config.startFrameCount,t.renderOnTimeupdate(r),t.off(u.TIME_UPDATE,t.renderOnTimeupdate),t.on(u.TIME_UPDATE,t.renderOnTimeupdate))}),(0,a._x)((0,a.Lc)(t),"renderOnTimeupdate",function(r){t._frameCount>0?(t.renderOnce(),t._frameCount--):(t._isLoaded=!0,t.off(u.TIME_UPDATE,t.renderOnTimeupdate),!t.player.paused&&t._checkIfCanStart()&&t.start())}),(0,a._x)((0,a.Lc)(t),"start",function(){var r=t.player.media,o=mi(),c=t.checkVideoIsSupport(r);!c||!t.canvasCtx||(t.stop(),r.videoWidth&&r.videoHeight&&(t.videoPI=r.videoHeight>0?parseInt(r.videoWidth/r.videoHeight*100,10):0,(t.config.mode===Ie.REAL_TIME||o-t.preTime>=t.interval)&&(r&&r.videoWidth&&t.update(c,t.videoPI),t.preTime=o)),t.frameId=h.ZP.requestAnimationFrame(t.start))}),(0,a._x)((0,a.Lc)(t),"stop",function(){t.frameId&&(h.ZP.cancelAnimationFrame(t.frameId),t.frameId=null)}),t}return(0,a.qH)(s,[{key:"afterCreate",value:function(){var e=this;this.playerConfig.dynamicBg===!0&&(this.config.disable=!1),s.isSupport||(this.config.disable=!0);var i=this.config,n=i.disable,r=i.mode,o=i.frameRate;n||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0,pi:0},this.isStart=!1,this._isLoaded=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/o,10),this.canvas=null,this.canvasCtx=null,this._frameCount=0,this.once(u.COMPLETE,function(){e.player&&(e.init(),e.player.paused||e.start())}),r!==Ie.POSTER&&(r!==Ie.FIRST_FRAME&&(this.on(u.EMPTIED,function(){e.stop()}),this.on(u.PLAY,function(){e._checkIfCanStart()&&e.start()}),this.on(u.PAUSE,function(){e.stop()})),this.on(u.LOADED_DATA,this.onLoadedData),this.on(u.LOAD_START,function(){e._isLoaded=!1,e.stop()})))}},{key:"init",value:function(){var e=this.player,i=this.config;this.canvasFilter=s.supportCanvasFilter();try{var n=this.config.isInnerRender&&e.innerContainer||e.root;n.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg" data-index="'.concat(i.index,`"><canvas>
        </canvas><xgmask></xgmask></div>`)),this.root=n.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=i.filter,this.canvas.style.webkitFilter=i.filter),this.mask=this.find("xgmask"),i.addMask&&(this.mask.style.background=i.maskBg),this.canvasCtx=this.canvas.getContext("2d"),this.renderByPoster()}catch(r){J.Z.logError("plugin:DynamicBg",r)}}},{key:"checkVideoIsSupport",value:function(e){if(!e)return null;var i=e&&e instanceof window.HTMLVideoElement?e:e.canvas?e.canvas:e.flyVideo?e.flyVideo:null;if(i&&!(S.browser==="safari"&&(/^blob/.test(i.currentSrc)||/^blob/.test(i.src))))return i;var n=i?i.tagName.toLowerCase():"";return n==="canvas"||n==="img"?i:null}},{key:"renderByPoster",value:function(){var e=this.playerConfig.poster;if(e){var i=h.ZP.typeOf(e)==="String"?e:h.ZP.typeOf(e.poster)==="String"?e.poster:null;this.updateImg(i)}}},{key:"_checkIfCanStart",value:function(){var e=this.config.mode;return this._isLoaded&&e!==Ie.FIRST_FRAME&&e!==Ie.POSTER}},{key:"renderOnce",value:function(){var e=this.player.media;if(!(!e.videoWidth||!e.videoHeight)){this.videoPI=parseInt(e.videoWidth/e.videoHeight*100,10);var i=this.checkVideoIsSupport(e);i&&e.videoWidth&&this.update(i,this.videoPI)}}},{key:"updateImg",value:function(e){var i=this;if(e){var n=this.canvas.getBoundingClientRect(),r=n.width,o=n.height,c=new window.Image;c.onload=function(){if(!(!i.canvas||i.frameId||i.isStart)){i.canvas.height=o,i.canvas.width=r;var g=parseInt(r/o*100,10);i.update(c,g),c=null}},c.src=e}}},{key:"update",value:function(e,i){if(!(!this.canvas||!this.canvasCtx||!i))try{var n=this._pos,r=this.config,o=this.canvas.getBoundingClientRect(),c=o.width,g=o.height;if(c!==n.width||g!==n.height||n.pi!==i){var v=parseInt(c/g*100,10);n.pi=i,n.width=this.canvas.width=c,n.height=this.canvas.height=g;var _=g,b=c;v<i?b=parseInt(g*i/100,10):v>i&&(_=parseInt(c*100/i,10)),n.rwidth=b*r.multiple,n.rheight=_*r.multiple,n.x=(c-n.rwidth)/2,n.y=(g-n.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=r.filter),this.canvasCtx.drawImage(e,n.x,n.y,n.rwidth,n.rheight)}catch(D){J.Z.logError("plugin:DynamicBg",D)}}},{key:"destroy",value:function(){this.stop(),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,index:-1,mode:"framerate",frameRate:10,filter:"blur(50px)",startFrameCount:2,addMask:!0,multiple:1.2,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return typeof Be=="boolean"||(Be=yi()),Be}},{key:"supportCanvasFilter",value:function(){return!(S.browser==="safari"||S.browser==="firefox")}}]),s}(y.ZP),Ci={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:"\u89C6\u9891\u4E0B\u8F7D\u9519\u8BEF"},mse:{code:2,msg:"\u6D41\u8FFD\u52A0\u9519\u8BEF"},parse:{code:3,msg:"\u89E3\u6790\u9519\u8BEF"},format:{code:4,msg:"\u683C\u5F0F\u9519\u8BEF"},decoder:{code:5,msg:"\u89E3\u7801\u9519\u8BEF"},runtime:{code:6,msg:"\u8BED\u6CD5\u9519\u8BEF"},timeout:{code:7,msg:"\u64AD\u653E\u8D85\u65F6"},other:{code:8,msg:"\u5176\u4ED6\u9519\u8BEF"}},HAVE_NOTHING:"\u6CA1\u6709\u5173\u4E8E\u97F3\u9891/\u89C6\u9891\u662F\u5426\u5C31\u7EEA\u7684\u4FE1\u606F",HAVE_METADATA:"\u97F3\u9891/\u89C6\u9891\u7684\u5143\u6570\u636E\u5DF2\u5C31\u7EEA",HAVE_CURRENT_DATA:"\u5173\u4E8E\u5F53\u524D\u64AD\u653E\u4F4D\u7F6E\u7684\u6570\u636E\u662F\u53EF\u7528\u7684\uFF0C\u4F46\u6CA1\u6709\u8DB3\u591F\u7684\u6570\u636E\u6765\u64AD\u653E\u4E0B\u4E00\u5E27/\u6BEB\u79D2",HAVE_FUTURE_DATA:"\u5F53\u524D\u53CA\u81F3\u5C11\u4E0B\u4E00\u5E27\u7684\u6570\u636E\u662F\u53EF\u7528\u7684",HAVE_ENOUGH_DATA:"\u53EF\u7528\u6570\u636E\u8DB3\u4EE5\u5F00\u59CB\u64AD\u653E",NETWORK_EMPTY:"\u97F3\u9891/\u89C6\u9891\u5C1A\u672A\u521D\u59CB\u5316",NETWORK_IDLE:"\u97F3\u9891/\u89C6\u9891\u662F\u6D3B\u52A8\u7684\u4E14\u5DF2\u9009\u53D6\u8D44\u6E90\uFF0C\u4F46\u5E76\u672A\u4F7F\u7528\u7F51\u7EDC",NETWORK_LOADING:"\u6D4F\u89C8\u5668\u6B63\u5728\u4E0B\u8F7D\u6570\u636E",NETWORK_NO_SOURCE:"\u672A\u627E\u5230\u97F3\u9891/\u89C6\u9891\u6765\u6E90",MEDIA_ERR_ABORTED:"\u53D6\u56DE\u8FC7\u7A0B\u88AB\u7528\u6237\u4E2D\u6B62",MEDIA_ERR_NETWORK:"\u7F51\u7EDC\u9519\u8BEF",MEDIA_ERR_DECODE:"\u89E3\u7801\u9519\u8BEF",MEDIA_ERR_SRC_NOT_SUPPORTED:"\u4E0D\u652F\u6301\u7684\u97F3\u9891/\u89C6\u9891\u683C\u5F0F",REPLAY:"\u91CD\u64AD",ERROR:"\u7F51\u7EDC\u8FDE\u63A5\u4F3C\u4E4E\u51FA\u73B0\u4E86\u95EE\u9898",PLAY_TIPS:"\u64AD\u653E",PAUSE_TIPS:"\u6682\u505C",PLAYNEXT_TIPS:"\u4E0B\u4E00\u96C6",DOWNLOAD_TIPS:"\u4E0B\u8F7D",ROTATE_TIPS:"\u65CB\u8F6C",RELOAD_TIPS:"\u91CD\u65B0\u8F7D\u5165",FULLSCREEN_TIPS:"\u8FDB\u5165\u5168\u5C4F",EXITFULLSCREEN_TIPS:"\u9000\u51FA\u5168\u5C4F",CSSFULLSCREEN_TIPS:"\u8FDB\u5165\u6837\u5F0F\u5168\u5C4F",EXITCSSFULLSCREEN_TIPS:"\u9000\u51FA\u6837\u5F0F\u5168\u5C4F",TEXTTRACK:"\u5B57\u5E55",PIP:"\u753B\u4E2D\u753B",SCREENSHOT:"\u622A\u56FE",LIVE:"\u6B63\u5728\u76F4\u64AD",OFF:"\u5173\u95ED",OPEN:"\u5F00\u542F",MINI_DRAG:"\u70B9\u51FB\u6309\u4F4F\u53EF\u62D6\u52A8\u89C6\u9891",MINISCREEN:"\u5C0F\u5C4F\u5E55",REFRESH_TIPS:"\u8BF7\u8BD5\u8BD5",REFRESH:"\u5237\u65B0",FORWARD:"\u5FEB\u8FDB\u4E2D",LIVE_TIP:"\u76F4\u64AD"}},De="info",et=u.STATS_EVENTS,Ei=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){var t;(0,a.PA)(this,s);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=l.call.apply(l,[this].concat(i)),(0,a._x)((0,a.Lc)(t),"_recordUserActions",function(r){var o=t._getTime(),c=Object.assign({},r,{msg:r.msg||r.action});t._stats[De].push((0,a.Zj)((0,a.Zj)({type:"userAction"},o),{},{payload:c}))}),(0,a._x)((0,a.Lc)(t),"_onReset",function(){t.reset()}),(0,a._x)((0,a.Lc)(t),"_recordInfo",function(r){t.info(r)}),(0,a._x)((0,a.Lc)(t),"_downloadStats",function(){var r=t.getStats(),o=new Blob([JSON.stringify(r)],{type:"application/json"}),c=window.URL.createObjectURL(o),g=document.createElement("a");g.style.display="none",g.href=c,g.download="player.txt",g.disabled=!1,g.click()}),t}return(0,a.qH)(s,[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:new Date().toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(u.USER_ACTION,this._recordUserActions),this.on(et.STATS_INFO,this._recordInfo),this.on(et.STATS_DOWNLOAD,this._downloadStats),this.on(et.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(e){e.profile?this._infoProfile(e):this._info(e)}},{key:"_info",value:function(e){var i=this._getTime();this._stats[De].push((0,a.Zj)((0,a.Zj)({},i),{},{payload:e}))}},{key:"_infoProfile",value:function(e){if(e&&e.startMs){var i=Date.now(),n=i-e.startMs,r=(0,a.Zj)({cat:"function",dur:n,name:e.name||e.msg,ph:"X",pid:0,tid:0,ts:e.startMs,profile:!0},e);this._info(r)}else console.warn("infoProfile need object data, include startMs")}},{key:"reset",value:function(){var e;this._stats=(e={},(0,a._x)(e,De,[]),(0,a._x)(e,"media",{}),e)}},{key:"getStats",value:function(){for(var e=this.player,i=e.media,n=[],r=0;r<i.buffered.length;r++)n.push({start:i.buffered.start(r),end:i.buffered.end(r)});var o={currentTime:i.currentTime,readyState:i.readyState,buffered:n,paused:i.paused,ended:i.ended};return this._stats.media=o,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){var e=this._stats[De],i=e.map(function(n){var r=n.payload.data,o="";try{r instanceof Error?o=r.msg:r!==void 0&&(o=JSON.stringify(r))}catch(c){console.log("err",c)}return"[".concat(n.timeFormat,"] : ").concat(n.payload.msg," ").concat(o," ")});return i}},{key:"_getProfile",value:function(){var e={traceEvents:[]},i=this._stats[De];return i.forEach(function(n){n.payload.profile&&e.traceEvents.push(n.payload)}),e}}],[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}]),s}(F.ZP),vt=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){var t;(0,a.PA)(this,s);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=l.call.apply(l,[this].concat(i)),(0,a._x)((0,a.Lc)(t),"onGapJump",function(){var r=(0,a.Lc)(t),o=r.player,c=r.config;if(o.media.readyState!==HTMLMediaElement.HAVE_NOTHING){if(o.media.seeking){if(!t.seekingEventReceived)return}else t.seekingEventReceived=!1;if(!(o.media.paused&&o.media.currentTime!==0&&t.hasPlayed)){var g=o.media.buffered,v=c.smallGapLimit||.5,_=c.gapDetectionThreshold||.3,b=o.media.currentTime,D=t._getIndex(g,b,_);if(!(D===null||D===0)){console.log("GapJump  bufferRange ",g.start(D),g.end(D));var M=g.start(D)+.1,Z=o.media.duration;if(!(M>Z)){var G=M-b,Y=G<=v;G<s.BROWSER_GAP_TOLERANCE||Y&&(c.useGapJump!==!1&&(o.media.currentTime=t.isSafari?M+.1:M),t.player&&t.player.emit("detectGap"),console.log("gapJump gapIndex",D," isGapSamll:",Y," currentTime:",o.media.currentTime," jumpSize:",b-o.media.currentTime),M!==.08&&o&&o.emit("log",{type:"oneevent",end_type:"gap",vid:o.config.vid,ext:{video_postion:Math.floor(M*1e3)}}))}}}}}),t}return(0,a.qH)(s,[{key:"afterCreate",value:function(){var e=this,i=this.config.useGapJump;i!==!1&&(this.hasPlayed=!1,this.seekingEventReceived=!1,this.isSafari=/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),this.on(u.WAITING,this.onGapJump),this.on(u.PLAY,function(){e.hasPlayed=!0}),this.on(u.SEEKING,function(){e.seekingEventReceived=!0}))}},{key:"_getIndex",value:function(e,i,n){if(!e||!e.length||e.length===1&&e.end(0)-e.start(0)<1e-6)return null;for(var r=this._getBuffered(e),o=null,c=0;c<r.length;c++){var g=r[c];if(g.start>i&&(c===0||r[c-1].end-i<=n)){o=c;break}}return o}},{key:"_getBuffered",value:function(e){if(!e)return[];for(var i=[],n=0;n<e.length;n++)i.push({start:e.start(n),end:e.end(n)});return i}}],[{key:"pluginName",get:function(){return"gapJump"}},{key:"defaultConfig",get:function(){return{useGapJump:!1,smallGapLimit:.5,gapDetectionThreshold:.3}}}]),s}(y.ZP);vt.BROWSER_GAP_TOLERANCE=.001;var Pi=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){var t;(0,a.PA)(this,s);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=l.call.apply(l,[this].concat(i)),(0,a._x)((0,a.Lc)(t),"onWaiting",function(){var r=(0,a.Lc)(t),o=r.config;t.jumpCnt>o.jumpCntMax||t.timer||o.useWaitingTimeoutJump===!1||(t.timer=setTimeout(t.onJump,o.waitingTime*1e3))}),(0,a._x)((0,a.Lc)(t),"onJump",function(){var r=(0,a.Lc)(t),o=r.player,c=r.config;if(clearTimeout(t.timer),t.timer=null,!(t.jumpCnt>c.jumpCntMax||c.useWaitingTimeoutJump===!1)&&!(o.media.paused&&o.media.currentTime!==0&&t.hasPlayed)){t.jumpSize=c.jumpSize*(t.jumpCnt+1),t.jumpCnt===c.jumpSize&&t.jumpSize<6&&(t.jumpSize=6);var g=o.currentTime+t.jumpSize,v=o.media.duration;g>v||(console.log("waitintTimeout, currentTime:",o.currentTime,", jumpTo:",g),t.jumpCnt++,o.currentTime=g)}}),t}return(0,a.qH)(s,[{key:"afterCreate",value:function(){var e=this,i=this.config,n=i.useWaitingTimeoutJump,r=i.jumpSize;n!==!1&&(this.hasPlayed=!1,this.jumpCnt=0,this.timer=null,this.jumpSize=r,this.on(u.WAITING,this.onWaiting),this.on([u.PLAYING,u.CANPLAY],function(){clearTimeout(e.timer),e.timer=null,e.jumpSize=e.config.jumpSize}),this.on(u.PLAY,function(){e.hasPlayed=!0}))}}],[{key:"pluginName",get:function(){return"waitingTimeoutJump"}},{key:"defaultConfig",get:function(){return{useWaitingTimeoutJump:!1,waitingTime:15,jumpSize:2,jumpCntMax:4}}}]),s}(y.ZP),Se="cdn",We=["cdn"],Ti=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){var t;(0,a.PA)(this,s);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return t=l.call.apply(l,[this].concat(i)),(0,a._x)((0,a.Lc)(t),"getSpeed",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Se;if(!t.speedListCache||!t.speedListCache[r]||t.speedListCache[r].length<=0)return 0;var o=0;return t.speedListCache[r].map(function(c){o+=c}),Math.floor(o/t.speedListCache[r].length)}),(0,a._x)((0,a.Lc)(t),"startTimer",function(){h.ZP.isMSE(t.player.video)||(t.initSpeedList(),t.cnt=0,t.timer=setTimeout(t.testSpeed,t.config.testTimeStep))}),(0,a._x)((0,a.Lc)(t),"initSpeedList",function(){t.speedListCache={},We.forEach(function(r){t.speedListCache[r]=[]})}),(0,a._x)((0,a.Lc)(t),"_onRealSpeedChange",function(r){r.speed&&t.appendList(r.speed,r.type||Se)}),(0,a._x)((0,a.Lc)(t),"testSpeed",function(){if(clearTimeout(t.timer),t.timer=null,!(!t.player||!t.config.openSpeed)){var r=t.config,o=r.url,c=r.loadSize,g=r.testCnt,v=r.testTimeStep,_=o+(o.indexOf("?")<0?"?testst=":"&testst=")+Date.now();if(!(t.cnt>=g)){t.cnt++;try{var b=new Date().getTime(),D=null,M=new XMLHttpRequest;t.xhr=M,M.open("GET",_);var Z={},G=Math.floor(Math.random()*10);Z.Range="bytes="+G+"-"+(c+G),Z&&Object.keys(Z).forEach(function(Y){M.setRequestHeader(Y,Z[Y])}),M.onreadystatechange=function(){if(M.readyState===4){t.xhr=null,D=new Date().getTime();var Y=M.getResponseHeader("Content-Length")/1024*8,z=Math.round(Y*1e3/(D-b));t.appendList(z),t.timer=setTimeout(t.testSpeed,v)}},M.send()}catch(Y){console.error(Y)}}}}),(0,a._x)((0,a.Lc)(t),"appendList",function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Se;if(!(!t.speedListCache||!t.speedListCache[o])){var c=t.config.saveSpeedMax;t.speedListCache[o].length>=c&&t.speedListCache[o].shift(),t.speedListCache[o].push(r);var g=(0,a.Lc)(t),v=g.player;v&&(o===Se?v.realTimeSpeed=r:v[t.getSpeedName("realTime",o)]=r),t.updateSpeed(o)}}),(0,a._x)((0,a.Lc)(t),"updateSpeed",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Se,o=t.getSpeed(r),c=(0,a.Lc)(t),g=c.player;if(g)if(r===Se)(!g.avgSpeed||o!==g.avgSpeed)&&(g.avgSpeed=o,g.emit(u.DOWNLOAD_SPEED_CHANGE,{speed:o,realTimeSpeed:g.realTimeSpeed}));else{var v=t.getSpeedName("avg",r);(!g[v]||o!==g[v])&&(g[v]=o,g.emit(u.DOWNLOAD_SPEED_CHANGE,{speed:o,realTimeSpeed:g.realTimeSpeed}))}}),t}return(0,a.qH)(s,[{key:"afterCreate",value:function(){var e=this.config,i=e.openSpeed,n=e.addSpeedTypeList;(n==null?void 0:n.length)>0&&We.push.apply(We,(0,a.u)(n)),this.initSpeedList(),this.on("real_time_speed",this._onRealSpeedChange),this.timer=null,this.cnt=0,this.xhr=null,i&&this.on([u.LOADED_DATA,u.REPLAY],this.startTimer)}},{key:"getSpeedName",value:function(e,i){return e+"Speed"+i.toUpperCase()}},{key:"openSpeed",get:function(){return this.config.openSpeed},set:function(e){if(this.config.openSpeed=e,!e&&this.timer){clearTimeout(this.timer),this.timer=null;return}if(this.config.openSpeed){if(this.timer)return;this.timer=setTimeout(this.testSpeed,this.config.testTimeStep)}}},{key:"destroy",value:function(){var e=this;this.off("real_time_speed",this._onRealSpeedChange),this.off([u.LOADED_DATA,u.REPLAY],this.startTimer),We.forEach(function(i){e.speedListCache&&e.speedListCache[i]&&(e.speedListCache[i]=[])}),this.speedListCache&&(this.speedListCache={}),clearTimeout(this.timer),this.timer=null,this.xhr&&this.xhr.readyState!==4&&(this.xhr.cancel&&this.xhr.cancel(),this.xhr=null)}}],[{key:"pluginName",get:function(){return"testspeed"}},{key:"defaultConfig",get:function(){return{openSpeed:!1,testCnt:3,loadSize:200*1024,testTimeStep:3e3,url:"",saveSpeedMax:5,addSpeedTypeList:[]}}}]),s}(y.ZP),ki=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){return(0,a.PA)(this,s),l.apply(this,arguments)}return(0,a.qH)(s,[{key:"afterCreate",value:function(){var e=this,i=this.player,n=this.config;if(this.timer=null,this._lastDecodedFrames=0,this._currentStuckCount=0,this._lastCheckPoint=null,this._payload=[],!n.disabled){var r=i.media.getVideoPlaybackQuality;r&&(this.on(u.PLAY,function(){e._startTick()}),this.on(u.PAUSE,function(){e._stopTick()}),this.on(u.ENDED,function(){e._stopTick()}),this.on(u.EMPTIED,function(){e._stopTick()}))}}},{key:"_startTick",value:function(){var e=this;this._stopTick(),this._timer=setTimeout(function(){e._checkDecodeFPS(),e._startTick()},this.config.tick)}},{key:"_stopTick",value:function(){clearTimeout(this._timer),this._timer=null}},{key:"_checkStuck",value:function(e,i,n,r){var o=this.player.media,c=document.hidden,g=o.paused;if(typeof c=="boolean"&&!c&&!g){for(var v=o.currentTime,_=o.buffered,b=!1,D=[],M=0;M<_.length;M++){var Z=_.start(M),G=_.end(M);if(D.push({start:Z,end:G}),Z<=v&&v<=G-1){b=!0;break}}o.readyState===4&&b&&(this._currentStuckCount>this.config.stuckCount?(this.emit(u.FPS_STUCK,this._payload),this._reset()):e<=this.config.reportFrame?(this._currentStuckCount++,this._payload.push({bufs:D,currentTime:o.currentTime,curDecodedFrames:e,totalVideoFrames:i,droppedVideoFrames:n,checkInterval:r})):this._reset())}}},{key:"_reset",value:function(){this._payload=[],this._currentStuckCount=0}},{key:"_checkDecodeFPS",value:function(){if(this.player.media){var e=this.player.media.getVideoPlaybackQuality(),i=e.totalVideoFrames,n=e.droppedVideoFrames,r=performance.now();if(i&&this._lastCheckPoint){var o=i-this._lastDecodedFrames,c=r-this._lastCheckPoint;this._checkStuck(o,i,n,c)}this._lastDecodedFrames=i,this._lastCheckPoint=r}}},{key:"destroy",value:function(){this._stopTick()}}],[{key:"pluginName",get:function(){return"FpsDetect"}},{key:"defaultConfig",get:function(){return{disabled:!1,tick:1e3,stuckCount:3,reportFrame:0}}}]),s}(y.ZP);le.use(Ci);var bi=(0,a.qH)(function d(l,s){var t,e,i;(0,a.PA)(this,d);var n=s&&s.isMobileSimulateMode==="mobile",r=s.isLive,o=r?[]:[Nt,vi,gi,Wt],c=[].concat(o,[Mt,Bt,Kt,Qt,oi,ui,ni,ri,Yt,qt]),g=[Ye,ze,yt,Dt,_t,hi,fi,pi,Tt];this.plugins=[Ei,Ve].concat((0,a.u)(c),g,[vt,Pi]);var v=n?"mobile":S.device;switch(v){case"pc":(t=this.plugins).push.apply(t,[ct,Je,ft,Ti,ki]);break;case"mobile":(e=this.plugins).push.apply(e,[wt]);break;default:(i=this.plugins).push.apply(i,[ct,Je,ft])}(S.os.isIpad||v==="pc")&&this.plugins.push(_i),S.os.isIpad&&this.plugins.push(Je),this.ignores=[],this.i18n=[]}),pe=function(d){(0,a.XW)(s,d);var l=(0,a.WY)(s);function s(){return(0,a.PA)(this,s),l.apply(this,arguments)}return(0,a.qH)(s)}(Ae);(0,a._x)(pe,"defaultPreset",bi),(0,a._x)(pe,"Util",h.ZP),(0,a._x)(pe,"Sniffer",S),(0,a._x)(pe,"Errors",f),(0,a._x)(pe,"Events",u),(0,a._x)(pe,"Plugin",y.ZP),(0,a._x)(pe,"BasePlugin",F.ZP),(0,a._x)(pe,"I18N",le),(0,a._x)(pe,"STATE_CLASS",E)},93112:function(se,Q,H){"use strict";H.d(Q,{ZP:function(){return U}});var a=H(40798),j=H(64389),X=H(42684),h=H(42970);function W(S,L){X.Z.logError("[".concat(S,"] event or callback cant be undefined or null when call ").concat(L))}var U=function(){function S(L){(0,a.PA)(this,S),j.ZP.checkIsFunction(this.beforeCreate)&&this.beforeCreate(L),(0,h.ZP)(this),this.__args=L,this.__events={},this.__onceEvents={},this.config=L.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(L)}return(0,a.qH)(S,[{key:"beforeCreate",value:function(C){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(C){this.player=C.player,this.playerConfig=C.player&&C.player.config,this.pluginName=C.pluginName?C.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=C.player&&C.player.logger}},{key:"updateLang",value:function(C){C||(C=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var C=j.ZP.checkTouchSupport()?"touch":"mouse";return this.playerConfig&&(this.playerConfig.domEventType==="touch"||this.playerConfig.domEventType==="mouse")&&(C=this.playerConfig.domEventType),C}},{key:"on",value:function(C,w){var f=this;if(!C||!w||!this.player){W(this.pluginName,"plugin.on(event, callback)");return}typeof C=="string"?(this.__events[C]=w,this.player.on(C,w)):Array.isArray(C)&&C.forEach(function(u){f.__events[u]=w,f.player.on(u,w)})}},{key:"once",value:function(C,w){var f=this;if(!C||!w||!this.player){W(this.pluginName,"plugin.once(event, callback)");return}typeof C=="string"?(this.__onceEvents[C]=w,this.player.once(C,w)):Array.isArray(C)&&C.forEach(function(u){f.__onceEvents[u]=w,f.player.once(C,w)})}},{key:"off",value:function(C,w){var f=this;if(!C||!w||!this.player){W(this.pluginName,"plugin.off(event, callback)");return}typeof C=="string"?(delete this.__events[C],this.player.off(C,w)):Array.isArray(C)&&C.forEach(function(u){delete f.__events[C],f.player.off(u,w)})}},{key:"offAll",value:function(){var C=this;["__events","__onceEvents"].forEach(function(w){Object.keys(C[w]).forEach(function(f){C[w][f]&&C.off(f,C[w][f]),f&&delete C[w][f]})}),this.__events={},this.__onceEvents={}}},{key:"emit",value:function(C){var w;if(this.player){for(var f=arguments.length,u=new Array(f>1?f-1:0),p=1;p<f;p++)u[p-1]=arguments[p];(w=this.player).emit.apply(w,[C].concat(u))}}},{key:"emitUserAction",value:function(C,w){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.player){var u=(0,a.Zj)((0,a.Zj)({},f),{},{pluginName:this.pluginName});this.player.emitUserAction(C,w,u)}}},{key:"hook",value:function(C,w){return h.z3.call.apply(h.z3,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(C,w){for(var f=arguments.length,u=new Array(f>2?f-2:0),p=2;p<f;p++)u[p-2]=arguments[p];return h.xn.call.apply(h.xn,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(C,w){for(var f=arguments.length,u=new Array(f>2?f-2:0),p=2;p<f;p++)u[p-2]=arguments[p];return h.v8.call.apply(h.v8,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(C){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if(this.player)return f&&(w.pluginName=f),this.player.registerPlugin({plugin:C,options:w})}},{key:"getPlugin",value:function(C){return this.player?this.player.getPlugin(C):null}},{key:"__destroy",value:function(){var C=this,w=this.player,f=this.pluginName;this.offAll(),j.ZP.clearAllTimers(this),j.ZP.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map(function(u){C[u]=null}),w.unRegisterPlugin(f),(0,h.Qs)(this)}}],[{key:"defineGetterOrSetter",value:function(C,w){for(var f in w)Object.prototype.hasOwnProperty.call(w,f)&&Object.defineProperty(C,f,w[f])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),S}()},42970:function(se,Q,H){"use strict";H.d(Q,{Qs:function(){return C},ZP:function(){return L},bR:function(){return U},g2:function(){return S},rl:function(){return w},v8:function(){return W},xn:function(){return h},z3:function(){return X}});var a=H(40798);function j(f,u,p){for(var m=arguments.length,x=new Array(m>3?m-3:0),k=3;k<m;k++)x[k-3]=arguments[k];var N=u.call.apply(u,[f].concat(x));!p||typeof p!="function"||(N&&N.then?N.then(function(){for(var R=arguments.length,I=new Array(R),P=0;P<R;P++)I[P]=arguments[P];p.call.apply(p,[f].concat(I))}):p.call.apply(p,[f].concat(x)))}function X(f,u){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[f]&&(this.__hooks[f]=null),function(){var m=arguments,x=this;if(p.pre)try{var k;(k=p.pre).call.apply(k,[this].concat(Array.prototype.slice.call(arguments)))}catch(I){throw I.message="[pluginName: ".concat(this.pluginName,":").concat(f,":pre error] >> ").concat(I.message),I}if(this.__hooks&&this.__hooks[f])try{var N,R=(N=this.__hooks[f]).call.apply(N,[this,this].concat(Array.prototype.slice.call(arguments)));R?R.then?R.then(function(I){I!==!1&&j.apply(void 0,[x,u,p.next].concat((0,a.u)(m)))}).catch(function(I){throw I}):j.apply(void 0,[this,u,p.next].concat(Array.prototype.slice.call(arguments))):R===void 0&&j.apply(void 0,[this,u,p.next].concat(Array.prototype.slice.call(arguments)))}catch(I){throw I.message="[pluginName: ".concat(this.pluginName,":").concat(f,"] >> ").concat(I.message),I}else j.apply(void 0,[this,u,p.next].concat(Array.prototype.slice.call(arguments)))}.bind(this)}function h(f,u){var p=this.__hooks;if(p)return p.hasOwnProperty(f)?(p&&(p[f]=u),!0):(console.warn("has no supported hook which name [".concat(f,"]")),!1)}function W(f,u){var p=this.__hooks;p&&delete p[f]}function U(f){if(!(!this.plugins||!this.plugins[f.toLowerCase()])){for(var u=this.plugins[f.toLowerCase()],p=arguments.length,m=new Array(p>1?p-1:0),x=1;x<p;x++)m[x-1]=arguments[x];return u.useHooks&&u.useHooks.apply(u,m)}}function S(f){if(!(!this.plugins||!this.plugins[f.toLowerCase()])){var u=this.plugins[f.toLowerCase()];if(u){for(var p=arguments.length,m=new Array(p>1?p-1:0),x=1;x<p;x++)m[x-1]=arguments[x];return u.removeHooks&&u.removeHooks.apply(u,m)}}}function L(f){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];f.__hooks={},u&&u.map(function(p){f.__hooks[p]=null}),Object.defineProperty(f,"hooks",{get:function(){return f.__hooks&&Object.keys(f.__hooks).map(function(m){if(f.__hooks[m])return m})}})}function C(f){f.__hooks=null}function w(f,u,p){for(var m=arguments.length,x=new Array(m>3?m-3:0),k=3;k<m;k++)x[k-3]=arguments[k];if(f.__hooks&&f.__hooks[u]){var N,R=(N=f.__hooks[u]).call.apply(N,[f,f].concat(x));if(R&&R.then)R.then(function(I){return I===!1?null:p.call.apply(p,[f,f].concat(x))}).catch(function(I){console.warn("[runHooks]".concat(u," reject"),I.message)});else if(R!==!1)return p.call.apply(p,[f,f].concat(x))}else return p.call.apply(p,[f,f].concat(x))}},44086:function(se,Q,H){"use strict";H.d(Q,{ZP:function(){return x},kd:function(){return L}});var a=H(40798),j=H(93112),X=H(24490),h=H.n(X),W=H(42684),U=H(64389),S={CONTROLS:"controls",ROOT:"root"},L={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};function C(k){return k?k.indexOf&&/^(?:http|data:|\/)/.test(k):!1}function w(k,N){return(0,a.Ac)(k)==="object"&&k.class&&typeof k.class=="string"?"".concat(N," ").concat(k.class):N}function f(k,N){return(0,a.Ac)(k)==="object"&&k.attr&&(0,a.Ac)(k.attr)==="object"&&Object.keys(k.attr).map(function(R){N[R]=k.attr[R]}),N}function u(k,N){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},P=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",y=null;if(k instanceof window.Element)return U.ZP.addClass(k,R),Object.keys(I).map(function(F){k.setAttribute(F,I[F])}),k;if(C(k)||C(k.url))return I.src=C(k)?k:k.url||"",y=U.ZP.createDom(k.tag||"img","",I,"xg-img ".concat(R)),y;if(typeof k=="function")try{return y=k(),y instanceof window.Element?(U.ZP.addClass(y,R),Object.keys(I).map(function(F){y.setAttribute(F,I[F])}),y):(W.Z.logWarn("warn>>icons.".concat(N," in config of plugin named [").concat(P,"] is a function mast return an Element Object")),null)}catch(F){return W.Z.logError("Plugin named [".concat(P,"]:createIcon"),F),null}return typeof k=="string"?U.ZP.createDomFromHtml(k,I,R):(W.Z.logWarn("warn>>icons.".concat(N," in config of plugin named [").concat(P,"] is invalid")),null)}function p(k,N){var R=N.config.icons||N.playerConfig.icons;Object.keys(k).map(function(I){var P=k[I],y=P&&P.class?P.class:"",F=P&&P.attr?P.attr:{},V=null;R&&R[I]&&(y=w(R[I],y),F=f(R[I],F),V=u(R[I],I,y,F,N.pluginName)),!V&&P&&(V=u(P.icon?P.icon:P,F,y,{},N.pluginName)),N.icons[I]=V})}function m(k,N){Object.keys(k).map(function(R){Object.defineProperty(N.langText,R,{get:function(){var P=N.lang,y=N.i18n;return y[R]?y[R]:k[R]&&k[R][P]||""}})})}var x=function(k){(0,a.XW)(R,k);var N=(0,a.WY)(R);function R(){var I,P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,a.PA)(this,R),I=N.call(this,P),I.__delegates=[],I}return(0,a.qH)(R,[{key:"__init",value:function(P){if((0,a.U2)((0,a.IP)(R.prototype),"__init",this).call(this,P),!!P.root){var y=P.root,F=null;this.icons={},this.root=null,this.parent=null;var V=this.registerIcons()||{};p(V,this),this.langText={};var B=this.registerLanguageTexts()||{};m(B,this);var T="";try{T=this.render()}catch(E){throw W.Z.logError("Plugin:".concat(this.pluginName,":render"),E),new Error("Plugin:".concat(this.pluginName,":render:").concat(E.message))}if(T)F=R.insert(T,y,P.index),F.setAttribute("data-index",P.index);else if(P.tag)F=U.ZP.createDom(P.tag,"",P.attr,P.name),F.setAttribute("data-index",P.index),y.appendChild(F);else return;this.root=F,this.parent=y;var A=this.config.attr||{},O=this.config.style||{};this.setAttr(A),this.setStyle(O),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var P=this;if(this.root){this._children=[];var y=this.children();y&&(0,a.Ac)(y)==="object"&&Object.keys(y).length>0&&Object.keys(y).map(function(F){var V=F,B=y[V],T={root:P.root},A,O;typeof B=="function"?(A=P.config[V]||{},O=B):(0,a.Ac)(B)==="object"&&typeof B.plugin=="function"&&(A=B.options?U.ZP.deepCopy(P.config[V]||{},B.options):P.config[V]||{},O=B.plugin),T.config=A,A.index!==void 0&&(T.index=A.index),A.root&&(T.root=A.root),P.registerPlugin(O,T,V)})}}},{key:"updateLang",value:function(P){P||(P=this.lang);function y(T,A){for(var O=0;O<T.children.length;O++)T.children[O].children.length>0?y(T.children[O],A):A(T.children[O])}var F=this.root,V=this.i18n,B=this.langText;F&&y(F,function(T){var A=T.getAttribute&&T.getAttribute("lang-key");if(A){var O=V[A.toUpperCase()]||B[A];O&&(T.innerHTML=typeof O=="function"?O(P):O)}})}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(P){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",F=this.i18n||{},V=this.langText;P.setAttribute&&P.setAttribute("lang-key",y);var B=F[y]||V[y]||"";B&&(P.innerHTML=B)}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(P){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";y.root=y.root||this.root;var V=(0,a.U2)((0,a.IP)(R.prototype),"registerPlugin",this).call(this,P,y,F);return this._children.push(V),V}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(P){if(this.root)return this.root.querySelector(P)}},{key:"bind",value:function(P,y,F){var V=this;if(arguments.length<3&&typeof y=="function")Array.isArray(P)?P.forEach(function(T){V.bindEL(T,y)}):this.bindEL(P,y);else{var B=R.delegate.call(this,this.root,P,y,F);this.__delegates=this.__delegates.concat(B)}}},{key:"unbind",value:function(P,y){var F=this;if(arguments.length<3&&typeof y=="function")Array.isArray(P)?P.forEach(function(T){F.unbindEL(T,y)}):this.unbindEL(P,y);else for(var V="".concat(P,"_").concat(y),B=0;B<this.__delegates.length;B++)if(this.__delegates[B].key===V){this.__delegates[B].destroy(),this.__delegates.splice(B,1);break}}},{key:"setStyle",value:function(P,y){var F=this;if(this.root){if(U.ZP.typeOf(P)==="String")return this.root.style[P]=y;U.ZP.typeOf(P)==="Object"&&Object.keys(P).map(function(V){F.root.style[V]=P[V]})}}},{key:"setAttr",value:function(P,y){var F=this;if(this.root){if(U.ZP.typeOf(P)==="String")return this.root.setAttribute(P,y);U.ZP.typeOf(P)==="Object"&&Object.keys(P).map(function(V){F.root.setAttribute(V,P[V])})}}},{key:"setHtml",value:function(P,y){this.root&&(this.root.innerHTML=P,typeof y=="function"&&y())}},{key:"bindEL",value:function(P,y){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.root&&"on".concat(P)in this.root&&typeof y=="function"&&this.root.addEventListener(P,y,F)}},{key:"unbindEL",value:function(P,y){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.root&&"on".concat(P)in this.root&&typeof y=="function"&&this.root.removeEventListener(P,y,F)}},{key:"show",value:function(P){if(this.root){this.root.style.display=P!==void 0?P:"block";var y=window.getComputedStyle(this.root,null),F=y.getPropertyValue("display");if(F==="none")return this.root.style.display="block"}}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(P,y){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!y||!(y instanceof window.Element))return null;try{return typeof P=="string"?this.find(P).appendChild(y):P.appendChild(y)}catch(F){return W.Z.logError("Plugin:appendChild",F),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var P=this,y=this.player;this.__delegates.map(function(F){F.destroy()}),this.__delegates=[],this._children instanceof Array&&(this._children.map(function(F){y.unRegisterPlugin(F.pluginName)}),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),(0,a.U2)((0,a.IP)(R.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map(function(F){P[F]=null})}}],[{key:"insert",value:function(P,y){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,V=y.children.length,B=Number(F),T=P instanceof window.Node;if(V){for(var A=0,O=null,E="";A<V;A++){O=y.children[A];var ee=Number(O.getAttribute("data-index"));if(ee>=B){E="beforebegin";break}else ee<B&&(E="afterend")}return T?E==="afterend"?y.appendChild(P):y.insertBefore(P,O):O.insertAdjacentHTML(E,P),E==="afterend"?y.children[y.children.length-1]:y.children[A]}else return T?y.appendChild(P):y.insertAdjacentHTML("beforeend",P),y.children[y.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(P,y,F,V){var B=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,T=[];if(P instanceof window.Node&&typeof V=="function")if(Array.isArray(F))F.forEach(function(O){var E=h()(P,y,O,V,B);E.key="".concat(y,"_").concat(O),T.push(E)});else{var A=h()(P,y,F,V,B);A.key="".concat(y,"_").concat(F),T.push(A)}return T}},{key:"ROOT_TYPES",get:function(){return S}},{key:"POSITIONS",get:function(){return L}}]),R}(j.ZP)},42684:function(se,Q,H){"use strict";H.d(Q,{Z:function(){return h},w:function(){return W}});var a=typeof window!="undefined"&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,j={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},X="%c[xgplayer]",h={config:{debug:a?3:0},logInfo:function(S){for(var L,C=arguments.length,w=new Array(C>1?C-1:0),f=1;f<C;f++)w[f-1]=arguments[f];this.config.debug>=3&&(L=console).log.apply(L,[X,j.info,S].concat(w))},logWarn:function(S){for(var L,C=arguments.length,w=new Array(C>1?C-1:0),f=1;f<C;f++)w[f-1]=arguments[f];this.config.debug>=1&&(L=console).warn.apply(L,[X,j.warn,S].concat(w))},logError:function(S){var L;if(!(this.config.debug<1)){for(var C=this.config.debug>=2?"trace":"error",w=arguments.length,f=new Array(w>1?w-1:0),u=1;u<w;u++)f[u-1]=arguments[u];(L=console)[C].apply(L,[X,j.error,S].concat(f))}}};function W(U){U.logInfo=h.logInfo.bind(U),U.logWarn=h.logWarn.bind(U),U.logError=h.logError.bind(U)}},64389:function(se,Q,H){"use strict";H.d(Q,{F7:function(){return w},ZP:function(){return h},VQ:function(){return C},P2:function(){return L}});var a=H(40798),j=H(42684),X=function(){function f(u){(0,a.PA)(this,f),this.bufferedList=u}return(0,a.qH)(f,[{key:"start",value:function(p){return this.bufferedList[p].start}},{key:"end",value:function(p){return this.bufferedList[p].end}},{key:"length",get:function(){return this.bufferedList.length}}]),f}(),h={};h.createDom=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"div",u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",x=document.createElement(f);return x.className=m,x.innerHTML=u,Object.keys(p).forEach(function(k){var N=k,R=p[k];f==="video"||f==="audio"||f==="live-video"?R&&x.setAttribute(N,R):x.setAttribute(N,R)}),x},h.createDomFromHtml=function(f){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";try{var m=document.createElement("div");m.innerHTML=f;var x=m.children;return m=null,x.length>0?(x=x[0],p&&h.addClass(x,p),u&&Object.keys(u).forEach(function(k){x.setAttribute(k,u[k])}),x):null}catch(k){return j.Z.logError("util.createDomFromHtml",k),null}},h.hasClass=function(f,u){if(!f||!u)return!1;try{return Array.prototype.some.call(f.classList,function(m){return m===u})}catch(m){var p=f.className&&(0,a.Ac)(f.className)==="object"?f.getAttribute("class"):f.className;return p&&!!p.match(new RegExp("(\\s|^)"+u+"(\\s|$)"))}},h.addClass=function(f,u){if(!(!f||!u))try{u.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(p){p&&f.classList.add(p)})}catch(p){h.hasClass(f,u)||(f.className&&(0,a.Ac)(f.className)==="object"?f.setAttribute("class",f.getAttribute("class")+" "+u):f.className+=" "+u)}},h.removeClass=function(f,u){if(!(!f||!u))try{u.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(p){p&&f.classList.remove(p)})}catch(p){h.hasClass(f,u)&&u.split(/\s+/g).forEach(function(m){var x=new RegExp("(\\s|^)"+m+"(\\s|$)");f.className&&(0,a.Ac)(f.className)==="object"?f.setAttribute("class",f.getAttribute("class").replace(x," ")):f.className=f.className.replace(x," ")})}},h.toggleClass=function(f,u){f&&u.split(/\s+/g).forEach(function(p){h.hasClass(f,p)?h.removeClass(f,p):h.addClass(f,p)})},h.classNames=function(){for(var f=arguments,u=[],p=function(k){h.typeOf(f[k])==="String"?u.push(f[k]):h.typeOf(f[k])==="Object"&&Object.keys(f[k]).map(function(N){f[k][N]&&u.push(N)})},m=0;m<arguments.length;m++)p(m);return u.join(" ")},h.findDom=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,u=arguments.length>1?arguments[1]:void 0,p;try{p=f.querySelector(u)}catch(m){j.Z.logError("util.findDom",m),u.indexOf("#")===0&&(p=f.getElementById(u.slice(1)))}return p},h.getCss=function(f,u){return f.currentStyle?f.currentStyle[u]:document.defaultView.getComputedStyle(f,!1)[u]},h.padStart=function(f,u,p){for(var m=String(p),x=u>>0,k=Math.ceil(x/m.length),N=[],R=String(f);k--;)N.push(m);return N.join("").substring(0,x-R.length)+R},h.format=function(f){if(window.isNaN(f))return"";f=Math.round(f);var u=h.padStart(Math.floor(f/3600),2,0),p=h.padStart(Math.floor((f-u*3600)/60),2,0),m=h.padStart(Math.floor(f-u*3600-p*60),2,0);return(u==="00"?[p,m]:[u,p,m]).join(":")},h.event=function(f){if(f.touches){var u=f.touches[0]||f.changedTouches[0];f.clientX=u.clientX||0,f.clientY=u.clientY||0,f.offsetX=u.pageX-u.target.offsetLeft,f.offsetY=u.pageY-u.target.offsetTop}f._target=f.target||f.srcElement},h.typeOf=function(f){return Object.prototype.toString.call(f).match(/([^\s.*]+)(?=]$)/g)[0]},h.deepCopy=function(f,u){if(h.typeOf(u)==="Object"&&h.typeOf(f)==="Object")return Object.keys(u).forEach(function(p){h.typeOf(u[p])==="Object"&&!(u[p]instanceof Node)?f[p]===void 0||f[p]===void 0?f[p]=u[p]:h.deepCopy(f[p],u[p]):h.typeOf(u[p])==="Array"?f[p]=h.typeOf(f[p])==="Array"?f[p].concat(u[p]):u[p]:f[p]=u[p]}),f},h.deepMerge=function(f,u){return Object.keys(u).map(function(p){if(h.typeOf(u[p])==="Array"&&h.typeOf(f[p])==="Array"){if(h.typeOf(f[p])==="Array"){var m;(m=f[p]).push.apply(m,(0,a.u)(u[p]))}}else h.typeOf(f[p])===h.typeOf(u[p])&&f[p]!==null&&h.typeOf(f[p])==="Object"&&!(u[p]instanceof window.Node)?h.deepMerge(f[p],u[p]):u[p]!==null&&(f[p]=u[p])}),f},h.getBgImage=function(f){var u=(f.currentStyle||window.getComputedStyle(f,null)).backgroundImage;if(!u||u==="none")return"";var p=document.createElement("a");return p.href=u.replace(/url\("|"\)/g,""),p.href},h.copyDom=function(f){if(f&&f.nodeType===1){var u=document.createElement(f.tagName);return Array.prototype.forEach.call(f.attributes,function(p){u.setAttribute(p.name,p.value)}),f.innerHTML&&(u.innerHTML=f.innerHTML),u}else return""},h.setInterval=function(f,u,p,m){f._interval[u]||(f._interval[u]=window.setInterval(p.bind(f),m))},h.clearInterval=function(f,u){clearInterval(f._interval[u]),f._interval[u]=null},h.setTimeout=function(f,u,p){f._timers||(f._timers=[]);var m=setTimeout(function(){u(),h.clearTimeout(f,m)},p);return f._timers.push(m),m},h.clearTimeout=function(f,u){var p=f._timers;if(h.typeOf(p)==="Array"){for(var m=0;m<p.length;m++)if(p[m]===u){p.splice(m,1),clearTimeout(u);break}}else clearTimeout(u)},h.clearAllTimers=function(f){var u=f._timers;h.typeOf(u)==="Array"&&(u.map(function(p){clearTimeout(p)}),f._timerIds=[])},h.createImgBtn=function(f,u,p,m){var x=h.createDom("xg-".concat(f),"",{},"xgplayer-".concat(f,"-img"));if(x.style.backgroundImage='url("'.concat(u,'")'),p&&m){var k,N,R;["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(I){return p.indexOf(I)>-1&&m.indexOf(I)>-1?(k=parseFloat(p.slice(0,p.indexOf(I)).trim()),N=parseFloat(m.slice(0,m.indexOf(I)).trim()),R=I,!1):!0}),x.style.width="".concat(k).concat(R),x.style.height="".concat(N).concat(R),x.style.backgroundSize="".concat(k).concat(R," ").concat(N).concat(R),f==="start"?x.style.margin="-".concat(N/2).concat(R," auto auto -").concat(k/2).concat(R):x.style.margin="auto 5px auto 5px"}return x},h.Hex2RGBA=function(f,u){var p=[];if(/^\#[0-9A-F]{3}$/i.test(f)){var m="#";f.replace(/[0-9A-F]/ig,function(x){m+=x+x}),f=m}return/^#[0-9A-F]{6}$/i.test(f)?(f.replace(/[0-9A-F]{2}/ig,function(x){p.push(parseInt(x,16))}),"rgba(".concat(p.join(","),", ").concat(u,")")):"rgba(255, 255, 255, 0.1)"},h.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},h.checkIsFunction=function(f){return f&&typeof f=="function"},h.checkIsObject=function(f){return f!==null&&(0,a.Ac)(f)==="object"},h.hide=function(f){f.style.display="none"},h.show=function(f,u){f.style.display=u||"block"},h.isUndefined=function(f){if(typeof f=="undefined"||f===null)return!0},h.isNotNull=function(f){return f!=null},h.setStyleFromCsstext=function(f,u){if(u)if(h.typeOf(u)==="String"){var p=u.replace(/\s+/g,"").split(";");p.map(function(m){if(m){var x=m.split(":");x.length>1&&(f.style[x[0]]=x[1])}})}else Object.keys(u).map(function(m){f.style[m]=u[m]})};function W(f,u){for(var p=0,m=u.length;p<m;p++)if(f.indexOf(u[p])>-1)return!0;return!1}h.filterStyleFromText=function(f){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],p=f.style.cssText;if(!p)return{};var m=p.replace(/\s+/g,"").split(";"),x={},k={};return m.map(function(N){if(N){var R=N.split(":");R.length>1&&(W(R[0],u)?x[R[0]]=R[1]:k[R[0]]=R[1])}}),f.setAttribute("style",""),Object.keys(k).map(function(N){f.style[N]=k[N]}),x},h.getStyleFromCsstext=function(f){var u=f.style.cssText;if(!u)return{};var p=u.replace(/\s+/g,"").split(";"),m={};return p.map(function(x){if(x){var k=x.split(":");k.length>1&&(m[k[0]]=k[1])}}),m},h.preloadImg=function(f){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(f){var m=new window.Image;m.onload=function(x){m=null,u&&u(x)},m.onerror=function(x){m=null,p&&p(x)},m.src=f}},h.stopPropagation=function(f){f&&f.stopPropagation()},h.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},h.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},h.checkTouchSupport=function(){return"ontouchstart"in window},h.getBuffered2=function(f){for(var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5,p=[],m=0;m<f.length;m++)p.push({start:f.start(m)<.5?0:f.start(m),end:f.end(m)});p.sort(function(I,P){var y=I.start-P.start;return y||P.end-I.end});var x=[];if(u)for(var k=0;k<p.length;k++){var N=x.length;if(N){var R=x[N-1].end;p[k].start-R<u?p[k].end>R&&(x[N-1].end=p[k].end):x.push(p[k])}else x.push(p[k])}else x=p;return new X(x)},h.getEventPos=function(f){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return f.touches&&f.touches.length>0&&(f=f.touches[0]),{x:f.x/u,y:f.y/u,clientX:f.clientX/u,clientY:f.clientY/u,offsetX:f.offsetX/u,offsetY:f.offsetY/u,pageX:f.pageX/u,pageY:f.pageY/u}},h.requestAnimationFrame=function(f){var u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(u)return u(f)},h.getHostFromUrl=function(f){if(h.typeOf(f)!=="String")return"";var u=f.split("/"),p="";return u.length>3&&u[2]&&(p=u[2]),p},h.cancelAnimationFrame=function(f){var u=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;u&&u(f)},h.isMSE=function(f){return!f||!(f instanceof HTMLMediaElement)?!1:/^blob/.test(f.currentSrc)||/^blob/.test(f.src)},h.generateSessionId=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,u=new Date().getTime();try{f=parseInt(f)}catch(m){f=0}u+=f,window.performance&&typeof window.performance.now=="function"&&(u+=parseInt(window.performance.now()));var p="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(m){var x=(u+Math.random()*16)%16|0;return u=Math.floor(u/16),(m==="x"?x:x&3|8).toString(16)});return p},h.createEvent=function(f){var u;return typeof window.Event=="function"?u=new Event(f):(u=document.createEvent("Event"),u.initEvent(f,!0,!0)),u},h.adjustTimeByDuration=function(f,u,p){return!u||!f?f:f>u||p&&f<u?u:f},h.createPositionBar=function(f,u){var p=h.createDom("xg-bar","",{"data-index":-1},f);return u.appendChild(p),p},h.getTransformStyle=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{x:0,y:0,scale:1,rotate:0};return"scale(".concat(f.scale||1,") translate(").concat(f.x||0,"%, ").concat(f.y||0,"%) rotate(").concat(f.rotate||0,"deg)")},h.convertDeg=function(f){return Math.abs(f)<=1?f*360:f%360};function U(f){var u=(0,a.Ac)(f);return f!==null&&(u==="object"||u==="function")}function S(f,u,p){var m,x,k,N,R,I,P=0,y=!1,F=!1,V=!0,B=!u&&u!==0&&typeof window.requestAnimationFrame=="function";if(typeof f!="function")throw new TypeError("Expected a function");u=+u||0,U(p)&&(y=!!p.leading,F="maxWait"in p,k=F?Math.max(+p.maxWait||0,u):k,V="trailing"in p?!!p.trailing:V);function T(q){var oe=m,ue=x;return m=x=void 0,P=q,N=f.apply(ue,oe),N}function A(q,oe){return B?(window.cancelAnimationFrame(R),window.requestAnimationFrame(q)):setTimeout(q,oe)}function O(q){if(B)return window.cancelAnimationFrame(q);clearTimeout(q)}function E(q){return P=q,R=A($,u),y?T(q):N}function ee(q){var oe=q-I,ue=q-P,ve=u-oe;return F?Math.min(ve,k-ue):ve}function te(q){var oe=q-I,ue=q-P;return I===void 0||oe>=u||oe<0||F&&ue>=k}function $(){var q=Date.now();if(te(q))return Ee(q);R=A($,ee(q))}function Ee(q){return R=void 0,V&&m?T(q):(m=x=void 0,N)}function J(){R!==void 0&&O(R),P=0,m=I=x=R=void 0}function xe(){return R===void 0?N:Ee(Date.now())}function ne(){return R!==void 0}function he(){for(var q=Date.now(),oe=te(q),ue=arguments.length,ve=new Array(ue),le=0;le<ue;le++)ve[le]=arguments[le];if(m=ve,x=this,I=q,oe){if(R===void 0)return E(I);if(F)return R=A($,u),T(I)}return R===void 0&&(R=A($,u)),N}return he.cancel=J,he.flush=xe,he.pending=ne,he}function L(f,u,p){var m=!0,x=!0;if(typeof f!="function")throw new TypeError("Expected a function");return U(p)&&(m="leading"in p?!!p.leading:m,x="trailing"in p?!!p.trailing:x),S(f,u,{leading:m,trailing:x,maxWait:u})}function C(){var f=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase();return f==="zh-cn"&&(f="zh"),f}function w(f,u,p){if(f){var m=f.getAttribute(p);return!!(m&&m===u&&(f.tagName==="VIDEO"||f.tagName==="AUDIO"))}}}}]);
