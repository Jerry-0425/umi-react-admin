"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[545],{32864:function(){},17255:function(R,D,C){C.d(D,{Lc:function(){return x},PA:function(){return E},WY:function(){return I},XW:function(){return v},Zj:function(){return O},_x:function(){return y},qH:function(){return S}});function c(l,h){var s=Object.keys(l);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(l);h&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(l,a).enumerable})),s.push.apply(s,i)}return s}function O(l){for(var h=1;h<arguments.length;h++){var s=arguments[h]!=null?arguments[h]:{};h%2?c(Object(s),!0).forEach(function(i){y(l,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach(function(i){Object.defineProperty(l,i,Object.getOwnPropertyDescriptor(s,i))})}return l}function E(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}function L(l,h){for(var s=0;s<h.length;s++){var i=h[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(l,w(i.key),i)}}function S(l,h,s){return h&&L(l.prototype,h),s&&L(l,s),Object.defineProperty(l,"prototype",{writable:!1}),l}function y(l,h,s){return h=w(h),h in l?Object.defineProperty(l,h,{value:s,enumerable:!0,configurable:!0,writable:!0}):l[h]=s,l}function v(l,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(h&&h.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),h&&p(l,h)}function g(l){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},g(l)}function p(l,h){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},p(l,h)}function d(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(l){return!1}}function x(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function b(l,h){if(h&&(typeof h=="object"||typeof h=="function"))return h;if(h!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x(l)}function I(l){var h=d();return function(){var i=g(l),a;if(h){var n=g(this).constructor;a=Reflect.construct(i,arguments,n)}else a=i.apply(this,arguments);return b(this,a)}}function P(l,h){if(typeof l!="object"||l===null)return l;var s=l[Symbol.toPrimitive];if(s!==void 0){var i=s.call(l,h||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(l)}function w(l){var h=P(l,"string");return typeof h=="symbol"?h:String(h)}},69124:function(R,D,C){C.d(D,{Z:function(){return h}});var c=C(17255),O=function(s){var i=s.data,a=s.options,n=s.ctx,t=s.h,e=s.w,r=i.length>a.count?a.count:i.length,o=parseInt(t/255*2,10);n.clearRect(0,0,e,t),n.fillStyle=a.bgColor,n.fillRect(0,0,e,t);for(var u=e/r,m=u-u/4,f,_=0,k=a.linear,T=0;T<r;T++)f=i[T],n.fillStyle=k,n.fillRect(_,t-f,m,f*o+t/2),_+=u},E=function(s){var i=s.data,a=s.options,n=s.ctx,t=s.h,e=s.w,r=a.count||128;i.length<r&&(r=i.length);var o=t/255,u=e/r,m=a.linear;n.clearRect(0,0,e,t),n.fillStyle=a.bgColor,n.fillRect(0,0,e,t);for(var f=1;f<=r;f++){var _=i[f];_*=o;var k=u*f;n.moveTo(k,t),n.lineTo(k,t-_),n.strokeStyle=m,n.stroke(),n.beginPath()}},L=function(s){var i=s.data,a=s.options,n=s.ctx,t=s.h,e=s.w,r=i.length>a.count?a.count:i.length;n.clearRect(0,0,e,t),n.fillStyle=a.bgColor,n.fillRect(0,0,e,t),n.beginPath();var o=a.linear;n.strokeStyle=o;for(var u=e/r,m=0,f=0;f<r;f++){var _=i[f]/128,k=_*t/2;f===0?n.moveTo(m,k):n.lineTo(m,k),m+=u}n.lineTo(e,t/2),n.stroke()},S=function(s){var i=s.data,a=s.options,n=s.ctx,t=s.h,e=s.w,r=t/255,o=e/128,u=a.count||128,m=5;n.clearRect(0,0,e,t),n.fillStyle=a.bgColor,n.fillRect(0,0,e,t);for(var f=a.linear,_=1;_<=u;_++){var k=i[_];k+=m,k*=r;var T=o*_,A=t/2+k/2;n.moveTo(T,A),n.lineTo(T,A-k),n.strokeStyle=f,n.stroke(),n.beginPath()}},y=function(s){var i=s.data,a=s.options,n=s.ctx,t=s.h,e=s.w,r=i.length>a.count?a.count:i.length,o=t/255;n.clearRect(0,0,e,t),n.fillStyle=a.bgColor,n.fillRect(0,0,e,t);for(var u=e/r,m=u-u/4,f,_=0,k=a.linear,T=0;T<r;T++)f=i[T]*o,n.fillStyle=k,n.fillRect(_,t/2+f/2,m,-f),_+=u};function v(s,i,a){for(var n=s.createLinearGradient(0,0,i,0),t=a.length,e=100/t,r=0;r<a.length;r++)n.addColorStop(e*r/100,a[r]);return n}function g(s,i){(!i||i<1)&&(i=s.length*i);for(var a=[],n=Math.floor(s.length/i),t=1;t<=i;t++){var e=s.slice(t*n,t*n+n),r=e[Math.floor(e.length/2)];a.push(r)}return a}function p(s,i){var a=i/255;i<=3&&i>=0&&(a=i);var n=s.map(function(t){return t*a});return n}function d(s,i){for(var a=Math.floor(s.length/i),n=[],t=[],e=0,r=0;r<=a*i;r++)e===a&&(n.push(t),t=[],e=0),t.push(s[r]),e++;return n}function x(s,i,a,n){var t=a.w,e=a.linear,r=a.reverse,o=a.offset;s.save(),s.beginPath();var u=t*1/n;s.strokeStyle=e;for(var m=0,f=0,_=0;_<n;_++)f=r?0-i[_]:i[_],f=o-f,_===0?s.moveTo(m,f):s.lineTo(m,f),m+=u;s.lineTo(t,f),s.stroke()}var b=function(s){var i=s.options,a=s.ctx,n=s.h,t=s.w,e=s.data,r=i.colors;e=g(e,2048),e=p(e,n/2),e=d(e,4).slice(0,3),a.clearRect(0,0,t,n),a.fillStyle=i.bgColor,a.fillRect(0,0,t,n);for(var o=0;o<e.length;o++)x(a,e[o],{linear:r[o],w:t,h:n,offset:n/2,reverse:!1},e[o].length),x(a,e[o],{linear:r[o],w:t,h:n,offset:n/2,reverse:!0},e[o].length)},I={bars:O,vertLines:E,lightning:L,doubleLine:S,doubleBars:y,waves:b},P={bars:2,vertLines:1,lightning:2,doubleLine:1,doubleBars:2,waves:2},w={BARS:"bars",VERT_LINES:"vertLines",LIGHTNING:"lightning",DOUBLE_LINE:"doubleLine",DOUBLE_BARS:"doubleBars",WAVES:"waves"};function l(s,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(i){a=(0,c.Zj)({},a),a.stroke||(a.stroke=1),a.colors||(a.colors=["#ff8177","#cf556c","#f99185","#b12a5b"]);var t=i.getContext("2d"),e=i.height,r=i.width;t.strokeStyle=a.colors[0],t.lineWidth=a.stroke;var o={data:s,options:a,ctx:t,h:e,w:r};typeof a.mode=="string"&&(a.mode=[a.mode]),a.mode.forEach(function(u){n%P[u]===0&&(t.clearRect(0,0,r,e),t.beginPath(),I[u](o))})}}var h=function(){function s(i,a){var n=this,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};(0,c.PA)(this,s),(0,c._x)(this,"start",function(){n.reqId||n._renderFrame()}),(0,c._x)(this,"stop",function(){cancelAnimationFrame(n.reqId),n.reqId=null}),(0,c._x)(this,"_onDestroy",function(){n._audioCtx.close()}),(0,c._x)(this,"_onoVolumechange",function(){console.log("onoVolumechange"),n.gainNode.gain.setValueAtTime(n.player.volume,n.player.currentTime)}),(0,c._x)(this,"_renderFrame",function(){n.reqId&&cancelAnimationFrame(n.reqId),n.reqId=requestAnimationFrame(n._renderFrame),n.frameCount++,n.mode==="lightning"?n.analyser.getByteTimeDomainData(n.dataArray):n.analyser.getByteFrequencyData(n.dataArray),l.call(n,n.dataArray,n.canvas,n.options,n.frameCount)}),this.canvas=a;var e=this.canvas.getBoundingClientRect(),r=e.width,o=e.height;if(this.canvas.width=r*2,this.canvas.height=o*2,this.player=i,this.options=s.defaultConfig,Object.keys(t).map(function(m){n.options[m]=t[m]}),!!s.AudioCtx){i.audioCtx?this._audioCtx=i.audioCtx:this._audioCtx=new s.AudioCtx,this.analyser=this._audioCtx.createAnalyser();var u=this._audioCtx.createGain();u.gain.setValueAtTime(i.volume,i.currentTime),this.gainNode=u,this.source=this._audioCtx.createMediaElementSource(i.video),this.ctx=a.getContext("2d"),this.source.connect(this.analyser),this.analyser.connect(u),this.fftSize=this.options.fftSize,this.frameCount=0,this.options.isGradient&&(this.options.linear=v(this.ctx,a.width,this.options.colors)),u.connect(this._audioCtx.destination),this._initPlayerEvents()}}return(0,c.qH)(s,[{key:"_initPlayerEvents",value:function(){var a=this;["play","playing","seeked"].forEach(function(n){a.player.on(n,a.start)}),this.player.on("volumechange",this._onoVolumechange),this.player.on("destroy",this._onDestroy)}},{key:"destroy",value:function(){var a=this;this.stop(),["play","playing","seeked"].forEach(function(n){a.player.off(n,a.start)}),this.player.off("volumechange",this._onoVolumechange),this.player.off("destroy",this._onDestroy),this._audioCtx.close()}},{key:"mode",get:function(){return this.options.mode},set:function(a){this.options.mode=a}},{key:"fftSize",get:function(){return this.analyser.frequencyBinCount*2},set:function(a){this.analyser.fftSize=a;var n=this.analyser.frequencyBinCount;this.dataArray=new Uint8Array(n)}}],[{key:"defaultConfig",get:function(){return{fftSize:16384,count:1024,mode:"bars",colors:["#ff8177","#cf556c","#f99185","#b12a5b"],stroke:2,bgColor:"#000",isGradient:!0,linear:null}}},{key:"MODES",get:function(){return w}},{key:"AudioCtx",get:function(){return window.AudioContext||window.webkitAudioContext}}]),s}()},54509:function(R,D,C){C.d(D,{Z:function(){return L}});var c=C(17255),O=C(64389),E=(0,c.qH)(function S(y){(0,c.PA)(this,S),this.regRule=/(\d{2}(?=:)):(\d{2}(?=\.))\.(\d{2,3})/g,this.regRule.test(y)?this.time=RegExp.$1*60+RegExp.$2*1+("0."+RegExp.$3)*1:this.time=-1}),L=function(){function S(y,v){var g=this;(0,c.PA)(this,S),this.rawTxts=y,this.txts=y.map(function(p){return p.replace(/^[\r\n]|[\r\n]$/g,"").match(/(\[.*\])[^[]+/g)}),this.isDynamics=y.map(function(p,d){return[].concat(p.match(/\[\d{2}:\d{2}\.\d{2,3}\]/g)).length===g.txts[d].length&&g.txts[d].length===g.txts[0].length&&g.txts[d].length>1}),this.isDynamic=this.isDynamics.some(function(p){return p}),this.__ainimateInterval__=0,this.__offset__=0,this.__offsetScale__=.5,this.dom=v,this.lists=[],this.isDynamics.map(function(p,d){p&&g.lists.push(g.txts[d].map(function(x,b){var I=/(\[[\d:\S]+\])([^[]+)/g.test(x),P=RegExp.$1,w=RegExp.$2;return{time:I?new E(P).time:-1,lyric:w,idx:b}}))}),this.list=this.lists.reduce(function(p,d){return p.map(function(x,b){return{time:x.time,lyric:x.lyric===`
`?"".concat(x.lyric).concat(d[b].lyric):"".concat(x.lyric,"<br/>").concat(d[b].lyric),idx:b}})}),this.line=0}return(0,c.qH)(S,[{key:"interval",get:function(){return this.__ainimateInterval__},set:function(v){this.__ainimateInterval__=v}},{key:"offset",get:function(){return this.__offset__},set:function(v){this.__offset__=v}},{key:"offsetScale",get:function(){return this.__offsetScale__},set:function(v){this.__offsetScale__=v}},{key:"adjust",value:function(){for(var v=this.list,g=0,p,d,x=v.length;g<x;g++){for(p=g+1;p<x&&!(v[p].time>v[g].time);p++);if(p<x){var b=(v[p].time-v[g].time)/(p-g);for(d=g+1;d<p;d++)v[d].time=v[d-1].time+b}}}},{key:"find",value:function(v){var g=this.list,p=this.__ainimateInterval__,d=this.__offset__;return v=v+d>0?v+d:0,g.filter(function(x,b){var I=x.time,P=b+1;return v>=I&&(g[P]&&v*1+p*1<=g[P].time||P>=g.length)})}},{key:"bind",value:function(v){var g=this,p=this;return this.__player__=v,p.isDynamic?(p.__handle__=function(){var d=g.find(v.currentTime)[0];d&&d.idx!==g.line&&(g.line=d.idx,v.emit("lyricUpdate",d))}.bind(p,v),v.on("timeupdate",p.__handle__),p.__startHandle__=function(){v.emit("lyricUpdate",p.list[0])}.bind(p,v),v.once("playing",p.__startHandle__),!0):!1}},{key:"unbind",value:function(v){delete this.__player__,this.__handle__&&(v.off("lyricUpdate",this.__handle__),delete this.__handle__)}},{key:"show",value:function(){var v=this,g=this.dom,p=[],d=this,x=["click","touchstart"];if(g&&g.nodeType===1){var b=O.ZP.createDom("div","<div></div>",{},"xgplayer-lrcWrap");g.appendChild(b),this.list.forEach(function(w){p.push('<xg-lyric-item class="xgplayer-lyric-item" data-idx="'.concat(w.idx,'">').concat(w.lyric.replace(/[\r\n]/g,""),"</xg-lyric-item>"))}),b.innerHTML=p.join("");var I=O.ZP.createDom("xg-lrcForward","<div></div>",{},"xgplayer-lrcForward");g.appendChild(I),x.forEach(function(w){I.addEventListener(w,function(l){l.preventDefault(),l.stopPropagation(),d.offset-=d.offsetScale,console.log("lyric go forward ".concat(d.offsetScale,"s"))},!1)});var P=O.ZP.createDom("xg-lrcBack","<div></div>",{},"xgplayer-lrcBack");g.appendChild(P),x.forEach(function(w){P.addEventListener(w,function(l){l.preventDefault(),l.stopPropagation(),d.offset+=d.offsetScale,console.log("lyric go back ".concat(d.offsetScale,"s"))},!1)}),this.__updateHandle__=function(w){var l=v.dom.querySelector(".xgplayer-lrcWrap"),h=l.querySelector(".xgplayer-lyric-item-active"),s=l.offsetHeight,i;h&&(h.className="xgplayer-lyric-item"),h=l.querySelector('.xgplayer-lyric-item[data-idx="'.concat(w.idx,'"]')),h&&(h.className="xgplayer-lyric-item xgplayer-lyric-item-active",i=h.getBoundingClientRect().top-l.getBoundingClientRect().top+l.scrollTop-s/2,i&&(l.scrollTop=i))},this.__player__.on("lyricUpdate",this.__updateHandle__)}else this.__player__.emit("error","lyric container can not be empty")}},{key:"hide",value:function(){this.__updateHandle__.off("lyricUpdate",this.__updateHandle__)}}]),S}()},73665:function(R,D,C){C.d(D,{Z:function(){return s}});var c=C(17255),O=C(64389),E=C(24506),L=C(93112),S=function(){function i(a,n){(0,c.PA)(this,i),this.url=a;var t=new window.XMLHttpRequest;t.target=this,t.responseType="arraybuffer",t.open("get",a),t.onload=function(){(t.status===200||t.status===206)&&n&&n instanceof Function&&n(t.response)},t.onerror=function(e){},this.xhr=t,this.run()}return(0,c.qH)(i,[{key:"cancel",value:function(){this.xhr.abort()}},{key:"run",value:function(){this.xhr.readyState===1&&this.xhr.send()}}]),i}(),y={ORDER:"order",SLOOP:"sloop",LOOP:"loop",RANDOM:"random"},v="xgplayer-music";function g(i,a,n){var t=Math.floor(Math.random()*(a-i)+i);return t===n?(t>a/2?a=a/2:i=a/2,a-i>2?g(i,a,n):t):t}var p=function(i){(0,c.XW)(n,i);var a=(0,c.WY)(n);function n(){var t;(0,c.PA)(this,n);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t=a.call.apply(a,[this].concat(r)),(0,c._x)((0,c.Lc)(t),"_onEnded",function(){if(t.mode==="order"&&t.index+1>=t.list.length){t.player.pause(),t.player.currentTime=0;return}switch(t.mode){case y.SLOOP:t.change();break;case y.ORDER:case y.LOOP:default:t.next();break}}),(0,c._x)((0,c.Lc)(t),"_onDurationChange",function(){var u=t.config.abCycle;t._initABCycle(u,t.player)}),(0,c._x)((0,c.Lc)(t),"_onTimeUpdate",function(){var u=(0,c.Lc)(t),m=u.config,f=u.player;if(!t.halfPass&&f.currentTime>f.duration/2&&t.confirmOrder(),m.abCycle){var _=m.abCycle,k=_.end>f.duration?f.duration:_.end;f.currentTime>=k?(_.loop||(f.pause(),t.emit("abCycle_ended")),f.currentTime=_.start||0):f.currentTime<_.start&&(f.currentTime=_.start||0)}}),t}return(0,c.qH)(n,[{key:"afterCreate",value:function(){var e=this.player,r=this.playerConfig;O.ZP.addClass(e.root,v),this.halfPass=!1,this.list=this.config.list||[],this.nextIndex=-1,this.prevIndex=-1,this.history=[],this.disable=!(this.list.length>0),this.list.length!==0&&(!r.url&&this.list.length>0&&(r.url=this.list[0].src),r.poster||(r.poster=this.list[0].poster),r.title||(r.title=this.list[0].title||""),r.vid||(r.vid=this.list[0].vid||""),this._curInfo={src:r.url,poster:r.poster,title:r.title,vid:r.vid},this.index=0,this.on(E.TIME_UPDATE,this._onTimeUpdate),this.on(E.ENDED,this._onEnded),this.on(E.DURATION_CHANGE,this._onDurationChange),this.config.offline&&this.checkOffline(this._curInfo.src,this._curInfo.vid).then(function(o){o.code===0&&(r.url=o.url,e.state>=4&&(e.src=o.url))}).catch(function(o){}))}},{key:"destroy",value:function(){O.ZP.removeClass(this.player.root,v)}},{key:"_nextCompute",value:function(){if(!this.disable)switch(this.mode){case y.SLOOP:case y.ORDER:case y.LOOP:this.index+1<this.list.length?this.nextIndex=this.index+1:this.nextIndex=0;break;default:this.nextIndex=g(0,this.list.length,this.index);break}}},{key:"_prevCompute",value:function(){if(!this.disable)switch(this.mode){case y.SLOOP:case y.ORDER:case y.LOOP:this.index-1>=0?this.prevIndex=this.index-1:this.prevIndex=this.list.length-1;break;default:this.prevIndex=g(0,this.list.length,this.index);break}}},{key:"_emitChange",value:function(){this.emit("change",this._curInfo)}},{key:"_initABCycle",value:function(e,r){var o=r.plugins.progresspreview;if(e&&r){var u=e.end>this.player.duration?this.player.duration:e.end,m=e.start>this.player.duration?0:e.start,f={id:r.playerId,time:e.start,duration:u-m,text:e.text,color:e.color};o.findDot(f.id)?o.updateDot(f):o.createDot(f)}else o.findDot(r.playerId)&&o.deleteDot(r.playerId)}},{key:"random",value:function(){if(this.list.length<0)return null;var e=g(0,this.list.length,this.index);return this.list[e]}},{key:"next",value:function(){this.disable||(this.halfPass||(this.halfPass=!0,this._nextCompute()),this.index=this.nextIndex,this.change())}},{key:"prev",value:function(){this.disable||(this.halfPass||(this.halfPass=!0,this._prevCompute()),this.index=this.prevIndex,this.change())}},{key:"forward",value:function(){var e=this.player,r=this.config.timeScale;e.currentTime=e.currentTime+r<e.duration?e.currentTime+r:e.duration-.1}},{key:"backward",value:function(){var e=this.player,r=this.config.timeScale;e.currentTime=e.currentTime-r>0?e.currentTime-r:0}},{key:"add",value:function(e){this.list.push({src:e.src,title:e.title,vid:e.vid,poster:e.poster})}},{key:"remove",value:function(e){var r=-1;this.list.every(function(o,u){return o.vid===e?(r=u,!1):!0}),r>-1&&this.list.splice(r,1)}},{key:"setAbCycle",value:function(e,r,o){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};e&&O.ZP.typeof(e)==="Object"?this.config.abCycle=(0,c.Zj)({},e):this.config.abCycle=(0,c.Zj)({start:e||0,end:r||this.player.duration,loop:o},u),this._initABCycle(this.config.abCycle,this.player)}},{key:"removeAbCycle",value:function(){this.config.abCycle=null,this._initABCycle(null,this.player)}},{key:"updateList",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.removeAbCycle(),this.player.pause(),this.player.currentTime=0,this.list=e,this.nextIndex=0,this.index=0,this.change()}},{key:"setIndex",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;e<0||e>=this.list.length||(this.nextIndex=e,this.index=e,this.change())}},{key:"change",value:function(){var e=this;if(!this.disable){var r=this.player,o=this.list,u=this.index,m=o[u].vid;this.halfPass=!1,this.checkOffline(o[u].src,m).then(function(f){e._curInfo={title:e.list[e.index].title||"",vid:e.list[e.index].vid,poster:e.list[e.index].poster||"",src:f.url},r.playNext({url:f.url,vid:e.list[e.index].vid||0,poster:e.list[e.index].poster||"",autoplay:!0}),r.off("timeupdate",e._emitChange),r.once("timeupdate",e._emitChange),r.play()})}}},{key:"checkOffline",value:function(e,r){var o=this;return new Promise(function(u,m){(!o.config.offline||o.disable)&&u({url:e,code:-1,vid:r});var f=o.player.database;f.openDB(function(){f.getDataByKey(f.myDB.ojstore.name,r,function(_){setTimeout(function(){f.closeDB()},5e3),u(_?{url:URL.createObjectURL(_.blob),code:0,vid:_.vid}:{url:e,code:-2,vid:r})})})})}},{key:"confirmOrder",value:function(){this.halfPass=!0,this._nextCompute(),this._prevCompute(),this.config.preloadNext&&this.preload(this.nextIndex)}},{key:"preload",value:function(e){if(!(e<0||e>=this.list.length)){var r=this.list[e],o=this.player;this.checkOffline(r.src,r.vid).then(function(u){if(u.code===-2){var m=r.vid;new S(r.src,function(f){o.database.openDB(function(){o.database.addData(o.database.myDB.ojstore.name,[{vid:m,blob:new Blob([f],{type:'audio/mp4; codecs="mp4a.40.5"'})}]),setTimeout(function(){o.database.closeDB()},5e3)})})}})}}},{key:"timeScale",get:function(){return this.config.timeScale||15},set:function(e){this.config.timeScale=e}},{key:"mode",get:function(){return this.config.mode||y.RANDOM},set:function(e){this.config.mode=e}}],[{key:"pluginName",get:function(){return"music"}},{key:"defaultConfig",get:function(){return{offline:!1,preloadNext:!0,abCycle:null,timeScale:15,mode:y.ORDER,list:[]}}},{key:"ModeType",get:function(){return Object.keys(y).map(function(e){return y[e]})}}]),n}(L.ZP),d=C(44086),x=function(i){(0,c.XW)(n,i);var a=(0,c.WY)(n);function n(){return(0,c.PA)(this,n),a.apply(this,arguments)}return(0,c.qH)(n,[{key:"afterCreate",value:function(){var e=this;if(this.on("change",function(o){if(o&&o.poster){if(e.find("img"))e.find("img").src=o.poster;else{var u=new Image;u.src=o.poster,e.appendChild(u)}e.find("img").src=o.poster,e.show()}else e.hide()}),this.playerConfig.poster){var r=new Image;r.src=this.playerConfig.poster,this.appendChild(r)}}},{key:"render",value:function(){return'<xg-icon class="xgplayer-cover"></xg-icon>'}}],[{key:"pluginName",get:function(){return"musiccover"}},{key:"defaultConfig",get:function(){return{index:6,position:d.ZP.POSITIONS.CONTROLS_LEFT}}}]),n}(d.ZP),b=function(i){(0,c.XW)(n,i);var a=(0,c.WY)(n);function n(){var t;(0,c.PA)(this,n);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t=a.call.apply(a,[this].concat(r)),(0,c._x)((0,c.Lc)(t),"onClick",function(u){var m=(0,c.Lc)(t),f=m.player;u.preventDefault(),u.stopPropagation(),f.plugins.music.backward()}),t}return(0,c.qH)(n,[{key:"afterCreate",value:function(){var e=this;this.initIcons();var r=["click","touchstart"];r.forEach(function(o){e.bind(o,e.onClick)})}},{key:"registerIcons",value:function(){return{musicBackward:{icon:`<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="-2 0 21 15">
      <path d="m 14,2.99996 0,10 -7,-5 7,-5 z m -7,5 0,5 -7,-5 7,-5 0,5 z m -7,0 0,0 z"></path>
  </svg>`,class:"xg-icon-mbackward"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.musicBackward)}},{key:"destroy",value:function(){var e=this,r=["click","touchstart"];r.forEach(function(o){e.unbind(o,e.onClick)})}},{key:"render",value:function(){return`<xg-icon class="xgplayer-backward">
            <div class="xgplayer-icon">
            </div>
          </xg-icon>`}}],[{key:"pluginName",get:function(){return"musicbackword"}},{key:"defaultConfig",get:function(){return{index:1,position:d.ZP.POSITIONS.CONTROLS_LEFT}}}]),n}(d.ZP),I=function(i){(0,c.XW)(n,i);var a=(0,c.WY)(n);function n(){var t;(0,c.PA)(this,n);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t=a.call.apply(a,[this].concat(r)),(0,c._x)((0,c.Lc)(t),"onClick",function(u){var m=(0,c.Lc)(t),f=m.player;u.preventDefault(),u.stopPropagation(),f.plugins.music.prev()}),t}return(0,c.qH)(n,[{key:"afterCreate",value:function(){var e=this;this.initIcons();var r=["click","touchstart"];r.forEach(function(o){e.bind(o,e.onClick)})}},{key:"registerIcons",value:function(){return{musicPrev:{icon:` <svg xmlns="http://www.w3.org/2000/svg" width="40" height="32" viewBox="300 200 1024 1024">
        <path d="M600 1140v-768h128v352l320-320v704l-320-320v352zz"></path>
    </svg>`,class:"xg-icon-mprev"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.musicPrev)}},{key:"destroy",value:function(){var e=this,r=["click","touchstart"];r.forEach(function(o){e.unbind(o,e.onClick)})}},{key:"render",value:function(){return`<xg-icon class="xgplayer-next">
            <div class="xgplayer-icon">
            </div>
          </xg-icon>`}}],[{key:"pluginName",get:function(){return"musicprev"}},{key:"defaultConfig",get:function(){return{index:2,position:d.ZP.POSITIONS.CONTROLS_LEFT}}}]),n}(d.ZP),P=function(i){(0,c.XW)(n,i);var a=(0,c.WY)(n);function n(){var t;(0,c.PA)(this,n);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t=a.call.apply(a,[this].concat(r)),(0,c._x)((0,c.Lc)(t),"onClick",function(u){var m=(0,c.Lc)(t),f=m.player;u.preventDefault(),u.stopPropagation(),f.plugins.music.forward()}),t}return(0,c.qH)(n,[{key:"afterCreate",value:function(){var e=this;this.initIcons();var r=["click","touchstart"];r.forEach(function(o){e.bind(o,e.onClick)})}},{key:"registerIcons",value:function(){return{musicForward:{icon:`<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="-2 0 21 15">
        <path d="m 2,2.99996 0,10 7,-5 -7,-5 z m 7,5 0,5 7,-5 -7,-5 0,5 z m 7,0 0,0 z"></path>
      </svg>`,class:"xg-icon-mforward"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.musicForward)}},{key:"destroy",value:function(){var e=this,r=["click","touchstart"];r.forEach(function(o){e.unbind(o,e.onClick)})}},{key:"render",value:function(){return`<xg-icon class="xgplayer-forward">
            <div class="xgplayer-icon">
            </div>
          </xg-icon>`}}],[{key:"pluginName",get:function(){return"musicforward"}},{key:"defaultConfig",get:function(){return{index:5,position:d.ZP.POSITIONS.CONTROLS_LEFT}}}]),n}(d.ZP),w=function(i){(0,c.XW)(n,i);var a=(0,c.WY)(n);function n(){var t;(0,c.PA)(this,n);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t=a.call.apply(a,[this].concat(r)),(0,c._x)((0,c.Lc)(t),"onClick",function(u){var m=(0,c.Lc)(t),f=m.player;u.preventDefault(),u.stopPropagation(),f.plugins.music.next()}),t}return(0,c.qH)(n,[{key:"afterCreate",value:function(){var e=this;this.initIcons();var r=["click","touchstart"];r.forEach(function(o){e.bind(o,e.onClick)})}},{key:"registerIcons",value:function(){return{musicNext:{icon:` <svg xmlns="http://www.w3.org/2000/svg" width="40" height="32" viewBox="100 200 1024 1024">
        <path d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z">
      </svg>`,class:"xg-icon-mnext"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.musicNext)}},{key:"destroy",value:function(){var e=this,r=["click","touchstart"];r.forEach(function(o){e.unbind(o,e.onClick)})}},{key:"render",value:function(){return`<xg-icon class="xgplayer-next">
            <div class="xgplayer-icon">
            </div>
          </xg-icon>`}}],[{key:"pluginName",get:function(){return"musicnext"}},{key:"defaultConfig",get:function(){return{index:4,position:d.ZP.POSITIONS.CONTROLS_LEFT}}}]),n}(d.ZP),l=function(i){(0,c.XW)(n,i);var a=(0,c.WY)(n);function n(){return(0,c.PA)(this,n),a.apply(this,arguments)}return(0,c.qH)(n,[{key:"beforeCreate",value:function(e){var r=e.player.plugins.progress;r&&(e.root=r.root)}},{key:"afterCreate",value:function(){var e=this;this.on("change",function(r){r&&r.title?e.root.innerHTML="".concat(r.title):e.root.innerHTML=""})}},{key:"render",value:function(){var e=this.playerConfig;return`<xg-title class="xgplayer-name">
          `.concat(e.title||"",`
       </xg-title>`)}}],[{key:"pluginName",get:function(){return"musicmeta"}},{key:"defaultConfig",get:function(){return{index:0}}}]),n}(d.ZP);function h(i){if(O.ZP.typeOf(i.controls)!=="Object")i.controls={mode:"flex",initShow:!0};else{var a=i.controls;i.controls=(0,c.Zj)({mode:"flex",initShow:!0},a)}var n=i.play||{};i.play=(0,c.Zj)({index:3},n),i.marginControls=!0,i.mediaType="audio"}var s=(0,c.qH)(function i(a,n){(0,c.PA)(this,i),console.log("config",a,n),console.log("playerConfig",O.ZP.typeOf(n.controls)!=="Object"),h(n),this.plugins=[p,b,I,P,w,x,l],this.ignores=["start","cssFullScreen","fullscreen","pip","enter","replay","pc","loading","poster"]})}}]);
